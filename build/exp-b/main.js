(self.webpackChunkcarambola=self.webpackChunkcarambola||[]).push([[179],{255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=255,t.exports=e},68:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise(function(n,r){function i(n){t.removeListener(e,s),r(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,i)})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,n,r){var i,s,o;if(a(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)r(c,this,e);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,h(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,r,i,s,o;if(a(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},601:(t,e,n)=>{"use strict";var r,i,s,o=[n(525),n(116),n(743),n(58),n(552),n(371)],a=-1,c=[],u=!1;function l(){r&&i&&(r=!1,i.length?c=i.concat(c):a=-1,c.length&&h())}function h(){if(!r){u=!1,r=!0;for(var t=c.length,e=setTimeout(l);t;){for(i=c,c=[];i&&++a<t;)i[a].run();a=-1,t=c.length}i=null,a=-1,r=!1,clearTimeout(e)}}for(var d=-1,f=o.length;++d<f;)if(o[d]&&o[d].test&&o[d].test()){s=o[d].install(h);break}function p(t,e){this.fun=t,this.array=e}p.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},t.exports=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),u||r||(u=!0,s())}},58:(t,e)=>{"use strict";e.test=function(){return!global.setImmediate&&void 0!==global.MessageChannel},e.install=function(t){var e=new global.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}},743:(t,e)=>{"use strict";var n=global.MutationObserver||global.WebKitMutationObserver;e.test=function(){return n},e.install=function(t){var e=0,r=new n(t),i=global.document.createTextNode("");return r.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}},116:(t,e)=>{"use strict";e.test=function(){return"function"==typeof global.queueMicrotask},e.install=function(t){return function(){global.queueMicrotask(t)}}},552:(t,e)=>{"use strict";e.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},e.install=function(t){return function(){var e=global.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e),t}}},371:(t,e)=>{"use strict";e.test=function(){return!0},e.install=function(t){return function(){setTimeout(t,0)}}},283:t=>{t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+e[1]-389564586|0)<<12|s>>>20)+n|0)&n|~s&r)+e[2]+606105819|0)<<17|i>>>15)+s|0)&s|~i&n)+e[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+e[5]+1200080426|0)<<12|s>>>20)+n|0)&n|~s&r)+e[6]-1473231341|0)<<17|i>>>15)+s|0)&s|~i&n)+e[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+e[9]-1958414417|0)<<12|s>>>20)+n|0)&n|~s&r)+e[10]-42063|0)<<17|i>>>15)+s|0)&s|~i&n)+e[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+e[13]-40341101|0)<<12|s>>>20)+n|0)&n|~s&r)+e[14]-1502002290|0)<<17|i>>>15)+s|0)&s|~i&n)+e[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+e[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+e[6]-1069501632|0)<<9|s>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|i>>>18)+s|0)&n|s&~n)+e[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+e[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+e[10]+38016083|0)<<9|s>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|i>>>18)+s|0)&n|s&~n)+e[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+e[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+e[14]-1019803690|0)<<9|s>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|i>>>18)+s|0)&n|s&~n)+e[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+e[2]-51403784|0)<<9|s>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|i>>>18)+s|0)&n|s&~n)+e[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+e[8]-2022574463|0)<<11|s>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|i>>>16)+s|0)^s^n)+e[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+e[4]+1272893353|0)<<11|s>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|i>>>16)+s|0)^s^n)+e[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+e[0]-358537222|0)<<11|s>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|i>>>16)+s|0)^s^n)+e[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+e[12]-421815835|0)<<11|s>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|i>>>16)+s|0)^s^n)+e[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+e[7]+1126891415|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+e[14]-1416354905|0)<<15|i>>>17)+s|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+e[3]-1894986606|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+e[10]-1051523|0)<<15|i>>>17)+s|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+e[15]-30611744|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+e[6]-1560198380|0)<<15|i>>>17)+s|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+e[11]-1120210379|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+e[2]+718787259|0)<<15|i>>>17)+s|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+i|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=i+t[2]|0,t[3]=s+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function s(t){var e,i,s,o,a,c,u=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)n(l,r(t.substring(e-64,e)));for(i=(t=t.substring(e-64)).length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(n(l,s),e=0;e<16;e+=1)s[e]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),c=parseInt(o[1],16)||0,s[14]=a,s[15]=c,n(l,s),l}function o(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=o(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return a(s("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(e,n){var r,i,s,o,a=this.byteLength,c=t(e,a),u=a;return void 0!==n&&(u=t(n,a)),c>u?new ArrayBuffer(0):(r=u-c,i=new ArrayBuffer(r),s=new Uint8Array(i),o=new Uint8Array(this,c,r),s.set(o),i)}}(),l.prototype.append=function(t){return this.appendBinary(c(t)),this},l.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,i=this._buff.length;for(e=64;e<=i;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},l.prototype.end=function(t){var e,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)s[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(s,i),n=a(this._hash),t&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(t,e){var r,i,s,o=e;if(t[o>>2]|=128<<(o%4<<3),o>55)for(n(this._hash,t),o=0;o<16;o+=1)t[o]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,t[14]=i,t[15]=s,n(this._hash,t)},l.hash=function(t,e){return l.hashBinary(c(t),e)},l.hashBinary=function(t,e){var n=a(s(t));return e?u(n):n},(l.ArrayBuffer=function(){this.reset()}).prototype.append=function(t){var e,r,s,o,a=(r=this._buff.buffer,s=t,!0,(o=new Uint8Array(r.byteLength+s.byteLength)).set(new Uint8Array(r)),o.set(new Uint8Array(s),r.byteLength),o),c=a.length;for(this._length+=t.byteLength,e=64;e<=c;e+=64)n(this._hash,i(a.subarray(e-64,e)));return this._buff=e-64<c?new Uint8Array(a.buffer.slice(e-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)s[e>>2]|=r[e]<<(e%4<<3);return this._finish(s,i),n=a(this._hash),t&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var t=l.prototype.getState.call(this);return t.buff=String.fromCharCode.apply(null,new Uint8Array(t.buff)),t},l.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,r=t.length,i=new ArrayBuffer(r),s=new Uint8Array(i);for(n=0;n<r;n+=1)s[n]=t.charCodeAt(n);return s}(t.buff),l.prototype.setState.call(this,t)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(t,e){var r=a(function(t){var e,r,s,o,a,c,u=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)n(l,i(t.subarray(e-64,e)));for(r=(t=e-64<u?t.subarray(e-64):new Uint8Array(0)).length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)s[e>>2]|=t[e]<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(n(l,s),e=0;e<16;e+=1)s[e]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),c=parseInt(o[1],16)||0,s[14]=a,s[15]=c,n(l,s),l}(new Uint8Array(t)));return e?u(r):r},l}()},434:(t,e)=>{"use strict";function n(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,s=r.index;Array.isArray(i)?i.push(t):s===e.length-2?i[e.pop()]=t:e.push(t)}e.stringify=function(t){var e=[];e.push({obj:t});for(var n,r,i,s,o,a,c,u,l,h="";n=e.pop();)if(r=n.obj,h+=n.prefix||"",i=n.val||"")h+=i;else if("object"!=typeof r)h+=void 0===r?null:JSON.stringify(r);else if(null===r)h+="null";else if(Array.isArray(r)){for(e.push({val:"]"}),s=r.length-1;s>=0;s--)e.push({obj:r[s],prefix:0===s?"":","});e.push({val:"["})}else{for(a in o=[],r)r.hasOwnProperty(a)&&o.push(a);for(e.push({val:"}"}),s=o.length-1;s>=0;s--)u=r[c=o[s]],l=s>0?",":"",l+=JSON.stringify(c)+":",e.push({obj:u,prefix:l});e.push({val:"{"})}return h},e.parse=function(t){for(var e,r,i,s,o,a,c,u,l,h=[],d=[],f=0;;)if("}"!==(e=t[f++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":f+=3,n(null,h,d);break;case"t":f+=3,n(!0,h,d);break;case"f":f+=4,n(!1,h,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",f--;;){if(i=t[f++],!/[\d\.\-e\+]/.test(i)){f--;break}r+=i}n(parseFloat(r),h,d);break;case'"':for(s="",o=void 0,a=0;'"'!==(c=t[f++])||"\\"===o&&a%2==1;)s+=c,"\\"===(o=c)?a++:a=0;n(JSON.parse('"'+s+'"'),h,d);break;case"[":h.push((u={element:[],index:h.length}).element),d.push(u);break;case"{":h.push((l={element:{},index:h.length}).element),d.push(l);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();n(h.pop(),h,d)}}},272:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},c=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){e=a instanceof l?d(a.errors):[a]}}if(c(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(u(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof l?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends p{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class b extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class k extends p{constructor(t){super(t),this.destination=t}}let C=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new k(this)}lift(t){const e=new x(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new b(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new x(t,e),t})();class x extends C{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function O(t){return t&&"function"==typeof t.schedule}function E(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new T(t,e))}}class T{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new S(t,this.project,this.thisArg))}}class S extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=I(),R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function M(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const N=t=>{if(t&&"function"==typeof t[g])return n=t,t=>{const e=n[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return A(t);if(M(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[D])return e=t,t=>{const n=e[D]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function j(t,e){return new v(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function P(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[g]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(M(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return j(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[D](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(N(t))}class L extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class F extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function V(t,e){if(e.closed)return;if(t instanceof v)return t.subscribe(e);let n;try{n=N(t)(e)}catch(r){e.error(r)}return n}function $(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe($((n,r)=>P(t(n,r)).pipe(E((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new H(t,this.project,this.concurrent))}}class H extends F{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new L(this),n=this.destination;n.add(e);const r=V(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function B(t=Number.POSITIVE_INFINITY){return $(y,t)}function z(t,e){return e?j(t,e):new v(A(t))}function Z(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return O(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:B(e)(z(t,n))}function U(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new G(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class G extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class K extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return U()(this)}}const J=(()=>{const t=K.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Y extends k{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Q(){return new C}function X(){return t=>{return U()((e=Q,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,J);return r.source=t,r.subjectFactory=n,r})(t));var e}}function tt(t){for(let e in t)if(t[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function et(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(et).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function nt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const rt=tt({__forward_ref__:tt});function it(t){return t.__forward_ref__=it,t.toString=function(){return et(this())},t}function st(t){return"function"==typeof(e=t)&&e.hasOwnProperty(rt)&&e.__forward_ref__===it?t():t;var e}class ot extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function at(t){return"string"==typeof t?t:null==t?"":String(t)}function ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():at(t)}function ut(t,e){const n=e?` in ${e}`:"";throw new ot("201",`No provider for ${ct(t)} found${n}`)}function lt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{providers:t.providers||[],imports:t.imports||[]}}function dt(t){return ft(t,mt)||ft(t,yt)}function ft(t,e){return t.hasOwnProperty(e)?t[e]:null}function pt(t){return t&&(t.hasOwnProperty(gt)||t.hasOwnProperty(vt))?t[gt]:null}const mt=tt({"\u0275prov":tt}),gt=tt({"\u0275inj":tt}),yt=tt({ngInjectableDef:tt}),vt=tt({ngInjectorDef:tt});var _t=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let wt;function bt(t){const e=wt;return wt=t,e}function kt(t,e,n){const r=dt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_t.Optional?null:void 0!==e?e:void ut(et(t),"Injector")}function Ct(t){return{toString:t}.toString()}var xt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Ot=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Et="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,St="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At="undefined"!=typeof global&&global,It=Et||At||Tt||St,Dt={},Rt=[],Mt=tt({"\u0275cmp":tt}),Nt=tt({"\u0275dir":tt}),jt=tt({"\u0275pipe":tt}),Pt=tt({"\u0275mod":tt}),Lt=tt({"\u0275loc":tt}),Ft=tt({"\u0275fac":tt}),Vt=tt({__NG_ELEMENT_ID__:tt});let $t=0;function qt(t){return Ct(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===xt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ot.Emulated,id:"c",styles:t.styles||Rt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=$t++,n.inputs=Ut(t.inputs,e),n.outputs=Ut(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ht):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Bt):null,n})}function Ht(t){return Kt(t)||function(t){return t[Nt]||null}(t)}function Bt(t){return function(t){return t[jt]||null}(t)}const zt={};function Zt(t){return Ct(()=>{const e={type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(zt[t.id]=t.type),e})}function Ut(t,e){if(null==t)return Dt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const Wt=qt;function Gt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kt(t){return t[Mt]||null}function Jt(t,e){const n=t[Pt]||null;if(!n&&!0===e)throw new Error(`Type ${et(t)} does not have '\u0275mod' property.`);return n}const Yt=20,Qt=10;function Xt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return 2==(2&t.flags)}function re(t){return 1==(1&t.flags)}function ie(t){return null!==t.template}function se(t,e){return t.hasOwnProperty(Ft)?t[Ft]:null}class oe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ae(){return ce}function ce(t){return t.type.prototype.ngOnChanges&&(t.setInput=le),ue}function ue(){const t=he(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Dt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function le(t,e,n,r){const i=he(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Dt,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new oe(c&&c.currentValue,e,o===Dt),t[r]=e}function he(t){return t.__ngSimpleChanges__||null}ae.ngInherit=!0;const de="http://www.w3.org/2000/svg";let fe;function pe(t){return!!t.listen}const me={createRenderer:(t,e)=>void 0!==fe?fe:"undefined"!=typeof document?document:void 0};function ge(t){for(;Array.isArray(t);)t=t[0];return t}function ye(t,e){return ge(e[t])}function ve(t,e){return ge(e[t.index])}function _e(t,e){return t.data[e]}function we(t,e){return t[e]}function be(t,e){const n=e[t];return Xt(n)?n:n[0]}function ke(t){return 4==(4&t[2])}function Ce(t){return 128==(128&t[2])}function xe(t,e){return null==e?null:t[e]}function Oe(t){t[18]=0}function Ee(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Te={lFrame:Ye(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Se(){return Te.bindingsEnabled}function Ae(){return Te.lFrame.lView}function Ie(){return Te.lFrame.tView}function De(t){return Te.lFrame.contextLView=t,t[8]}function Re(){let t=Me();for(;null!==t&&64===t.type;)t=t.parent;return t}function Me(){return Te.lFrame.currentTNode}function Ne(t,e){const n=Te.lFrame;n.currentTNode=t,n.isParent=e}function je(){return Te.lFrame.isParent}function Pe(){Te.lFrame.isParent=!1}function Le(){return Te.isInCheckNoChangesMode}function Fe(t){Te.isInCheckNoChangesMode=t}function Ve(){const t=Te.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $e(){return Te.lFrame.bindingIndex}function qe(){return Te.lFrame.bindingIndex++}function He(t){const e=Te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Be(t,e){const n=Te.lFrame;n.bindingIndex=n.bindingRootIndex=t,ze(e)}function ze(t){Te.lFrame.currentDirectiveIndex=t}function Ze(){return Te.lFrame.currentQueryIndex}function Ue(t){Te.lFrame.currentQueryIndex=t}function We(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ge(t,e,n){if(n&_t.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&_t.Host||(r=We(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Te.lFrame=Je();return r.currentTNode=e,r.lView=t,!0}function Ke(t){const e=Je(),n=t[1];Te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Je(){const t=Te.lFrame,e=null===t?null:t.child;return null===e?Ye(t):e}function Ye(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Qe(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Xe=Qe;function tn(){const t=Qe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function en(){return Te.lFrame.selectedIndex}function nn(t){Te.lFrame.selectedIndex=t}function rn(){const t=Te.lFrame;return _e(t.tView,t.selectedIndex)}function sn(){Te.lFrame.currentNamespace=de}function on(){Te.lFrame.currentNamespace=null}function an(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function cn(t,e,n){hn(t,e,3,n)}function un(t,e,n,r){(3&t[2])===n&&hn(t,e,n,r)}function ln(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function hn(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(dn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function dn(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const fn=-1;class pn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function mn(t,e,n){const r=pe(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];gn(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function gn(t){return 64===t.charCodeAt(0)}function yn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||vn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function vn(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function _n(t){return t!==fn}function wn(t){return 32767&t}function bn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let kn=!0;function Cn(t){const e=kn;return kn=t,e}let xn=0;function On(t,e){const n=Tn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,En(r.data,t),En(e,null),En(r.blueprint,null));const i=Sn(t,e),s=t.injectorIndex;if(_n(i)){const t=wn(i),n=bn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function En(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Sn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return fn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return fn}function An(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vt)&&(r=n[Vt]),null==r&&(r=n[Vt]=xn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function In(t,e,n){if(n&_t.Optional)return t;ut(e,"NodeInjector")}function Dn(t,e,n,r){if(n&_t.Optional&&void 0===r&&(r=null),0==(n&(_t.Self|_t.Host))){const i=t[9],s=bt(void 0);try{return i?i.get(e,r,n&_t.Optional):kt(e,r,n&_t.Optional)}finally{bt(s)}}return In(r,e,n)}function Rn(t,e,n,r=_t.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Vt)?t[Vt]:void 0;return"number"==typeof e?e>=0?255&e:Nn:e}(n);if("function"==typeof s){if(!Ge(e,t,r))return r&_t.Host?In(i,n,r):Dn(e,n,r,i);try{const t=s(r);if(null!=t||r&_t.Optional)return t;ut(n)}finally{Xe()}}else if("number"==typeof s){let i=null,o=Tn(t,e),a=fn,c=r&_t.Host?e[16][6]:null;for((-1===o||r&_t.SkipSelf)&&(a=-1===o?Sn(t,e):e[o+8],a!==fn&&Vn(r,!1)?(i=e[1],o=wn(a),e=bn(a,e)):o=-1);-1!==o;){const t=e[1];if(Fn(s,o,t.data)){const t=jn(o,e,n,i,r,c);if(t!==Mn)return t}a=e[o+8],a!==fn&&Vn(r,e[1].data[o+8]===c)&&Fn(s,o,e)?(i=t,o=wn(a),e=bn(a,e)):o=-1}}}return Dn(e,n,r,i)}const Mn={};function Nn(){return new $n(Re(),Ae())}function jn(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],c=Pn(a,o,n,null==r?ne(a)&&kn:r!=o&&0!=(3&a.type),i&_t.Host&&s===a);return null!==c?Ln(e,o,c,a):Mn}function Pn(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,u=s>>20,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=o[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=o[c];if(t&&ie(t)&&t.type===n)return c}return null}function Ln(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof pn){const o=i;o.resolving&&function(t,e){throw new ot("200",`Circular dependency in DI detected for ${t}`)}(ct(s[n]));const a=Cn(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?bt(o.injectImpl):null;Ge(t,r,_t.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=ce(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==c&&bt(c),Cn(a),o.resolving=!1,Xe()}}return i}function Fn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Vn(t,e){return!(t&_t.Self||t&_t.Host&&e)}class $n{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Rn(this._tNode,this._lView,t,void 0,e)}}const qn="__parameters__";function Hn(t,e,n){return Ct(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(qn)?t[qn]:Object.defineProperty(t,qn,{value:[]})[qn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Bn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=lt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function zn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),zn(r,e)):e!==t&&e.push(r)}return e}function Zn(t,e){t.forEach(t=>Array.isArray(t)?Zn(t,e):e(t))}function Un(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function Kn(t,e,n){let r=Yn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Jn(t,e){const n=Yn(t,e);if(n>=0)return t[1|n]}function Yn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const Qn={},Xn=/\n/gm,tr="__source",er=tt({provide:String,useValue:tt});let nr;function rr(t){const e=nr;return nr=t,e}function ir(t,e=_t.Default){if(void 0===nr)throw new Error("inject() must be called from an injection context");return null===nr?kt(t,void 0,e):nr.get(t,e&_t.Optional?null:void 0,e)}function sr(t,e=_t.Default){return(wt||ir)(st(t),e)}function or(t){const e=[];for(let n=0;n<t.length;n++){const r=st(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=_t.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(sr(t,n))}else e.push(sr(r))}return e}function ar(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const cr=ar(Hn("Inject",t=>({token:t})),-1),ur=ar(Hn("Optional"),8),lr=ar(Hn("SkipSelf"),4);function hr(t){return t instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}function dr(t,e){t.__ngContext__=e}function fr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function pr(t){return t.ngDebugContext}function mr(t){return t.ngOriginalError}function gr(t,...e){t.error(...e)}class yr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||gr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?pr(t)?pr(t):this._findContext(mr(t)):null}_findOriginalError(t){let e=mr(t);for(;e&&mr(e);)e=mr(e);return e}}const vr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function _r(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function br(t,e){return(void 0)(t,e)}function kr(t){const e=t[3];return te(e)?e[3]:e}function Cr(t){return Or(t[13])}function xr(t){return Or(t[4])}function Or(t){for(;null!==t&&!te(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let s,o=!1;te(r)?s=r:Xt(r)&&(o=!0,r=r[0]);const a=ge(r);0===t&&null!==n?null==i?Nr(e,n,a):Mr(e,n,a,i||null,!0):1===t&&null!==n?Mr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){pe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==ge(n)&&Er(e,t,r,s,i);for(let o=Qt;o<n.length;o++){const i=n[o];zr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Tr(t,e,n){return pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Sr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ee(i,-1)),n.splice(r,1)}function Ar(t,e){if(t.length<=Qt)return;const n=Qt+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Sr(s,r),e>0&&(t[n-1][4]=r[4]);const o=Wn(t,Qt+e);zr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];pe(n)&&n.destroyNode&&zr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Dr(t[1],t);for(;e;){let n=null;if(Xt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Xt(e)&&Dr(e[1],e),e=e[3];null===e&&(e=t),Xt(e)&&Dr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Dr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof pn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):ge(e[t]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&pe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&te(e[3])){n!==e[3]&&Sr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Rr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===Ot.None||e===Ot.Emulated)return null}return ve(r,n)}(t,e.parent,n)}function Mr(t,e,n,r,i){pe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Nr(t,e,n){pe(t)?t.appendChild(e,n):e.appendChild(n)}function jr(t,e,n,r,i){null!==r?Mr(t,e,n,r,i):Nr(t,e,n)}function Pr(t,e){return pe(t)?t.parentNode(e):e.parentNode}function Lr(t,e,n){return Fr(t,e,n)}let Fr=function(t,e,n){return 40&t.type?ve(t,n):null};function Vr(t,e,n,r){const i=Rr(t,r,e),s=e[11],o=Lr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)jr(s,i,n[a],o,!1);else jr(s,i,n,o,!1)}function $r(t,e){if(null!==e){const n=e.type;if(3&n)return ve(e,t);if(4&n)return Hr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return $r(t,n);{const n=t[e.index];return te(n)?Hr(-1,n):ge(n)}}if(32&n)return br(e,t)()||ge(t[e.index]);{const n=qr(t,e);return null!==n?Array.isArray(n)?n[0]:$r(kr(t[16]),n):$r(t,e.next)}}return null}function qr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Hr(t,e){const n=Qt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return $r(t,r)}return e[7]}function Br(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&dr(ge(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Br(t,e,n.child,r,i,s,!1),Er(e,t,i,a,s);else if(32&c){const o=br(n,r);let c;for(;c=o();)Er(e,t,i,c,s);Er(e,t,i,a,s)}else 16&c?Zr(t,e,r,n,i,s):Er(e,t,i,a,s);n=o?n.projectionNext:n.next}}function zr(t,e,n,r,i,s){Br(n,r,t.firstChild,e,i,s,!1)}function Zr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Er(e,t,i,a[c],s);else Br(t,e,a,o[3],i,s,!0)}function Ur(t,e,n){pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Wr(t,e,n){pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Gr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function Jr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Gr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Yr(t){return 4===t.type&&t.value!==Kr}function Qr(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function Xr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let n=0;n<t.length;n++)if(3===(e=t[n])||4===e||6===e)return n;var e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Qr(t,c,n)||""===c&&1===e.length){if(ti(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!Jr(t.attrs,u,n)){if(ti(r))return!1;o=!0}continue}const l=ei(8&r?"class":c,i,Yr(t),n);if(-1===l){if(ti(r))return!1;o=!0;continue}if(""!==u){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Gr(e,u,0)||2&r&&u!==t){if(ti(r))return!1;o=!0}}}}else{if(!o&&!ti(r)&&!ti(c))return!1;if(o&&ti(c))continue;o=!1,r=c|1&r}}return ti(r)||o}function ti(t){return 0==(1&t)}function ei(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ni(t,e,n=!1){for(let r=0;r<e.length;r++)if(Xr(t,e[r],n))return!0;return!1}function ri(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ii(t,e){return t?":not("+e.trim()+")":e}function si(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ti(o)||(e+=ii(s,i),i=""),r=o,s=s||!ti(r);n++}return""!==i&&(e+=ii(s,i)),e}const oi={};function ai(t){ci(Ie(),Ae(),en()+t,Le())}function ci(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&cn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&un(e,r,0,n)}nn(n)}function ui(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function hi(t){return 2|t}function di(t){return(131068&t)>>2}function fi(t,e){return-131069&t|e<<2}function pi(t){return 1|t}function mi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];Ue(i),n.contentQueries(2,e[s],s)}}}function gi(t,e,n,r,i,s,o,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Oe(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function yi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Me(),o=je(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Te.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Ne(s,!0),s}function vi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function _i(t,e,n){Ke(e);try{const r=t.viewQuery;null!==r&&Ki(1,r,n);const i=t.template;null!==i&&ki(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&mi(t,e),t.staticViewQueries&&Ki(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)zi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,tn()}}function wi(t,e,n,r){const i=e[2];if(256==(256&i))return;Ke(e);const s=Le();try{Oe(e),Te.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ki(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&cn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&un(e,n,0,null),ln(e,0)}if(function(t){for(let e=Cr(t);null!==e;e=xr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ee(r,1),n[2]|=1024}}}(e),function(t){for(let e=Cr(t);null!==e;e=xr(e))for(let t=Qt;t<e.length;t++){const n=e[t],r=n[1];Ce(n)&&wi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&mi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&cn(e,n)}else{const n=t.contentHooks;null!==n&&un(e,n,1),ln(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)nn(~r);else{const i=r,s=n[++t],o=n[++t];Be(s,i),o(2,e[i])}}}finally{nn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Hi(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&Ki(2,c,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&cn(e,n)}else{const n=t.viewHooks;null!==n&&un(e,n,2),ln(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ee(e[3],-1))}finally{tn()}}function bi(t,e,n,r){const i=e[10],s=!Le(),o=ke(e);try{s&&!o&&i.begin&&i.begin(),o&&_i(t,e,r),wi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function ki(t,e,n,r,i){const s=en(),o=2&r;try{nn(-1),o&&e.length>Yt&&ci(t,e,Yt,Le()),n(r,i)}finally{nn(s)}}function Ci(t,e,n){if(ee(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function xi(t,e,n){Se()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||On(n,e),dr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=ie(r);s&&Fi(e,n,r);const c=Ln(e,t,a,n);dr(c,e),null!==o&&Vi(0,a-i,c,r,0,o),s&&(be(n.index,e)[8]=c)}}(t,e,n,ve(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Te.lFrame.currentDirectiveIndex;try{nn(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ze(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Mi(r,i)}}finally{nn(-1),ze(o)}}(t,e,n))}function Oi(t,e,n=ve){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Ei(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ti(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ti(t,e,n,r,i,s,o,a,c,u){const l=Yt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:oi);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Si(t,e,n,r){const i=Yi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Qi(t).push(r,i.length-1))}function Ai(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ii(t,e,n,r,i,s,o,a){const c=ve(e,n);let u,l=e.inputs;var h;!a&&null!=l&&(u=l[r])?(ts(t,n,u,r,i),ne(e)&&function(t,e){const n=be(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,pe(s)?s.setProperty(c,r,i):gn(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Di(t,e,n,r){let i=!1;if(Se()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ni(n,o.selectors,!1)&&(i||(i=[]),An(On(n,e),t,o.type),ie(o)?(Ni(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Pi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,c=vi(t,e,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=yn(n.mergedAttrs,u.hostAttrs),Li(t,n,e,c,u),ji(c,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,u=null===i||Yr(e)?null:$i(n,i);s.push(u),o=Ai(n,c,o),a=Ai(t.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ot("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=yn(n.mergedAttrs,n.attrs),i}function Ri(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Mi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ni(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ji(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ie(e)&&(n[""]=t)}}function Pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Li(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=se(i.type)),o=new pn(s,ie(i),null);t.blueprint[r]=o,n[r]=o,Ri(t,e,0,r,vi(t,n,i.hostVars,oi),i)}function Fi(t,e,n){const r=ve(e,t),i=Ei(n),s=t[10],o=Zi(t,gi(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Vi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function $i(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function qi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Hi(t,e){const n=be(e,t);if(Ce(n)){const t=n[1];80&n[2]?wi(t,n,t.template,n[8]):n[5]>0&&Bi(n)}}function Bi(t){for(let n=Cr(t);null!==n;n=xr(n))for(let t=Qt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];wi(t,e,t.template,e[8])}else e[5]>0&&Bi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=be(e[n],t);Ce(r)&&r[5]>0&&Bi(r)}}function zi(t,e){const n=be(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),_i(r,n,n[8])}function Zi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=kr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Wi(t,e,n){const r=e[10];r.begin&&r.begin();try{wi(t,e,t.template,n)}catch(i){throw Xi(e,i),i}finally{r.end&&r.end()}}function Gi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=fr(n),i=r[1];bi(i,r,i.template,n)}}(t[8])}function Ki(t,e,n){Ue(0),e(t,n)}const Ji=(()=>Promise.resolve(null))();function Yi(t){return t[7]||(t[7]=[])}function Qi(t){return t.cleanup||(t.cleanup=[])}function Xi(t,e){const n=t[9],r=n?n.get(yr,null):null;r&&r.handleError(e)}function ts(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=e[o],u=t.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function es(t,e,n){const r=ye(e,t);!function(t,e,n){pe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function ns(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=nt(i,t):2==s&&(r=nt(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const rs=new Bn("INJECTOR",-1);class is{get(t,e=Qn){if(e===Qn){const e=new Error(`NullInjectorError: No provider for ${et(t)}!`);throw e.name="NullInjectorError",e}return e}}const ss=new Bn("Set Injector scope."),os={},as={};let cs;function us(){return void 0===cs&&(cs=new is),cs}function ls(t,e=null,n=null,r){return new hs(t,n,e||us(),r)}class hs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Zn(e,n=>this.processProvider(n,t,e)),Zn([t],t=>this.processInjectorType(t,[],i)),this.records.set(rs,fs(void 0,this));const s=this.records.get(ss);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:et(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Qn,n=_t.Default){this.assertNotDestroyed();const r=rr(this);try{if(!(n&_t.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Bn)&&dt(t);e=n&&this.injectableDefInScope(n)?fs(ds(t),os):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&_t.Self?us():this.parent).get(t,e=n&_t.Optional&&e===Qn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(et(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[tr]&&i.unshift(e[tr]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=et(e);if(Array.isArray(e))i=e.map(et).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):et(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Xn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{rr(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(et(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=st(t)))return!1;let r=pt(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=pt(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{Zn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Zn(r,t=>this.processProvider(t,n,r||Rt))}}this.injectorDefTypes.add(s);const a=se(s)||(()=>new s);this.records.set(s,fs(a,os));const c=r.providers;if(null!=c&&!o){const e=t;Zn(c,t=>this.processProvider(t,e,c))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ms(t=st(t))?t:st(t&&t.provide);const i=function(t,e,n){return ps(t)?fs(void 0,t.useValue):fs(function(t,e,n){let r;if(ms(t)){const e=st(t);return se(e)||ds(e)}if(ps(t))r=()=>st(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...or(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>sr(st(t.useExisting));else{const e=st(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return se(e)||ds(e);r=()=>new e(...or(t.deps))}var i;return r}(t),os)}(t);if(ms(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=fs(void 0,os,!0),e.factory=()=>or(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===os&&(e.value=as,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=st(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ds(t){const e=dt(t),n=null!==e?e.factory:se(t);if(null!==n)return n;if(t instanceof Bn)throw new Error(`Token ${et(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Gn(e,"?");throw new Error(`Can't resolve all parameters for ${et(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[yt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ps(t){return null!==t&&"object"==typeof t&&er in t}function ms(t){return"function"==typeof t}const gs=function(t,e,n){return function(t,e=null,n=null,r){const i=ls(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ys=(()=>{class t{static create(t,e){return Array.isArray(t)?gs(t,e,""):gs(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Qn,t.NULL=new is,t.\u0275prov=lt({token:t,providedIn:"any",factory:()=>sr(rs)}),t.__NG_ELEMENT_ID__=-1,t})();function vs(t,e){an(fr(t)[1],Re())}let _s=null;function ws(){if(!_s){const t=It.Symbol;if(t&&t.iterator)_s=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_s=n)}}}return _s}class bs{constructor(t){this.wrapped=t}static wrap(t){return new bs(t)}static unwrap(t){return bs.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof bs}}function ks(t){return!!Cs(t)&&(Array.isArray(t)||!(t instanceof Map)&&ws()in t)}function Cs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Os(t,e,n,r){const i=xs(t,e,n);return xs(t,e+1,r)||i}function Es(t,e,n,r){const i=Ae();return xs(i,qe(),e)&&(Ie(),function(t,e,n,r,i,s){const o=ve(t,e);!function(t,e,n,r,i,s,o){if(null==s)pe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?at(s):o(s,r||"",i);pe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(rn(),i,t,e,n,r)),Es}function Ts(t,e,n,r){return xs(t,qe(),n)?e+at(n)+r:oi}function Ss(t,e,n,r,i,s,o,a){const c=Ae(),u=Ie(),l=t+Yt,h=u.firstCreatePass?function(t,e,n,r,i,s,o,a,c){const u=e.consts,l=yi(e,t,4,o||null,xe(u,a));Di(e,n,l,xe(u,c)),an(e,l);const h=l.tViews=Ti(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,s,o):u.data[l];Ne(h,!1);const d=c[11].createComment("");Vr(u,c,d,h),dr(d,c),Zi(c,c[l]=qi(d,c,d,h)),re(h)&&xi(u,c,h),null!=o&&Oi(c,h,a)}function As(t){return we(Te.lFrame.contextLView,Yt+t)}function Is(t,e=_t.Default){const n=Ae();return null===n?sr(t,e):Rn(Re(),n,st(t),e)}function Ds(t,e,n){const r=Ae();return xs(r,qe(),e)&&Ii(Ie(),rn(),r,t,e,r[11],n,!1),Ds}function Rs(t,e,n,r,i){const s=i?"class":"style";ts(t,n,e.inputs[s],s,r)}function Ms(t,e,n,r){const i=Ae(),s=Ie(),o=Yt+t,a=i[11],c=i[o]=Tr(a,e,Te.lFrame.currentNamespace),u=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,c=yi(e,t,2,i,xe(a,s));return Di(e,n,c,xe(a,o)),null!==c.attrs&&ns(c,c.attrs,!1),null!==c.mergedAttrs&&ns(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,n,r):s.data[o];Ne(u,!0);const l=u.mergedAttrs;null!==l&&mn(a,c,l);const h=u.classes;null!==h&&Wr(a,c,h);const d=u.styles;null!==d&&Ur(a,c,d),64!=(64&u.flags)&&Vr(s,i,c,u),0===Te.lFrame.elementDepthCount&&dr(c,i),Te.lFrame.elementDepthCount++,re(u)&&(xi(s,i,u),Ci(s,u,i)),null!==r&&Oi(i,u)}function Ns(){let t=Re();je()?Pe():(t=t.parent,Ne(t,!1));const e=t;Te.lFrame.elementDepthCount--;const n=Ie();n.firstCreatePass&&(an(n,t),ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Rs(n,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Rs(n,e,Ae(),e.stylesWithoutHost,!1)}function js(t,e,n,r){Ms(t,e,n,r),Ns()}function Ps(t,e,n){const r=Ae(),i=Ie(),s=t+Yt,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=xe(s,r),a=yi(e,t,8,"ng-container",o);return null!==o&&ns(a,o,!0),Di(e,n,a,xe(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Ne(o,!0);const a=r[s]=r[11].createComment("");Vr(i,r,a,o),dr(a,r),re(o)&&(xi(i,r,o),Ci(i,o,r)),null!=n&&Oi(r,o)}function Ls(){let t=Re();const e=Ie();je()?Pe():(t=t.parent,Ne(t,!1)),e.firstCreatePass&&(an(e,t),ee(t)&&e.queries.elementEnd(t))}function Fs(t,e,n){Ps(t,e,n),Ls()}function Vs(){return Ae()}function $s(t){return!!t&&"function"==typeof t.then}function qs(t,e,n,r){const i=Ae(),s=Ie(),o=Re();return function(t,e,n,r,i,s,o,a){const c=re(r),u=t.firstCreatePass&&Qi(t),l=Yi(e);let h=!0;if(3&r.type||a){const d=ve(r,e),f=a?a(d):d,p=l.length,m=a?t=>a(ge(t[r.index])):r.index;if(pe(n)){let o=null;if(!a&&c&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Bs(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),u&&u.push(i,m,p,p+1)}}else s=Bs(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),u&&u.push(i,m,p,o)}else s=Bs(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),qs}function Hs(t,e,n,r){try{return!1!==n(r)}catch(i){return Xi(t,i),!1}}function Bs(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?be(t.index,e):e;0==(32&e[2])&&Ui(o);let a=Hs(e,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=Hs(e,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function zs(t=1){return function(t){return(Te.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Te.lFrame.contextLView))[8]}(t)}function Zs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?ni(t,s,!0):ri(r,s))return i}else n=i}return n}function Us(t){const e=Ae()[16][6];if(!e.projection){const n=e.projection=Gn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Zs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ws(t,e=0,n){const r=Ae(),i=Ie(),s=yi(i,Yt+t,16,null,n||null);null===s.projection&&(s.projection=e),Pe(),64!=(64&s.flags)&&function(t,e,n){Zr(e[11],0,e,n,Rr(t,n,e),Lr(n.parent||e[6],n,e))}(i,r,s)}function Gs(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?li(s):di(s),c=!1;for(;0!==a&&(!1===c||o);){const n=t[a+1];Ks(t[a],e)&&(c=!0,t[a+1]=r?pi(n):hi(n)),a=r?li(n):di(n)}c&&(t[n+1]=r?hi(s):pi(s))}function Ks(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Yn(t,e)>=0}const Js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ys(t){return t.substring(Js.key,Js.keyEnd)}function Qs(t,e){const n=Js.textEnd;return n===e?-1:(e=Js.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Js.key=e,n),Xs(t,e,n))}function Xs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function to(t,e){return function(t,e,n,r){const i=Ae(),s=Ie(),o=He(2);s.firstUpdatePass&&so(s,t,o,true),e!==oi&&xs(i,o,e)&&co(s,s.data[en()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=et(hr(t))),t}(e),true,o)}(t,e),to}function eo(t){ro(Kn,no,t,!0)}function no(t,e){for(let n=function(t){return function(t){Js.key=0,Js.keyEnd=0,Js.value=0,Js.valueEnd=0,Js.textEnd=t.length}(t),Qs(t,Xs(t,0,Js.textEnd))}(e);n>=0;n=Qs(e,n))Kn(t,Ys(e),!0)}function ro(t,e,n,r){const i=Ie(),s=He(2);i.firstUpdatePass&&so(i,null,s,r);const o=Ae();if(n!==oi&&xs(o,s,n)){const a=i.data[en()];if(ho(a,r)&&!io(i,s)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=nt(t,n||"")),Rs(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===oi&&(i=Rt);let c=0,u=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=c<i.length?i[c+1]:void 0,f=u<s.length?s[u+1]:void 0;let p,m=null;l===h?(c+=2,u+=2,d!==f&&(m=h,p=f)):null===h||null!==l&&l<h?(c+=2,m=l):(u+=2,m=h,p=f),null!==m&&co(t,e,n,r,m,p,o,a),l=c<i.length?i[c]:null,h=u<s.length?s[u]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return Rt;const r=[],i=hr(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}function io(t,e){return e>=t.expandoStartIndex}function so(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[en()],o=io(t,n);ho(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Te.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ao(n=oo(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=oo(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==di(r))return t[li(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=oo(null,t,e,n[1],r),n=ao(n,e.attrs,r),function(t,e,n,r){t[li(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ao(r,t[s].hostAttrs,n);return ao(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=li(o),c=di(o);t[r]=n;let u,l=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||Yn(t,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const e=li(t[a+1]);t[r+1]=ui(e,a),0!==e&&(t[e+1]=fi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ui(a,0),0!==a&&(t[a+1]=fi(t[a+1],r)),a=r;else t[r+1]=ui(c,0),0===a?a=r:t[c+1]=fi(t[c+1],r),c=r;l&&(t[r+1]=hi(t[r+1])),Gs(t,u,r,!0),Gs(t,u,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Yn(s,e)>=0&&(n[r+1]=pi(n[r+1]))}(e,u,t,r,s),o=ui(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function oo(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=ao(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ao(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Kn(t,o,!!n||e[++s]))}return void 0===t?null:t}function co(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const c=t.data,u=c[a+1];lo(1==(1&u)?uo(c,e,n,i,di(u),o):void 0)||(lo(s)||2==(2&u)&&(s=uo(c,null,n,i,a,o)),function(t,e,n,r,i){const s=pe(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:wr.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=wr.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,ye(en(),n),i,s))}function uo(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),c=s?e[1]:e,u=null===c;let l=n[i+1];l===oi&&(l=u?Rt:void 0);let h=u?Jn(l,r):c===r?l:void 0;if(s&&!lo(h)&&(h=Jn(e,r)),lo(h)&&(a=h,o))return a;const d=t[i+1];i=o?li(d):di(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=Jn(t,r))}return a}function lo(t){return void 0!==t}function ho(t,e){return 0!=(t.flags&(e?16:32))}function fo(t,e=""){const n=Ae(),r=Ie(),i=t+Yt,s=r.firstCreatePass?yi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Vr(r,n,o,s),Ne(s,!1)}function po(t){return mo("",t,""),po}function mo(t,e,n){const r=Ae(),i=Ts(r,t,e,n);return i!==oi&&es(r,en(),i),mo}function go(t,e,n,r,i){const s=Ae(),o=function(t,e,n,r,i,s){const o=Os(t,$e(),n,i);return He(2),o?e+at(n)+r+at(i)+s:oi}(s,t,e,n,r,i);return o!==oi&&es(s,en(),o),go}function yo(t,e,n,r,i,s,o){const a=Ae(),c=function(t,e,n,r,i,s,o,a){const c=function(t,e,n,r,i){const s=Os(t,e,n,r);return xs(t,e+2,i)||s}(t,$e(),n,i,o);return He(3),c?e+at(n)+r+at(i)+s+at(o)+a:oi}(a,t,e,n,r,i,s,o);return c!==oi&&es(a,en(),c),yo}function vo(t,e,n){ro(Kn,no,Ts(Ae(),t,e,n),!0)}function _o(t,e,n){const r=Ae();return xs(r,qe(),e)&&Ii(Ie(),rn(),r,t,e,r[11],n,!0),_o}const wo=void 0;var bo=["en",[["a","p"],["AM","PM"],wo],[["AM","PM"],wo,wo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wo,"{1} 'at' {0}",wo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ko={};function Co(t){return t in ko||(ko[t]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[t]),ko[t]}var xo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Oo="en-US";let Eo=Oo;function To(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Eo=t.toLowerCase().replace(/_/g,"-"))}class So{}class Ao{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${et(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Io=(()=>{class t{}return t.NULL=new Ao,t})();function Do(...t){}function Ro(t,e){return new No(ve(t,e))}const Mo=function(){return Ro(Re(),Ae())};let No=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Mo,t})();function jo(t){return t instanceof No?t.nativeElement:t}class Po{}let Lo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Fo(),t})();const Fo=function(){const t=Ae(),e=be(Re().index,t);return function(t){return t[11]}(Xt(e)?e:t)};let Vo=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>null}),t})();class $o{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const qo=new $o("12.0.5");class Ho{constructor(){}supports(t){return ks(t)}create(t){return new zo(t)}}const Bo=(t,e)=>e;class zo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Bo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Go(n,r,i)?e:n,o=Go(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ks(t))throw new Error(`Error trying to diff '${et(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ws()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Zo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Wo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Zo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Wo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Uo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Go(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ko{constructor(){}supports(t){return t instanceof Map||Cs(t)}create(){return new Jo}}class Jo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Cs(t)))throw new Error(`Error trying to diff '${et(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Yo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Yo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qo(){return new Xo([new Ho])}let Xo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qo()),deps:[[t,new lr,new ur]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:Qo}),t})();function ta(){return new ea([new Ko])}let ea=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ta()),deps:[[t,new lr,new ur]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:ta}),t})();function na(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(ge(s)),te(s))for(let t=Qt;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&na(e[1],e,n,r)}const o=n.type;if(8&o)na(t,e,n.child,r);else if(32&o){const t=br(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=qr(e,n);if(Array.isArray(t))r.push(...t);else{const n=kr(e[16]);na(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ra{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return na(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(te(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ar(t,n),Wn(e,n))}this._attachedToViewContainer=!1}Ir(this._lView[1],this._lView)}onDestroy(t){Si(this._lView[1],this._lView,null,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Fe(!0);try{Wi(t,e,n)}finally{Fe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,zr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ia extends ra{constructor(t){super(t),this._view=t}detectChanges(){Gi(this._view)}checkNoChanges(){!function(t){Fe(!0);try{Gi(t)}finally{Fe(!1)}}(this._view)}get context(){return null}}const sa=function(t){return function(t,e,n){if(ne(t)&&!n){const n=be(t.index,e);return new ra(n,n)}return 47&t.type?new ra(e[16],e):null}(Re(),Ae(),16==(16&t))};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=sa,t})();const aa=[new Ko],ca=new Xo([new Ho]),ua=new ea(aa),la=function(){return pa(Re(),Ae())};let ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=la,t})();const da=ha,fa=class extends da{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=gi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),_i(e,n,t),new ra(n)}};function pa(t,e){return 4&t.type?new fa(e,t,Ro(t,e)):null}class ma{}const ga=function(){return ka(Re(),Ae())};let ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=ga,t})();const va=ya,_a=class extends va{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ro(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){const t=Sn(this._hostTNode,this._hostLView);if(_n(t)){const e=bn(t,this._hostLView),n=wn(t);return new $n(e[1].data[n+8],e)}return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=wa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(ma,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(te(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new _a(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=Qt+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-Qt?(e[4]=n[i],Un(n,Qt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Hr(i,s),a=n[11],c=Pr(a,s[7]);return null!==c&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,zr(t,r,n,1,i,s)}(r,s[6],a,n,c,o),t.attachToViewContainerRef(),Un(ba(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=wa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);n&&(Wn(ba(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);return n&&null!=Wn(ba(this._lContainer),e)?new ra(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function wa(t){return t[8]}function ba(t){return t[8]||(t[8]=[])}function ka(t,e){let n;const r=e[t.index];if(te(r))n=r;else{let i;if(8&t.type)i=ge(r);else{const n=e[11];i=n.createComment("");const r=ve(t,e);Mr(n,Pr(n,r),i,function(t,e){return pe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=qi(r,e,i,t),Zi(e,n)}return new _a(n,t,e)}const Ca={};class xa extends Io{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Kt(t);return new Ta(e,this.ngModule)}}function Oa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ea=new Bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vr});class Ta extends So{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(si).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Oa(this.componentDef.inputs)}get outputs(){return Oa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ca,i);return s!==Ca||r===Ca?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Po,me),o=i.get(Vo,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(pe(t))return t.selectRootElement(e,n===Ot.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(s.createRenderer(null,this.componentDef),c,function(t){const e=t.toLowerCase();return"svg"===e?de:"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:vr,clean:Ji,playerHandler:null,flags:0},d=Ti(0,null,null,1,0,null,null,null,null,null),f=gi(null,d,h,l,null,null,s,a,o,i);let p,m;Ke(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=yi(o,20,2,"#host",null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(ns(a,c,!0),null!==t&&(mn(i,t,c),null!==a.classes&&Wr(i,t,a.classes),null!==a.styles&&Ur(i,t,a.styles)));const u=r.createRenderer(t,e),l=gi(n,Ei(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(An(On(a,n),o,e.type),Ni(o,a),Pi(a,n.length,1)),Zi(n,l),n[20]=l}(u,this.componentDef,f,s,a);if(u)if(n)mn(a,u,["ng-version",qo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!ti(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&mn(a,u,t),e&&e.length>0&&Wr(a,u,e.join(" "))}if(m=_e(d,Yt),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Re();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Li(t,r,e,vi(t,e,1,null),n));const i=Ln(e,t,r.directiveStart,r);dr(i,e);const s=ve(r,e);return s&&dr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Re();e.contentQueries(1,o,t.directiveStart)}const a=Re();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(nn(a.index),Ri(n[1],a,0,a.directiveStart,a.directiveEnd,e),Mi(e,o)),o}(t,this.componentDef,f,h,[vs]),_i(d,f,null)}finally{tn()}return new Sa(this.componentType,p,Ro(m,f),f,m)}}class Sa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ia(r),this.componentType=t}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Aa=new Map;class Ia extends ma{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xa(this);const n=Jt(t),r=t[Lt]||null;r&&To(r),this._bootstrapComponents=_r(n.bootstrap),this._r3Injector=ls(t,e,[{provide:ma,useValue:this},{provide:Io,useValue:this.componentFactoryResolver}],et(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ys.THROW_IF_NOT_FOUND,n=_t.Default){return t===ys||t===ma||t===rs?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Da extends class{}{constructor(t){super(),this.moduleType=t,null!==Jt(t)&&function(t){const e=new Set;!function t(n){const r=Jt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${et(e)} vs ${et(e.name)}`)}(i,Aa.get(i),n),Aa.set(i,n));const s=_r(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ia(this.moduleType,t)}}function Ra(t,e,n,r){return Ma(Ae(),Ve(),t,e,n,r)}function Ma(t,e,n,r,i,s){const o=e+n;return xs(t,o,i)?function(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function(t,e){const n=t[e];return n===oi?void 0:n}(t,o+1)}function Na(t){return e=>{setTimeout(t,void 0,e)}}const ja=class extends C{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,s;let o=t,a=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;o=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(i=e.error)||void 0===i?void 0:i.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(a=Na(a),o&&(o=Na(o)),c&&(c=Na(c)));const u=super.subscribe({next:o,error:a,complete:c});return t instanceof h&&t.add(u),u}};function Pa(){return this._results[ws()]()}class La{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ws(),n=La.prototype;n[e]||(n[e]=Pa)}get changes(){return this._changes||(this._changes=new ja)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=zn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Fa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Fa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Va{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Va(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ga(t,e).matches&&this.queries[e].setDirty()}}class $a{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class qa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new qa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ha{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ha(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ba(e,i)),this.matchTNodeWithReadOption(t,e,Pn(e,t,i,!1,!1))}else n===ha?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Pn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===No||r===ya||r===ha&&4&e.type)this.addMatch(e.index,-2);else{const n=Pn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ba(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function za(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ro(t,e):4&t.type?pa(t,e):null}(e,t):-2===n?function(t,e,n){return n===No?Ro(e,t):n===ha?pa(e,t):n===ya?ka(e,t):void 0}(t,e,r):Ln(t,t[1],n,e)}function Za(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:za(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Ua(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Za(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=Qt;t<o.length;t++){const e=o[t];e[17]===e[3]&&Ua(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Ua(n[1],n,i,r)}}}}}return r}function Wa(t){const e=Ae(),n=Ie(),r=Ze();Ue(r+1);const i=Ga(n,r);if(t.dirty&&ke(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Ua(n,e,r,[]):Za(n,e,i,r);t.reset(s,jo),t.notifyOnChanges()}return!0}return!1}function Ga(t,e){return t.queries.getByIndex(e)}function Ka(t,e){return pa(t,e)}const Ja=new Bn("Application Initializer");let Ya=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Do,this.reject=Do,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const e=this.appInits[r]();if($s(e))t.push(e);else if((n=e)&&"function"==typeof n.subscribe){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}var n;Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(sr(Ja,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Qa=new Bn("AppId"),Xa={provide:Qa,useFactory:function(){return`${tc()}${tc()}${tc()}`},deps:[]};function tc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ec=new Bn("Platform Initializer"),nc=new Bn("Platform ID"),rc=new Bn("appBootstrapListener");let ic=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const sc=new Bn("LocaleId"),oc=new Bn("DefaultCurrencyCode");class ac{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const cc=function(t){return new Da(t)},uc=cc,lc=function(t){return Promise.resolve(cc(t))},hc=function(t){const e=cc(t),n=_r(Jt(t).declarations).reduce((t,e)=>{const n=Kt(e);return n&&t.push(new Ta(n)),t},[]);return new ac(e,n)},dc=hc,fc=function(t){return Promise.resolve(hc(t))};let pc=(()=>{class t{constructor(){this.compileModuleSync=uc,this.compileModuleAsync=lc,this.compileModuleAndAllComponentsSync=dc,this.compileModuleAndAllComponentsAsync=fc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const mc=(()=>Promise.resolve(0))();function gc(t){"undefined"==typeof Zone?mc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class yc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ja(!1),this.onMicrotaskEmpty=new ja(!1),this.onStable=new ja(!1),this.onError=new ja(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=It.requestAnimationFrame,e=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(It,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,wc(t),t.isCheckStableRunning=!0,_c(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),wc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return bc(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),kc(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return bc(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),kc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,wc(t),_c(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,vc,Do,Do);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const vc={};function _c(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function wc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function bc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kc(t){t._nesting--,_c(t)}class Cc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ja,this.onMicrotaskEmpty=new ja,this.onStable=new ja,this.onError=new ja}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let xc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yc.assertNotInAngularZone(),gc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(sr(yc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Oc=(()=>{class t{constructor(){this._applications=new Map,Sc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Sc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class Ec{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Tc,Sc=new Ec,Ac=!0,Ic=!1;const Dc=new Bn("AllowMultipleToken");function Rc(t,e,n=[]){const r=`Platform: ${e}`,i=new Bn(r);return(e=[])=>{let s=Mc();if(!s||s.injector.get(Dc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ss,useValue:"platform"});!function(t){if(Tc&&!Tc.destroyed&&!Tc.injector.get(Dc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Tc=t.get(Nc);const e=t.get(ec,null);e&&e.forEach(t=>t())}(ys.create({providers:t,name:r}))}return function(t){const e=Mc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Mc(){return Tc&&!Tc.destroyed?Tc:null}let Nc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Cc:("zone.js"===t?void 0:t)||new yc({enableLongStackTrace:(Ic=!0,Ac),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:yc,useValue:n}];return n.run(()=>{const e=ys.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(yr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Lc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return $s(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Ya);return t.runInitializers(),t.donePromise.then(()=>(To(i.injector.get(sc,Oo)||Oo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=jc({},e);return function(t,e,n){const r=new Da(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Pc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${et(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(sr(ys))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function jc(t,e){return Array.isArray(e)?e.reduce(jc,t):Object.assign(Object.assign({},t),e)}let Pc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{yc.assertNotInAngularZone(),gc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{yc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Z(s,o.pipe(X()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof So?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ma),i=n.create(ys.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(xc,null),a=o&&i.injector.get(Oc);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Lc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(rc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(sr(yc),sr(ys),sr(yr),sr(Io),sr(Ya))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Lc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Fc=Rc(null,"core",[{provide:nc,useValue:"unknown"},{provide:Nc,deps:[ys]},{provide:Oc,deps:[]},{provide:ic,deps:[]}]),Vc=[{provide:Pc,useClass:Pc,deps:[yc,ys,yr,Io,Ya]},{provide:Ea,deps:[yc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ya,useClass:Ya,deps:[[new ur,Ja]]},{provide:pc,useClass:pc,deps:[]},Xa,{provide:Xo,useFactory:function(){return ca},deps:[]},{provide:ea,useFactory:function(){return ua},deps:[]},{provide:sc,useFactory:function(t){return To(t=t||"undefined"!=typeof $localize&&$localize.locale||Oo),t},deps:[[new cr(sc),new ur,new lr]]},{provide:oc,useValue:"USD"}];let $c=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(sr(Pc))},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({providers:Vc}),t})(),qc=null;function Hc(){return qc}const Bc=new Bn("DocumentToken");var zc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Zc{}let Uc=(()=>{class t extends Zc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Co(e);if(n)return n;const r=e.split("-")[0];if(n=Co(r),n)return n;if("en"===r)return bo;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[xo.PluralCase]}(e||this.locale)(t)){case zc.Zero:return"zero";case zc.One:return"one";case zc.Two:return"two";case zc.Few:return"few";case zc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(sr(sc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class Wc{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Wc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Kc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new Kc(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Is(ya),Is(ha),Is(Xo))},t.\u0275dir=Wt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Kc{constructor(t,e){this.record=t,this.view=e}}let Jc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Yc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Is(ya),Is(ha))},t.\u0275dir=Wt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Yc{constructor(){this.$implicit=null,this.ngIf=null}}function Qc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${et(e)}'.`)}let Xc=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(Is(ya))},t.\u0275dir=Wt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[ae]}),t})(),tu=(()=>{class t{transform(t){return JSON.stringify(t,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Gt({name:"json",type:t,pure:!1}),t})(),eu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({providers:[{provide:Zc,useClass:Uc}]}),t})();class nu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new nu,qc||(qc=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(iu=iu||document.querySelector("base"),iu?iu.getAttribute("href"):null);return null==e?null:function(t){ru=ru||document.createElement("a"),ru.setAttribute("href",t);const e=ru.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let ru,iu=null;const su=new Bn("TRANSITION_ID"),ou=[{provide:Ja,useFactory:function(t,e,n){return()=>{n.get(Ya).donePromise.then(()=>{const n=Hc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[su,Bc,ys],multi:!0}];class au{static init(){var t;t=new au,Sc=t}addToWindow(t){It.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},It.getAllAngularTestabilities=()=>t.getAllTestabilities(),It.getAllAngularRootElements=()=>t.getAllRootElements(),It.frameworkStabilizers||(It.frameworkStabilizers=[]),It.frameworkStabilizers.push(t=>{const e=It.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Hc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let cu=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const uu=new Bn("EventManagerPlugins");let lu=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(sr(uu),sr(yc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class hu{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Hc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let du=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),fu=(()=>{class t extends du{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(pu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pu))}}return t.\u0275fac=function(e){return new(e||t)(sr(Bc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function pu(t){Hc().remove(t)}const mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gu=/%COMP%/g;function yu(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?yu(t,i,n):(i=i.replace(gu,t),n.push(i))}return n}function vu(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let _u=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new wu(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ot.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new bu(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Ot.ShadowDom:return new ku(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=yu(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(sr(lu),sr(fu),sr(Qa))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class wu{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(mu[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=mu[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=mu[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(wr.DashCase|wr.Important)?t.style.setProperty(e,n,r&wr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&wr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,vu(n)):this.eventManager.addEventListener(t,e,vu(n))}}class bu extends wu{constructor(t,e,n,r){super(t),this.component=n;const i=yu(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(gu,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(gu,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ku extends wu{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=yu(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Cu=(()=>{class t extends hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(sr(Bc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const xu=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Eu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Tu={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Su=(()=>{class t extends hu{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hc().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(xu.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Eu.hasOwnProperty(e)&&(e=Eu[e]))}return Ou[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),xu.forEach(r=>{r!=n&&(0,Tu[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(sr(Bc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Au=Rc(Fc,"browser",[{provide:nc,useValue:"browser"},{provide:ec,useValue:function(){nu.makeCurrent(),au.init()},multi:!0},{provide:Bc,useFactory:function(){return function(t){fe=t}(document),document},deps:[]}]),Iu=[[],{provide:ss,useValue:"root"},{provide:yr,useFactory:function(){return new yr},deps:[]},{provide:uu,useClass:Cu,multi:!0,deps:[Bc,yc,nc]},{provide:uu,useClass:Su,multi:!0,deps:[Bc]},[],{provide:_u,useClass:_u,deps:[lu,fu,Qa]},{provide:Po,useExisting:_u},{provide:du,useExisting:fu},{provide:fu,useClass:fu,deps:[Bc]},{provide:xc,useClass:xc,deps:[yc]},{provide:lu,useClass:lu,deps:[uu,yc]},{provide:class{},useClass:cu,deps:[]},[]];let Du=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Qa,useValue:e.appId},{provide:su,useExisting:Qa},ou]}}}return t.\u0275fac=function(e){return new(e||t)(sr(t,12))},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({providers:Iu,imports:[eu,$c]}),t})();function Ru(t){return t[Math.floor(Math.random()*t.length)]}"undefined"!=typeof window&&window;const Mu="player",Nu=["power","achievement","hedonism","stimulation","self-direction","universalism","benevolence","conformity-tradition","security"],ju="power",Pu="security",Lu="conformity-tradition",Fu="universalism",Vu="self-direction",$u="stimulation";function qu(t){return Nu.indexOf(t)}function Hu(t,e=Nu){const n=Math.round(t+.5*e.length);return n<0?n+e.length:n>=e.length?n-e.length:n}function Bu(t){const e=t.affinities.filter(e=>e.name!==t.name),n=e.find(t=>t.name===Mu).affinity;return e.filter(t=>t.name!==Mu).reduce((e,n)=>{var r;return e+((null===(r=t.relationshipEffects.find(t=>t.name===n.name))||void 0===r?void 0:r.effect)||0)},n)}new Map;let zu=(()=>{class t{constructor(){this._affTableData=new Map}static genTableKey(t,e){return`${t}.${e}`}static genPartnerKey(t,e,n){return`${t}.${e}.${n}`}hasTableData(t,e){return Boolean(this.retrieveTable(t,e))}generateAffinityDisplayData(e,n){var r;if(this.hasTableData(e.name,n))return this.retrieveTable(e.name,n);const i=e.affinities.filter(t=>t.name!==Mu),s=null===(r=e.affinities.find(t=>t.name===Mu))||void 0===r?void 0:r.affinity,o={affinity:new Map,rawAffinity:new Map,relationshipEffect:new Map,rawRelationshipEffect:new Map,rebellious:new Map,rawRebelliousness:new Map},a=t.genPartnerKey(e.name,Mu,n);o.rawAffinity.set(a,s),o.affinity.set(a,this.getAffinityVerb(s)),null==i||i.forEach(r=>{var i;const a=r.name===Mu,c=t.genPartnerKey(e.name,r.name,n),u=a?this.getAffinityVerb(r.affinity):this.getAffinityNoun(r.affinity);o.affinity.set(c,u),o.rawAffinity.set(c,r.affinity);const l=null===(i=e.relationshipEffects.find(t=>t.name===r.name))||void 0===i?void 0:i.effect;o.rawRelationshipEffect.set(c,l),o.relationshipEffect.set(c,this.getAffinityEffectString(s,l))}),o.rebellious.set(e.name,e.rebellious),o.rawRebelliousness.set(e.name,function(t){return-Bu(t)}(e));const c=t.genTableKey(e.name,n);return this._affTableData.set(c,o),o}getAffinityData(e,n,r){var i;const s=t.genPartnerKey(e,n,r);return null===(i=this.retrieveTable(e,r))||void 0===i?void 0:i.affinity.get(s)}getRawAffinity(e,n,r){var i;const s=t.genPartnerKey(e,n,r);return null===(i=this.retrieveTable(e,r))||void 0===i?void 0:i.rawAffinity.get(s)}getRelEffectData(e,n,r){var i;const s=t.genPartnerKey(e,n,r);return null===(i=this.retrieveTable(e,r))||void 0===i?void 0:i.relationshipEffect.get(s)}getRawRelEffectData(e,n,r){var i;const s=t.genPartnerKey(e,n,r);return null===(i=this.retrieveTable(e,r))||void 0===i?void 0:i.rawRelationshipEffect.get(s)}getIfRebellious(t,e){var n;return null===(n=this.retrieveTable(t,e))||void 0===n?void 0:n.rebellious.get(t)}getRawRebelliousness(t,e){var n;return null===(n=this.retrieveTable(t,e))||void 0===n?void 0:n.rawRebelliousness.get(t)}retrieveTable(e,n){const r=t.genTableKey(e,n);return this._affTableData.get(r)}getAffinityVerb(t){const e=[];return t<-3?e.push("hated","despised"):t<0?e.push("disliked","distrusted"):0===t?e.push("was uncertain about"):t<3?e.push("trusted","approved of"):t<=5&&e.push("adored","revered"),Ru(e)}getAffinityNoun(t){const e=[];return t<-3?e.push("hatred for","disgust of"):t<0?e.push("distrust of","misgivings of"):0==t?e.push("ambivalence toward"):t<3?e.push("confidence in","respect for"):e.push("adoration of","deference for"),Ru(e)}getAffinityEffectString(t,e){const n=[],r=t+e;return n.push(t<0?r<t?"worsened their opinion.":r>t?"improved their opinion.":"made no effect.":t>0?r>t?"strengthened their opinion.":r<t?"soured their opinion.":"made no effect.":r>0?"nudged them toward a positive opinion.":r<0?"nudged them toward a negative opinion.":"made no effect."),Ru(n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Zu=function(t){return t.INIT="init",t.END="end",t.PRE_DECISION="pre_decision",t.POST_DECISION="post_decision",t.ADVISOR_STATE="advisor_state",t}({});let Uu=(()=>{class t{constructor(){this.$gameLog=new ja}logData(t){this.$gameLog.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Wu(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function Gu(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(t){Wu(s,r,i,o,a,"next",t)}function a(t){Wu(s,r,i,o,a,"throw",t)}o(void 0)})}}const Ku={advisorCount:1,playerCharacterKey:"player",maxAffinity:5,minAffinity:-5,initialAffinityTowardPlayer:0},Ju="player";var Yu=function(t){return t.PROMOTE="promotes",t.HARM="harms",t}({});function Qu(t,e){return[...t.promotes].reduce((t,n)=>t+Xu(Yu.PROMOTE,n,e),0)+[...t.harms].reduce((t,n)=>t+Xu(Yu.HARM,n,e),0)}function Xu(t,e,n){const r=n.cherishes.includes(e),i=n.despises.includes(e);return r||i?r?t===Yu.HARM?-1:1:t===Yu.PROMOTE?-1:1:0}new Map;const tl=new Map;function el(t){const e=[],n=(t,e)=>t<0?e+t:t>=e?t-e:t,r=()=>Math.random()<.5?-1:1,i=["Dmitri","Ivan","Alyosha","Katerina","Varvara","Nastasya"];for(let o=0;o<t.advisorCount;o+=1){let t=null;t=n(o>0?Math.round(e[o-1].cherishes[0]+.33*Nu.length):(s=Nu.length,Math.round(Math.random()*s)),Nu.length);const a=n(t+r(),Nu.length),c=n(Hu(t),Nu.length),u=n(c+r(),Nu.length),l=Ru(i),h=i.findIndex(t=>t===l);i.splice(h,1);const d={name:l,cherishes:[t,a],despises:[c,u],affinities:[],rebellious:!1,relationshipEffects:[],rebellionUtility:0};e.push(d),tl.set(d.name,d)}var s;return e}new Map;const nl=Nu.map((t,e)=>e);function rl(t){return nl.splice(nl.findIndex(e=>e===t),1),t}new Map;const il=new Map([["defaultGenerator",el],["experimentalGeneratorControl",function(t){const e=el(Object.assign(Object.assign({},t),{advisorCount:1}))[0];return e.cherishes=[rl(Ru(nl)),rl(Ru(nl)),rl(Ru(nl))],e.despises=[rl(Ru(nl)),rl(Ru(nl)),rl(Ru(nl))],[e]}],["experimentalGeneratorExp",function(t){const e=el(Object.assign(Object.assign({},t),{advisorCount:1}))[0],n=(t,e)=>t<0?e+t:t>=e?t-e:t,r=Ru(Nu.map((t,e)=>e)),i=Hu(r,Nu);return e.cherishes=[r,n(r+1,Nu.length),n(r-1,Nu.length)],e.despises=[i,n(i+1,Nu.length),n(i-1,Nu.length)],[e]}]]);var sl,ol=n(601),al=n.n(ol),cl=n(283),ul=n.n(cl),ll=new Uint8Array(16);function hl(){if(!sl&&!(sl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sl(ll)}const dl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,fl=function(t){return"string"==typeof t&&dl.test(t)};for(var pl=[],ml=0;ml<256;++ml)pl.push((ml+256).toString(16).substr(1));const gl=function(t,e,n){var r=(t=t||{}).random||(t.rng||hl)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(pl[t[e+0]]+pl[t[e+1]]+pl[t[e+2]]+pl[t[e+3]]+"-"+pl[t[e+4]]+pl[t[e+5]]+"-"+pl[t[e+6]]+pl[t[e+7]]+"-"+pl[t[e+8]]+pl[t[e+9]]+"-"+pl[t[e+10]]+pl[t[e+11]]+pl[t[e+12]]+pl[t[e+13]]+pl[t[e+14]]+pl[t[e+15]]).toLowerCase();if(!fl(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var yl,vl,_l=n(434),wl=n(68),bl=n.n(wl);function kl(t){return"$"+t}function Cl(t){return t.substring(1)}function xl(){this._store={}}function Ol(t){if(this._store=new xl,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}xl.prototype.get=function(t){var e=kl(t);return this._store[e]},xl.prototype.set=function(t,e){var n=kl(t);return this._store[n]=e,!0},xl.prototype.has=function(t){return kl(t)in this._store},xl.prototype.keys=function(){return Object.keys(this._store).map(t=>Cl(t))},xl.prototype.delete=function(t){var e=kl(t),n=e in this._store;return delete this._store[e],n},xl.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var i=e[n];t(this._store[i],i=Cl(i))}},Object.defineProperty(xl.prototype,"size",{get:function(){return Object.keys(this._store).length}}),Ol.prototype.add=function(t){return this._store.set(t,!0)},Ol.prototype.has=function(t){return this._store.has(t)},Ol.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(Ol.prototype,"size",{get:function(){return this._store.size}}),function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(yl=Set,vl=Map):(yl=Ol,vl=xl);var El,Tl=Function.prototype.toString,Sl=Tl.call(Object);function Al(t){var e,n,r;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=Al(t[n]);return e}if(t instanceof Date&&isFinite(t))return t.toISOString();if(function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}(t))return function(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}(t);if(!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&Tl.call(n)==Sl}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Al(t[n]);void 0!==i&&(e[n]=i)}return e}function Il(t){var e=!1;return function(...n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}}function Dl(t){return function(...e){e=Al(e);var n=this,r="function"==typeof e[e.length-1]&&e.pop(),i=new Promise(function(r,i){var s;try{var o=Il(function(t,e){t?i(t):r(e)});e.push(o),(s=t.apply(n,e))&&"function"==typeof s.then&&r(s)}catch(a){i(a)}});return r&&i.then(function(t){r(null,t)},r),i}}function Rl(t,e){return Dl(function(...n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function(t,e,n){if(t.constructor.listeners("debug").length){for(var r=["api",t.name,e],i=0;i<n.length-1;i++)r.push(n[i]);t.constructor.emit("debug",r);var s=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",t.name,e];i=i.concat(n?["error",n]:["success",r]),t.constructor.emit("debug",i),s(n,r)}}}(r,t,n),this.taskqueue.isReady?e.apply(this,n):new Promise(function(e,i){r.taskqueue.addTask(function(s){s?i(s):e(r[t].apply(r,n))})})})}function Ml(t,e){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r];s in t&&(n[s]=t[s])}return n}function Nl(t){return t}function jl(t){return[{ok:t}]}function Pl(t,e,n){var r=e.docs,i=new vl;r.forEach(function(t){i.has(t.id)?i.get(t.id).push(t):i.set(t.id,[t])});var s=i.size,o=0,a=new Array(s),c=[];i.forEach(function(t,e){c.push(e)});var u=0;!function r(){if(!(u>=c.length)){var l=Math.min(u+6,c.length),h=c.slice(u,l);!function(c,u){c.forEach(function(c,l){var h=u+l,d=i.get(c),f=Ml(d[0],["atts_since","attachments"]);f.open_revs=d.map(function(t){return t.rev}),f.open_revs=f.open_revs.filter(Nl);var p=Nl;0===f.open_revs.length&&(delete f.open_revs,p=jl),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in e&&(f[t]=e[t])}),t.get(c,f,function(t,e){var i,u;i=t?[{error:t}]:p(e),a[h]={id:c,docs:i},++o===s&&(u=[],a.forEach(function(t){t.docs.forEach(function(e){u.push({id:t.id,docs:[e]})})}),n(null,{results:u})),r()})})}(h,u),u+=h.length}}()}try{localStorage.setItem("_pouch_check_localstorage",1),El=!!localStorage.getItem("_pouch_check_localstorage")}catch(ck){El=!1}function Ll(){return El}class Fl extends(bl()){constructor(){super(),this._listeners={},Ll()&&addEventListener("storage",t=>{this.emit(t.key)})}addListener(t,e,n,r){if(!this._listeners[e]){var i=!1,s=this;this._listeners[e]=o,this.on(t,o)}function o(){if(s._listeners[e])if(i)i="waiting";else{i=!0;var t=Ml(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(t).on("change",function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))}).on("complete",function(){"waiting"===i&&al()(o),i=!1}).on("error",function(){i=!1})}}}removeListener(t,e){e in this._listeners&&(super.removeListener(t,this._listeners[e]),delete this._listeners[e])}notifyLocalWindows(t){Ll()&&(localStorage[t]="a"===localStorage[t]?"b":"a")}notify(t){this.emit(t),this.notifyLocalWindows(t)}}function Vl(t){if("undefined"!=typeof console&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function $l(t){var e=0;return t||(e=2e3),function(t,e){var n=6e5;return t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,e>n&&(t=3e5,e=n),~~((e-t)*Math.random()+t)}(t,e)}function ql(t,e){Vl("info","The above "+t+" is totally normal. "+e)}var Hl="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};class Bl extends Error{constructor(t,e,n){super(),this.status=t,this.name=e,this.message=n,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}}new Bl(401,"unauthorized","Name or password is incorrect.");var zl=new Bl(400,"bad_request","Missing JSON list of 'docs'"),Zl=new Bl(404,"not_found","missing"),Ul=new Bl(409,"conflict","Document update conflict"),Wl=new Bl(400,"bad_request","_id field must contain a string"),Gl=new Bl(412,"missing_id","_id is required for puts"),Kl=new Bl(400,"bad_request","Only reserved document ids may start with underscore."),Jl=(new Bl(412,"precondition_failed","Database not open"),new Bl(500,"unknown_error","Database encountered an unknown error")),Yl=new Bl(500,"badarg","Some query argument is invalid"),Ql=(new Bl(400,"invalid_request","Request was invalid"),new Bl(400,"query_parse_error","Some query parameter is invalid")),Xl=new Bl(500,"doc_validation","Bad special document member"),th=new Bl(400,"bad_request","Something wrong with the request"),eh=new Bl(400,"bad_request","Document must be a JSON object"),nh=(new Bl(404,"not_found","Database not found"),new Bl(500,"indexed_db_went_bad","unknown")),rh=(new Bl(500,"web_sql_went_bad","unknown"),new Bl(500,"levelDB_went_went_bad","unknown"),new Bl(403,"forbidden","Forbidden by design doc validate_doc_update function"),new Bl(400,"bad_request","Invalid rev format")),ih=(new Bl(412,"file_exists","The database could not be created, the file already exists."),new Bl(412,"missing_stub","A pre-existing attachment stub wasn't found"));function sh(t,e){function n(e){for(var n=Object.getOwnPropertyNames(t),r=0,i=n.length;r<i;r++)"function"!=typeof t[n[r]]&&(this[n[r]]=t[n[r]]);void 0===this.stack&&(this.stack=(new Error).stack),void 0!==e&&(this.reason=e)}return n.prototype=Bl.prototype,new n(e)}function oh(t){if("object"!=typeof t){var e=t;(t=Jl).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),"stack"in t||(t.stack=(new Error).stack),t}function ah(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(r){r.doc||(r.doc={});var i=n&&function(t,e,n){try{return!t(e,n)}catch(i){var r="Filter function threw: "+i.toString();return sh(th,r)}}(t.filter,r.doc,e);if("object"==typeof i)return i;if(i)return!1;if(t.include_docs){if(!t.attachments)for(var s in r.doc._attachments)Object.prototype.hasOwnProperty.call(r.doc._attachments,s)&&(r.doc._attachments[s].stub=!0)}else delete r.doc;return!0}}function ch(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function uh(t){var e;if(t?"string"!=typeof t?e=sh(Wl):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=sh(Kl)):e=sh(Gl),e)throw e}function lh(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(Vl("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function hh(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function dh(t){var e=hh(t);return e?e.join("/"):null}new Bl(413,"invalid_url","Provided URL is invalid");var fh=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ph="queryKey",mh=/(?:^|&)([^&=]*)=?([^&]*)/g,gh=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function yh(t){for(var e=gh.exec(t),n={},r=14;r--;){var i=fh[r],s=e[r]||"",o=-1!==["user","password"].indexOf(i);n[i]=o?decodeURIComponent(s):s}return n[ph]={},n[fh[12]].replace(mh,function(t,e,r){e&&(n[ph][e]=r)}),n}function vh(t,e){var n=[],r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n.push(i),r.push(e[i]));return n.push(t),Function.apply(null,n).apply(null,r)}function _h(t,e,n){return t.get(e).catch(function(t){if(404!==t.status)throw t;return{}}).then(function(r){var i=r._rev,s=n(r);return s?(s._id=e,s._rev=i,function(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(r){if(409!==r.status)throw r;return _h(t,e._id,n)})}(t,s,n)):{updated:!1,rev:i}})}var wh=function(t){return atob(t)},bh=function(t){return btoa(t)};function kh(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(ck){if("TypeError"!==ck.name)throw ck;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}function Ch(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function xh(t,e){return kh([Ch(t)],{type:e})}function Oh(t,e){return xh(wh(t),e)}function Eh(t,e){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";if(r)return e(n);e(function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}(n))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Th(t,e){Eh(t,function(t){e(t)})}function Sh(t,e){Th(t,function(t){e(bh(t))})}var Ah=self.setImmediate||self.setTimeout;function Ih(t,e,n,r,i){(n>0||r<e.size)&&(e=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}(e,n,r)),function(t,e){var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}(e,function(e){t.append(e),i()})}function Dh(t,e,n,r,i){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),i()}function Rh(t,e){var n="string"==typeof t,r=n?t.length:t.size,i=Math.min(32768,r),s=Math.ceil(r/i),o=0,a=n?new(ul()):new(ul().ArrayBuffer),c=n?Dh:Ih;function u(){Ah(h)}function l(){var t,n=(t=a.end(!0),bh(t));e(n),a.destroy()}function h(){var e=o*i;o++,c(a,t,e,e+i,o<s?u:l)}h()}function Mh(t){return ul().hash(t)}function Nh(t,e){if(!e)return gl().replace(/-/g,"").toLowerCase();var n=Hl({},t);return delete n._rev_tree,Mh(JSON.stringify(n))}var jh=gl;function Ph(t){for(var e,n,r,i,s=t.rev_tree.slice();i=s.pop();){var o=i.ids,a=o[2],c=i.pos;if(a.length)for(var u=0,l=a.length;u<l;u++)s.push({pos:c+1,ids:a[u]});else{var h=!!o[1].deleted,d=o[0];e&&!(r!==h?r:n!==c?n<c:e<d)||(e=d,n=c,r=h)}}return n+"-"+e}function Lh(t,e){for(var n,r=t.slice();n=r.pop();)for(var i=n.pos,s=n.ids,o=s[2],a=e(0===o.length,i,s[0],n.ctx,s[1]),c=0,u=o.length;c<u;c++)r.push({pos:i+1,ids:o[c],ctx:a})}function Fh(t,e){return t.pos-e.pos}function Vh(t){var e=[];Lh(t,function(t,n,r,i,s){t&&e.push({rev:n+"-"+r,pos:n,opts:s})}),e.sort(Fh).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function $h(t){for(var e=Ph(t),n=Vh(t.rev_tree),r=[],i=0,s=n.length;i<s;i++){var o=n[i];o.rev===e||o.opts.deleted||r.push(o.rev)}return r}function qh(t){for(var e,n=[],r=t.slice();e=r.pop();){var i=e.pos,s=e.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=e.history?e.history.slice():[];l.push({id:o,opts:a}),u&&n.push({pos:i+1-l.length,ids:l});for(var h=0,d=c.length;h<d;h++)r.push({pos:i+1,ids:c[h],history:l})}return n.reverse()}function Hh(t,e){return t.pos-e.pos}function Bh(t,e,n){var r=function(t,e,n){for(var r,i=0,s=t.length;i<s;)n(t[r=i+s>>>1],e)<0?i=r+1:s=r;return i}(t,e,n);t.splice(r,0,e)}function zh(t,e){for(var n,r,i=e,s=t.length;i<s;i++){var o=t[i],a=[o.id,o.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function Zh(t,e){return t[0]<e[0]?-1:1}function Uh(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),s=i.tree1,o=i.tree2;(s[1].status||o[1].status)&&(s[1].status="available"===s[1].status||"available"===o[1].status?"available":"missing");for(var a=0;a<o[2].length;a++)if(s[2][0]){for(var c=!1,u=0;u<s[2].length;u++)s[2][u][0]===o[2][a][0]&&(n.push({tree1:s[2][u],tree2:o[2][a]}),c=!0);c||(r="new_branch",Bh(s[2],o[2][a],Zh))}else r="new_leaf",s[2][0]=o[2][a]}return{conflicts:r,tree:t}}function Wh(t,e,n){var r,i=[],s=!1,o=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var a=0,c=t.length;a<c;a++){var u=t[a];if(u.pos===e.pos&&u.ids[0]===e.ids[0])r=Uh(u.ids,e.ids),i.push({pos:u.pos,ids:r.tree}),s=s||r.conflicts,o=!0;else if(!0!==n){var l=u.pos<e.pos?u:e,h=u.pos<e.pos?e:u,d=[],f=[];for(f.push({ids:l.ids,diff:h.pos-l.pos,parent:null,parentIdx:null});f.length>0;){var p=f.pop();if(0!==p.diff)for(var m=p.ids[2],g=0,y=m.length;g<y;g++)f.push({ids:m[g],diff:p.diff-1,parent:p.ids,parentIdx:g});else p.ids[0]===h.ids[0]&&d.push(p)}var v=d[0];v?(r=Uh(v.ids,h.ids),v.parent[2][v.parentIdx]=r.tree,i.push({pos:l.pos,ids:l.ids}),s=s||r.conflicts,o=!0):i.push(u)}else i.push(u)}return o||i.push(e),i.sort(Hh),{tree:i,conflicts:s||"internal_node"}}function Gh(t,e,n){var r=Wh(t,e),i=function(t,e){for(var n,r,i=qh(t),s=0,o=i.length;s<o;s++){var a,c=i[s],u=c.ids;if(u.length>e){n||(n={});var l=u.length-e;a={pos:c.pos+l,ids:zh(u,l)};for(var h=0;h<l;h++)n[c.pos+h+"-"+u[h].id]=!0}else a={pos:c.pos,ids:zh(u,0)};r=r?Wh(r,a,!0).tree:[a]}return n&&Lh(r,function(t,e,r){delete n[e+"-"+r]}),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Kh(t){return t.ids}function Jh(t,e){e||(e=Ph(t));for(var n,r=e.substring(e.indexOf("-")+1),i=t.rev_tree.map(Kh);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function Yh(t){return/^_local/.test(t)}function Qh(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=Vh(e.rev_tree).map(function(t){return{rev:t.rev}}));var i={id:e.id,changes:r,doc:t};return Jh(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=$h(e),i.doc._conflicts.length||delete i.doc._conflicts),i}class Xh extends(bl()){constructor(t,e,n){super(),this.db=t;var r=(e=e?Al(e):{}).complete=Il((e,n)=>{var r;e?(r="error",("listenerCount"in this?this.listenerCount(r):bl().listenerCount(this,r))>0&&this.emit("error",e)):this.emit("complete",n),this.removeAllListeners(),t.removeListener("destroyed",i)});n&&(this.on("complete",function(t){n(null,t)}),this.on("error",n));const i=()=>{this.cancel()};t.once("destroyed",i),e.onChange=(t,e,n)=>{this.isCancelled||function(t,e,n,r){try{t.emit("change",e,n,r)}catch(ck){Vl("error",'Error in .on("change", function):',ck)}}(this,t,e,n)};var s=new Promise(function(t,n){e.complete=function(e,r){e?n(e):t(r)}});this.once("cancel",function(){t.removeListener("destroyed",i),e.complete(null,{status:"cancelled"})}),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then(function(t){r(null,t)},r),t.taskqueue.isReady?this.validateChanges(e):t.taskqueue.addTask(t=>{t?e.complete(t):this.isCancelled?this.emit("cancel"):this.validateChanges(e)})}cancel(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")}validateChanges(t){var e=t.complete;ud._changesFilterPlugin?ud._changesFilterPlugin.validate(t,n=>{if(n)return e(n);this.doChanges(t)}):this.doChanges(t)}doChanges(t){var e=t.complete;if("live"in(t=Al(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Qh,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(ud._changesFilterPlugin){if(ud._changesFilterPlugin.normalize(t),ud._changesFilterPlugin.shouldFilter(this,t))return ud._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&Vl("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=e;var n=this.db._changes(t);if(n&&"function"==typeof n.cancel){const t=this.cancel;this.cancel=(...e)=>{n.cancel(),t.apply(this,e)}}}else this.db.info().then(n=>{this.isCancelled?e(null,{status:"cancelled"}):(t.since=n.update_seq,this.doChanges(t))},e)}}function td(t,e){return t<e?-1:t>e?1:0}function ed(t,e){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=e,t(n)):t(null,r.length?r[0]:r)}}function nd(t,e){var n=td(t._id,e._id);return 0!==n?n:td(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function rd(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(n.last_seq=e.last_seq),t._compact(n,function(e,n){e?r(e):r(null,n),al()(function(){t._compactionQueue.shift(),t._compactionQueue.length&&rd(t)})})})}function id(t,e,n){return t.get("_local/purges").then(function(t){const r=t.purgeSeq+1;return t.purges.push({docId:e,rev:n,purgeSeq:r}),t.purges.length>self.purged_infos_limit&&t.purges.splice(0,t.purges.length-self.purged_infos_limit),t.purgeSeq=r,t}).catch(function(t){if(404!==t.status)throw t;return{_id:"_local/purges",purges:[{docId:e,rev:n,purgeSeq:0}],purgeSeq:0}}).then(function(e){return t.put(e)})}class sd extends(bl()){_setup(){this.post=Rl("post",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(sh(eh));this.bulkDocs({docs:[t]},e,ed(n,t._id))}).bind(this),this.put=Rl("put",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(sh(eh));if(uh(t._id),Yh(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);const r=n=>{"function"==typeof this._put&&!1!==e.new_edits?this._put(t,e,n):this.bulkDocs({docs:[t]},e,ed(n,t._id))};var i,s,o,a;e.force&&t._rev?(s=(i=t._rev.split("-"))[1],o=parseInt(i[0],10)+1,a=Nh(),t._revisions={start:o,ids:[a,s]},t._rev=o+"-"+a,e.new_edits=!1,r(function(e){n(e,e?null:{ok:!0,id:t._id,rev:t._rev})})):r(n)}).bind(this),this.putAttachment=Rl("putAttachment",function(t,e,n,r,i){var s=this;function o(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:i,data:r,revpos:++n},s.put(t)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||Vl("warn","Attachment",e,"on document",t,"is missing content_type"),s.get(t).then(function(t){if(t._rev!==n)throw sh(Ul);return o(t)},function(e){if(e.reason===Zl.message)return o({_id:t});throw e})}).bind(this),this.removeAttachment=Rl("removeAttachment",function(t,e,n,r){this.get(t,(t,i)=>{if(t)r(t);else if(i._rev===n){if(!i._attachments)return r();delete i._attachments[e],0===Object.keys(i._attachments).length&&delete i._attachments,this.put(i,r)}else r(sh(Ul))})}).bind(this),this.remove=Rl("remove",function(t,e,n,r){var i;"string"==typeof e?(i={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(i=t,"function"==typeof e?(r=e,n={}):(r=n,n=e)),(n=n||{}).was_delete=!0;var s={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(Yh(s._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[s]},n,ed(r,s._id))}).bind(this),this.revsDiff=Rl("revsDiff",function(t,e,n){"function"==typeof e&&(n=e,e={});var r=Object.keys(t);if(!r.length)return n(null,{});var i=0,s=new vl;function o(t,e){s.has(t)||s.set(t,{missing:[]}),s.get(t).missing.push(e)}r.map(function(e){this._getRevisionTree(e,function(a,c){if(a&&404===a.status&&"missing"===a.message)s.set(e,{missing:t[e]});else{if(a)return n(a);!function(e,n){var r=t[e].slice(0);Lh(n,function(t,n,i,s,a){var c=n+"-"+i,u=r.indexOf(c);-1!==u&&(r.splice(u,1),"available"!==a.status&&o(e,c))}),r.forEach(function(t){o(e,t)})}(e,c)}if(++i===r.length){var u={};return s.forEach(function(t,e){u[e]=t}),n(null,u)}})},this)}).bind(this),this.bulkGet=Rl("bulkGet",function(t,e){Pl(this,t,e)}).bind(this),this.compactDocument=Rl("compactDocument",function(t,e,n){this._getRevisionTree(t,(r,i)=>{if(r)return n(r);var s=function(t){var e={},n=[];return Lh(t,function(t,r,i,s){var o=r+"-"+i;return t&&(e[o]=0),void 0!==s&&n.push({from:s,to:o}),o}),n.reverse(),n.forEach(function(t){e[t.from]=void 0===e[t.from]?1+e[t.to]:Math.min(e[t.from],1+e[t.to])}),e}(i),o=[],a=[];Object.keys(s).forEach(function(t){s[t]>e&&o.push(t)}),Lh(i,function(t,e,n,r,i){var s=e+"-"+n;"available"===i.status&&-1!==o.indexOf(s)&&a.push(s)}),this._doCompaction(t,a,n)})}).bind(this),this.compact=Rl("compact",function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:t,callback:e}),1===this._compactionQueue.length&&rd(this)}).bind(this),this.get=Rl("get",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(sh(Wl));if(Yh(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var r=[];const i=()=>{var i=[],s=r.length;if(!s)return n(null,i);r.forEach(r=>{this.get(t,{rev:r,revs:e.revs,latest:e.latest,attachments:e.attachments,binary:e.binary},function(t,e){if(t)i.push({missing:r});else{for(var o,a=0,c=i.length;a<c;a++)if(i[a].ok&&i[a].ok._rev===e._rev){o=!0;break}o||i.push({ok:e})}--s||n(null,i)})})};if(!e.open_revs)return this._get(t,e,(r,i)=>{if(r)return r.docId=t,n(r);var s=i.doc,o=i.metadata,a=i.ctx;if(e.conflicts){var c=$h(o);c.length&&(s._conflicts=c)}if(Jh(o,s._rev)&&(s._deleted=!0),e.revs||e.revs_info){for(var u=s._rev.split("-"),l=parseInt(u[0],10),h=u[1],d=qh(o.rev_tree),f=null,p=0;p<d.length;p++){var m=d[p],g=m.ids.map(function(t){return t.id}).indexOf(h);(g===l-1||!f&&-1!==g)&&(f=m)}if(!f)return(r=new Error("invalid rev tree")).docId=t,n(r);var y=f.ids.map(function(t){return t.id}).indexOf(s._rev.split("-")[1])+1;if(f.ids.splice(y,f.ids.length-y),f.ids.reverse(),e.revs&&(s._revisions={start:f.pos+f.ids.length-1,ids:f.ids.map(function(t){return t.id})}),e.revs_info){var v=f.pos+f.ids.length;s._revs_info=f.ids.map(function(t){return{rev:--v+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&s._attachments){var _=s._attachments,w=Object.keys(_).length;if(0===w)return n(null,s);Object.keys(_).forEach(t=>{this._getAttachment(s._id,t,_[t],{rev:s._rev,binary:e.binary,ctx:a},function(e,r){var i=s._attachments[t];i.data=r,delete i.stub,delete i.length,--w||n(null,s)})})}else{if(s._attachments)for(var b in s._attachments)Object.prototype.hasOwnProperty.call(s._attachments,b)&&(s._attachments[b].stub=!0);n(null,s)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){if(t)return n(t);r=Vh(e).map(function(t){return t.rev}),i()});else{if(!Array.isArray(e.open_revs))return n(sh(Jl,"function_clause"));r=e.open_revs;for(var s=0;s<r.length;s++){var o=r[s];if("string"!=typeof o||!/^\d+-/.test(o))return n(sh(rh))}i()}}).bind(this),this.getAttachment=Rl("getAttachment",function(t,e,n,r){n instanceof Function&&(r=n,n={}),this._get(t,n,(i,s)=>i?r(i):s.doc._attachments&&s.doc._attachments[e]?(n.ctx=s.ctx,n.binary=!0,void this._getAttachment(t,e,s.doc._attachments[e],n,r)):r(sh(Zl)))}).bind(this),this.allDocs=Rl("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(sh(Ql,"Query parameter `"+n+"` is not compatible with multi-get"));if(!lh(this)&&(function(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}(t),0===t.keys.length))return this._allDocs({limit:0},e)}return this._allDocs(t,e)}).bind(this),this.close=Rl("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}).bind(this),this.info=Rl("info",function(t){this._info((e,n)=>{if(e)return t(e);n.db_name=n.db_name||this.name,n.auto_compaction=!(!this.auto_compaction||lh(this)),n.adapter=this.adapter,t(null,n)})}).bind(this),this.id=Rl("id",function(t){return this._id(t)}).bind(this),this.bulkDocs=Rl("bulkDocs",function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(sh(zl));for(var r=0;r<t.docs.length;++r)if("object"!=typeof t.docs[r]||Array.isArray(t.docs[r]))return n(sh(eh));var i;if(t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(e){i=i||function(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}(e),t._attachments[e].content_type||Vl("warn","Attachment",e,"on document",t._id,"is missing content_type")})}),i)return n(sh(th,i));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var s=this;e.new_edits||lh(s)||t.docs.sort(nd),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var s=r[i];n._attachments[s]=Ml(n._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}(t.docs);var o=t.docs.map(function(t){return t._id});this._bulkDocs(t,e,function(t,r){if(t)return n(t);if(e.new_edits||(r=r.filter(function(t){return t.error})),!lh(s))for(var i=0,a=r.length;i<a;i++)r[i].id=r[i].id||o[i];n(null,r)})}).bind(this),this.registerDependentDatabase=Rl("registerDependentDatabase",function(t,e){var n=Al(this.__opts);this.__opts.view_adapter&&(n.adapter=this.__opts.view_adapter);var r=new this.constructor(t,n);_h(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:r})}).catch(e)}).bind(this),this.destroy=Rl("destroy",function(t,e){"function"==typeof t&&(e=t,t={});var n=!("use_prefix"in this)||this.use_prefix;const r=()=>{this._destroy(t,(t,n)=>{if(t)return e(t);this._destroyed=!0,this.emit("destroyed"),e(null,n||{ok:!0})})};if(lh(this))return r();this.get("_local/_pouch_dependentDbs",(t,i)=>{if(t)return 404!==t.status?e(t):r();var s=this.constructor,o=Object.keys(i.dependentDbs).map(t=>{var e=n?t.replace(new RegExp("^"+s.prefix),""):t;return new s(e,this.__opts).destroy()});Promise.all(o).then(r,e)})}).bind(this)}_compact(t,e){var n,r={return_docs:!1,last_seq:t.last_seq||0},i=[],s=0;const o=t=>{this.activeTasks.update(n,{completed_items:++s}),i.push(this.compactDocument(t.id,0))},a=t=>{this.activeTasks.remove(n,t),e(t)},c=t=>{var r=t.last_seq;Promise.all(i).then(()=>_h(this,"_local/compaction",t=>(!t.last_seq||t.last_seq<r)&&(t.last_seq=r,t))).then(()=>{this.activeTasks.remove(n),e(null,{ok:!0})}).catch(a)};this.info().then(t=>{n=this.activeTasks.add({name:"database_compaction",total_items:t.update_seq-r.last_seq}),this.changes(r).on("change",o).on("complete",c).on("error",a)})}changes(t,e){return"function"==typeof t&&(e=t,t={}),(t=t||{}).return_docs="return_docs"in t?t.return_docs:!t.live,new Xh(this,t,e)}type(){return"function"==typeof this._type?this._type():this.adapter}}sd.prototype.purge=Rl("_purge",function(t,e,n){if(void 0===this._purge)return n(sh(Jl,"Purge is not implemented in the "+this.adapter+" adapter."));var r=this;r._getRevisionTree(t,(i,s)=>{if(i)return n(i);if(!s)return n(sh(Zl));let o;try{o=function(t,e){let n=[];const r=t.slice();let i;for(;i=r.pop();){const{pos:t,ids:s}=i,o=`${t}-${s[0]}`,a=s[2];if(n.push(o),o===e){if(0!==a.length)throw new Error("The requested revision is not a leaf");return n.reverse()}(0===a.length||a.length>1)&&(n=[]);for(let e=0,n=a.length;e<n;e++)r.push({pos:t+1,ids:a[e]})}if(0===n.length)throw new Error("The requested revision does not exist");return n.reverse()}(s,e)}catch(i){return n(i.message||i)}r._purge(t,o,(i,s)=>{if(i)return n(i);id(r,t,e).then(function(){return n(null,s)})})})});class od{constructor(){this.isReady=!1,this.failed=!1,this.queue=[]}execute(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()}fail(t){this.failed=t,this.execute()}ready(t){this.isReady=!0,this.db=t,this.execute()}addTask(t){this.queue.push(t),this.failed&&this.execute()}}function ad(t,e){let n=function(...t){if(!(this instanceof n))return new n(...t);e.apply(this,t)};var r;return(r=n).prototype=Object.create(t.prototype,{constructor:{value:r}}),n}class cd extends sd{constructor(t,e){super(),this._setup(t,e)}_setup(t,e){if(super._setup(),e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),void 0===e.deterministic_revs&&(e.deterministic_revs=!0),this.__opts=e=Al(e),this.auto_compaction=e.auto_compaction,this.purged_infos_limit=e.purged_infos_limit||1e3,this.prefix=ud.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var n=function(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=ud.adapters,i=ud.preferredAdapters,s=ud.prefix,o=e.adapter;if(!o)for(var a=0;a<i.length&&"idb"===(o=i[a])&&"websql"in r&&Ll()&&localStorage["_pouch__websqldb_"+s+t];++a)Vl("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var c=r[o];return{name:c&&"use_prefix"in c&&!c.use_prefix?t:s+t,adapter:o}}((e.prefix||"")+t,e);if(e.name=n.name,e.adapter=e.adapter||n.adapter,this.name=t,this._adapter=e.adapter,ud.emit("debug",["adapter","Picked adapter: ",e.adapter]),!ud.adapters[e.adapter]||!ud.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);if(e.view_adapter&&(!ud.adapters[e.view_adapter]||!ud.adapters[e.view_adapter].valid()))throw new Error("Invalid View Adapter: "+e.view_adapter);this.taskqueue=new od,this.adapter=e.adapter,ud.adapters[e.adapter].call(this,e,t=>{if(t)return this.taskqueue.fail(t);!function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}(this),this.emit("created",this),ud.emit("created",this.name),this.taskqueue.ready(this)})}}const ud=ad(cd,function(t,e){cd.prototype._setup.call(this,t,e)});var ld="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},hd=fetch,dd=Headers;ud.adapters={},ud.preferredAdapters=[],ud.prefix="_pouch_";var fd=new(bl());function pd(t,e){for(var n=t,r=0,i=e.length;r<i&&(n=n[e[r]]);r++);return n}function md(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var s=t[r];r>0&&"\\"===t[r-1]&&("$"===s||"."===s)?n=n.substring(0,n.length-1)+s:"."===s?(e.push(n),n=""):n+=s}return e.push(n),e}!function(t){Object.keys(bl().prototype).forEach(function(e){"function"==typeof bl().prototype[e]&&(t[e]=fd[e].bind(fd))});var e=t._destructionListeners=new vl;t.on("ref",function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)}),t.on("unref",function(t){if(e.has(t.name)){var n=e.get(t.name),r=n.indexOf(t);r<0||(n.splice(r,1),n.length>1?e.set(t.name,n):e.delete(t.name))}}),t.on("destroyed",function(t){if(e.has(t)){var n=e.get(t);e.delete(t),n.forEach(function(t){t.emit("destroyed",!0)})}})}(ud),ud.adapter=function(t,e,n){e.valid()&&(ud.adapters[t]=e,n&&ud.preferredAdapters.push(t))},ud.plugin=function(t){if("function"==typeof t)t(ud);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){ud.prototype[e]=t[e]})}return this.__defaults&&(ud.__defaults=Hl({},this.__defaults)),ud},ud.defaults=function(t){let e=ad(ud,function(t,n){n=n||{},t&&"object"==typeof t&&(t=(n=t).name,delete n.name),n=Hl({},e.__defaults,n),ud.call(this,t,n)});return e.preferredAdapters=ud.preferredAdapters.slice(),Object.keys(ud).forEach(function(t){t in e||(e[t]=ud[t])}),e.__defaults=Hl({},this.__defaults,t),e},ud.fetch=function(t,e){return hd(t,e)},ud.prototype.activeTasks=ud.activeTasks=new class{constructor(){this.tasks={}}list(){return Object.values(this.tasks)}add(t){const e=gl();return this.tasks[e]={id:e,name:t.name,total_items:t.total_items,created_at:(new Date).toJSON()},e}get(t){return this.tasks[t]}remove(t,e){return delete this.tasks[t],this.tasks}update(t,e){const n=this.tasks[t];if(void 0!==n){const r={id:n.id,name:n.name,created_at:n.created_at,total_items:e.total_items||n.total_items,completed_items:e.completed_items||n.completed_items,updated_at:(new Date).toJSON()};this.tasks[t]=r}return this.tasks}};var gd=["$or","$nor","$not"];function yd(t){return gd.indexOf(t)>-1}function vd(t){return Object.keys(t)[0]}function _d(t){var e={},n={$or:!0,$nor:!0};return t.forEach(function(t){Object.keys(t).forEach(function(r){var i=t[r];if("object"!=typeof i&&(i={$eq:i}),yd(r))if(i instanceof Array){if(n[r])return n[r]=!1,void(e[r]=i);var s=[];e[r].forEach(function(t){Object.keys(i).forEach(function(e){var n=i[e],r=Math.max(Object.keys(t).length,Object.keys(n).length),o=_d([t,n]);Object.keys(o).length<=r||s.push(o)})}),e[r]=s}else e[r]=_d([i]);else{var o=e[r]=e[r]||{};Object.keys(i).forEach(function(t){var e=i[t];return"$gt"===t||"$gte"===t?function(t,e,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}(t,e,o):"$lt"===t||"$lte"===t?function(t,e,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}(t,e,o):"$ne"===t?function(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(e,o):"$eq"===t?function(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(e,o):"$regex"===t?function(t,e){"$regex"in e?e.$regex.push(t):e.$regex=[t]}(e,o):void(o[t]=e)})}})}),e}function wd(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=_d(t[n].$and));var r=t[e];"object"==typeof r&&wd(r)}return t}function bd(t,e){for(var n in t){"$and"===n&&(e=!0);var r=t[n];"object"==typeof r&&(e=bd(r,e))}return e}function kd(t){var e=Al(t);bd(e,!1)&&"$and"in(e=wd(e))&&(e=_d(e.$and)),["$or","$nor"].forEach(function(t){t in e&&e[t].forEach(function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n],i=t[r];"object"==typeof i&&null!==i||(t[r]={$eq:i})}})}),"$not"in e&&(e.$not=_d([e.$not]));for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],s=e[i];"object"==typeof s&&null!==s||(s={$eq:s}),e[i]=s}return Cd(e),e}function Cd(t){Object.keys(t).forEach(function(e){var n=t[e];Array.isArray(n)?n.forEach(function(t){t&&"object"==typeof t&&Cd(t)}):"$ne"===e?t.$ne=[n]:"$regex"===e?t.$regex=[n]:n&&"object"==typeof n&&Cd(n)})}function xd(t,e){if(t===e)return 0;t=Od(t),e=Od(e);var n=Id(t),r=Id(e);if(n-r!=0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=xd(t[r],e[r]);if(0!==i)return i}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),s=0;s<i;s++){var o=xd(n[s],r[s]);if(0!==o)return o;if(0!==(o=xd(t[n[s]],e[r[s]])))return o}return n.length===r.length?0:n.length>r.length?1:-1}(t,e)}function Od(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=Od(e[r])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var i in t={},e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];void 0!==s&&(t[i]=Od(s))}}}return t}function Ed(t){return Id(t=Od(t))+""+function(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var e,n=t.toExponential().split(/e\+?/),r=parseInt(n[1],10),i=t<0,s=i?"0":"2";s+=""+(function(t,e,n){for(var r="",i=3-t.length;r.length<i;)r+="0";return r}(e=((i?-r:r)- -324).toString())+e);var o=Math.abs(parseFloat(n[0]));return i&&(o=10-o),s+""+o.toFixed(20).replace(/\.?0+$/,"")}(t);case"string":return t.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,s="";if(e)for(;++r<i;)s+=Ed(n[r]);else for(;++r<i;){var o=n[r];s+=Ed(o)+Ed(t[o])}return s}return""}(t)+"\0"}function Td(t,e){var n,r=e;if("1"===t[e])n=0,e++;else{var i="0"===t[e];e++;var s="",o=t.substring(e,e+3),a=parseInt(o,10)+-324;for(i&&(a=-a),e+=3;;){var c=t[e];if("\0"===c)break;s+=c,e++}n=1===(s=s.split(".")).length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),i&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:e-r}}function Sd(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,s=r.index;Array.isArray(i)?i.push(n):s===t.length-2?i[t.pop()]=n:t.push(n)}}function Ad(t){for(var e=[],n=[],r=0;;){var i=t[r++];if("\0"!==i)switch(i){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var s=Td(t,r);e.push(s.num),r+=s.length;break;case"4":for(var o="";;){var a=t[r];if("\0"===a)break;o+=a,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02"),e.push(o);break;case"5":var c={element:[],index:e.length};e.push(c.element),n.push(c);break;case"6":var u={element:{},index:e.length};e.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===e.length)return e.pop();Sd(e,n)}}}function Id(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}function Dd(t,e,n){return n.every(function(n){var r=e[n],i=md(n),s=pd(t,i);return yd(n)?function(t,e,n){return"$or"===t?e.some(function(t){return Dd(n,t,Object.keys(t))}):"$not"===t?!Dd(n,e,Object.keys(e)):!e.find(function(t){return Dd(n,t,Object.keys(t))})}(n,r,t):Rd(r,t,i,s)})}function Rd(t,e,n,r){return!t||("object"==typeof t?Object.keys(t).every(function(i){var s=t[i];if(0===i.indexOf("$"))return Md(i,e,s,n,r);var o=md(i);if(void 0===r&&"object"!=typeof s&&o.length>0)return!1;var a=pd(r,o);return"object"==typeof s?Rd(s,e,n,a):Md("$eq",e,s,o,a)}):t===r)}function Md(t,e,n,r,i){if(!Ld[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Ld[t](e,n,r,i)}function Nd(t){return null!=t}function jd(t){return void 0!==t}function Pd(t,e){return e.some(function(e){return t instanceof Array?t.some(function(t){return 0===xd(e,t)}):0===xd(e,t)})}var Ld={$elemMatch:function(t,e,n,r){return!!Array.isArray(r)&&0!==r.length&&r.some("object"==typeof r[0]&&null!==r[0]?function(t){return Dd(t,e,Object.keys(e))}:function(r){return Rd(e,t,n,r)})},$allMatch:function(t,e,n,r){return!!Array.isArray(r)&&0!==r.length&&r.every("object"==typeof r[0]&&null!==r[0]?function(t){return Dd(t,e,Object.keys(e))}:function(r){return Rd(e,t,n,r)})},$eq:function(t,e,n,r){return jd(r)&&0===xd(r,e)},$gte:function(t,e,n,r){return jd(r)&&xd(r,e)>=0},$gt:function(t,e,n,r){return jd(r)&&xd(r,e)>0},$lte:function(t,e,n,r){return jd(r)&&xd(r,e)<=0},$lt:function(t,e,n,r){return jd(r)&&xd(r,e)<0},$exists:function(t,e,n,r){return e?jd(r):!jd(r)},$mod:function(t,e,n,r){return Nd(r)&&function(t,e){return"number"==typeof t&&parseInt(t,10)===t&&t%e[0]===e[1]}(r,e)},$ne:function(t,e,n,r){return e.every(function(t){return 0!==xd(r,t)})},$in:function(t,e,n,r){return Nd(r)&&Pd(r,e)},$nin:function(t,e,n,r){return Nd(r)&&!Pd(r,e)},$size:function(t,e,n,r){return Nd(r)&&Array.isArray(r)&&function(t,e){return t.length===e}(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&function(t,e){return e.every(function(e){return t.some(function(t){return 0===xd(e,t)})})}(r,e)},$regex:function(t,e,n,r){return Nd(r)&&"string"==typeof r&&e.every(function(t){return function(t,e){return new RegExp(e).test(t)}(r,t)})},$type:function(t,e,n,r){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}}(r,e)}};function Fd(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter)return e(new Error('selector invalid for filter "'+("string"==typeof t.filter?t.filter:"function")+'"'));e()}function Vd(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=dh(t.view):t.filter=dh(t.filter))}function $d(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!lh(t.db)}function qd(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=sh(th,"`view` filter parameter not found or invalid.");return n(r)}var i=hh(e.view);t.db.get("_design/"+i[0],function(r,s){if(t.isCancelled)return n(null,{status:"cancelled"});if(r)return n(oh(r));var o=s&&s.views&&s.views[i[1]]&&s.views[i[1]].map;if(!o)return n(sh(Zl,s.views?"missing json key: "+i[1]:"missing json key: views"));e.filter=vh(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+o+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),t.doChanges(e)})}else if(e.selector)e.filter=function(t){return function(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");var n=function(t,e,n){if(t=t.filter(function(t){return Dd(t.doc,e.selector,n)}),e.sort){var r=function(t){function e(e){return t.map(function(t){var n=md(vd(t));return pd(e,n)})}return function(t,n){var r,i,s=xd(e(t.doc),e(n.doc));return 0!==s?s:(r=t.doc._id)<(i=n.doc._id)?-1:r>i?1:0}}(e.sort);t=t.sort(r),"string"!=typeof e.sort[0]&&"desc"===(i=e.sort[0])[vd(i)]&&(t=t.reverse())}var i;if("limit"in e||"skip"in e){var s=e.skip||0;t=t.slice(s,("limit"in e?e.limit:t.length)+s)}return t}([{doc:t}],{selector:e=kd(e)},Object.keys(e));return n&&1===n.length}(t,e.selector)},t.doChanges(e);else{var s=hh(e.filter);t.db.get("_design/"+s[0],function(r,i){if(t.isCancelled)return n(null,{status:"cancelled"});if(r)return n(oh(r));var o=i&&i.filters&&i.filters[s[1]];if(!o)return n(sh(Zl,i&&i.filters?"missing json key: "+s[1]:"missing json key: filters"));e.filter=vh('"use strict";\nreturn '+o+";",{}),t.doChanges(e)})}}function Hd(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}ud.plugin(function(t){t._changesFilterPlugin={validate:Fd,normalize:Vd,shouldFilter:$d,filter:qd}}),ud.version="8.0.1";var Bd=Hd(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),zd=Hd(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Zd(t){if(!/^\d+-/.test(t))return sh(rh);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function Ud(t,e,n){var r,i,s;n||(n={deterministic_revs:!0});var o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=jh()),i=Nh(t,n.deterministic_revs),t._rev){if((s=Zd(t._rev)).error)return s;t._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[i,o,[]]]]}],r=s.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],r=1;else if(t._revisions&&(t._rev_tree=function(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],s=1,o=r.length;s<o;s++)i=[r[s],{status:"missing"},[i]];return[{pos:n,ids:i}]}(t._revisions,o),r=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if((s=Zd(t._rev)).error)return s;t._rev_tree=[{pos:r=s.prefix,ids:[i=s.id,o,[]]}]}uh(t._id),t._rev=r+"-"+i;var a={metadata:{},data:{}};for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var u="_"===c[0];if(u&&!Bd[c]){var l=sh(Xl,c);throw l.message=Xl.message+": "+c,l}u&&!zd[c]?a.metadata[c.slice(1)]=t[c]:a.data[c]=t[c]}return a}function Wd(t,e,n){if(t.stub)return n();"string"==typeof t.data?function(t,e,n){var r=function(t){try{return wh(t)}catch(ck){return{error:sh(Yl,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?xh(r,t.content_type):"base64"===e?bh(r):r,Rh(r,function(e){t.digest="md5-"+e,n()})}(t,e,n):function(t,e,n){Rh(t.data,function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,"binary"===e?Th(t.data,function(e){t.data=e,n()}):"base64"===e?Sh(t.data,function(e){t.data=e,n()}):n()})}(t,e,n)}var Gd="document-store",Kd="by-sequence",Jd="attach-store",Yd="attach-seq-store",Qd="meta-store",Xd="local-store",tf="detect-blob-support";function ef(t){try{return JSON.stringify(t)}catch(ck){return _l.stringify(t)}}function nf(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(sh(nh,n))}}function rf(t,e,n){return{data:ef(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function sf(t){if(!t)return null;var e=function(t){try{return JSON.parse(t)}catch(ck){return _l.parse(t)}}(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function of(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function af(t,e,n,r){n?r(t?"string"!=typeof t?t:Oh(t,e):kh([""],{type:e})):t?"string"!=typeof t?Eh(t,function(t){r(bh(t))}):r(t):r("")}function cf(t,e,n,r){var i=Object.keys(t._attachments||{});if(!i.length)return r&&r();var s=0;function o(){++s===i.length&&r&&r()}i.forEach(function(r){e.attachments&&e.include_docs?function(t,e){var r=t._attachments[e],i=r.digest;n.objectStore(Jd).get(i).onsuccess=function(t){r.body=t.target.result.body,o()}}(t,r):(t._attachments[r].stub=!0,o())})}function uf(t,e){return Promise.all(t.map(function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return Promise.all(n.map(function(n){var r=t.doc._attachments[n];if("body"in r){var i=r.body,s=r.content_type;return new Promise(function(o){af(i,s,e,function(e){t.doc._attachments[n]=Hl(Ml(r,["digest","content_type"]),{data:e}),o()})})}}))}}))}function lf(t,e,n){var r=[],i=n.objectStore(Kd),s=n.objectStore(Jd),o=n.objectStore(Yd),a=t.length;function c(){--a||r.length&&r.forEach(function(t){o.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::\uffff",!1,!1)).onsuccess=function(e){e.target.result||s.delete(t)}})}t.forEach(function(t){i.index("_doc_id_rev").getKey(e+"::"+t).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return c();i.delete(e),o.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];r.push(n),o.delete(e.primaryKey),e.continue()}else c()}}})}function hf(t,e,n){try{return{txn:t.transaction(e,n)}}catch(r){return{error:r}}}var df=new Fl;function ff(t,e,n,r,i,s){for(var o,a,c,u,l,h,d,f,p=e.docs,m=0,g=p.length;m<g;m++){var y=p[m];y._id&&Yh(y._id)||(y=p[m]=Ud(y,n.new_edits,t)).error&&!d&&(d=y)}if(d)return s(d);var v=!1,_=0,w=new Array(p.length),b=new vl,k=!1;function C(){v=!0,x()}function x(){f&&v&&(f.docCount+=_,h.put(f))}function O(){k||(df.notify(r._meta.name),s(null,w))}function E(t,e,n,r,i,s,o,a){t.metadata.winningRev=e,t.metadata.deleted=n;var c=t.data;if(c._id=t.metadata.id,c._rev=t.metadata.rev,r&&(c._deleted=!0),c._attachments&&Object.keys(c._attachments).length)return function(t,e,n,r,i,s){var o=0,a=Object.keys(t.data._attachments);function c(){o===a.length&&T(t,e,n,r,i,s)}function l(){o++,c()}a.forEach(function(n){var r=t.data._attachments[n];if(r.stub)o++,c();else{var i=r.data;delete r.data,r.revpos=parseInt(e,10),function(t,e,n){u.count(t).onsuccess=function(r){if(r.target.result)return n();u.put({digest:t,body:e}).onsuccess=n}}(r.digest,i,l)}})}(t,e,n,i,o,a);_+=s,x(),T(t,e,n,i,o,a)}function T(t,e,n,i,s,u){var h=t.data,d=t.metadata;function f(s){var c=t.stemmedRevs||[];i&&r.auto_compaction&&(c=c.concat(function(t){var e=[];return Lh(t.rev_tree,function(t,n,r,i,s){"available"!==s.status||t||(e.push(n+"-"+r),s.status="missing")}),e}(t.metadata))),c&&c.length&&lf(c,t.metadata.id,o),d.seq=s.target.result;var u=rf(d,e,n);a.put(u).onsuccess=p}function p(){w[s]={ok:!0,id:d.id,rev:d.rev},b.set(t.metadata.id,t.metadata),function(t,e,n){var r=0,i=Object.keys(t.data._attachments||{});if(!i.length)return n();function s(){++r===i.length&&n()}function o(n){var r=l.put({seq:e,digestSeq:t.data._attachments[n].digest+"::"+e});r.onsuccess=s,r.onerror=function(t){t.preventDefault(),t.stopPropagation(),s()}}for(var a=0;a<i.length;a++)o(i[a])}(t,d.seq,u)}h._doc_id_rev=d.id+"::"+d.rev,delete h._id,delete h._rev;var m=c.put(h);m.onsuccess=f,m.onerror=function(t){t.preventDefault(),t.stopPropagation(),c.index("_doc_id_rev").getKey(h._doc_id_rev).onsuccess=function(t){c.put(h,t.target.result).onsuccess=f}}}!function(t,e,n){if(!t.length)return n();var r,i=0;function s(){i++,t.length===i&&(r?n(r):n())}t.forEach(function(t){var n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],i=0;if(!n.length)return s();function o(t){r=t,++i===n.length&&s()}for(var a in t.data._attachments)Object.prototype.hasOwnProperty.call(t.data._attachments,a)&&Wd(t.data._attachments[a],e,o)})}(p,r._meta.blobSupport?"blob":"base64",function(e){if(e)return s(e);!function(){var e=hf(i,[Gd,Kd,Jd,Xd,Yd,Qd],"readwrite");if(e.error)return s(e.error);(o=e.txn).onabort=nf(s),o.ontimeout=nf(s),o.oncomplete=O,a=o.objectStore(Gd),c=o.objectStore(Kd),u=o.objectStore(Jd),l=o.objectStore(Yd),(h=o.objectStore(Qd)).get(Qd).onsuccess=function(t){f=t.target.result,x()},function(t){var e=[];if(p.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(n){var r=t.data._attachments[n];r.stub&&e.push(r.digest)})}),!e.length)return t();var n,r=0;e.forEach(function(i){!function(t,e){u.get(t).onsuccess=function(n){if(n.target.result)e();else{var r=sh(ih,"unknown stub attachment with digest "+t);r.status=412,e(r)}}}(i,function(i){i&&!n&&(n=i),++r===e.length&&t(n)})})}(function(e){if(e)return k=!0,s(e);!function(){if(p.length)for(var e=0,i=0,s=p.length;i<s;i++){var c=p[i];c._id&&Yh(c._id)?u():a.get(c.metadata.id).onsuccess=l}function u(){++e===p.length&&function(t,e,n,r,i,s,o,a,c){t=t||1e3;var u=a.new_edits,l=new vl,h=0,d=e.length;function f(){++h===d&&c&&c()}e.forEach(function(t,e){if(t._id&&Yh(t._id))n[t._deleted?"_removeLocal":"_putLocal"](t,{ctx:i},function(t,n){s[e]=t||n,f()});else{var r=t.metadata.id;l.has(r)?(d--,l.get(r).push([t,e])):l.set(r,[[t,e]])}}),l.forEach(function(e,n){var i=0;function c(){++i<e.length?l():f()}function l(){var l=e[i],h=l[0],d=l[1];if(r.has(n))!function(t,e,n,r,i,s,o,a){if(function(t,e){for(var n,r=t.slice(),i=e.split("-"),s=parseInt(i[0],10),o=i[1];n=r.pop();){if(n.pos===s&&n.ids[0]===o)return!0;for(var a=n.ids[2],c=0,u=a.length;c<u;c++)r.push({pos:n.pos+1,ids:a[c]})}return!1}(e.rev_tree,n.metadata.rev)&&!a)return r[i]=n,s();var c=e.winningRev||Ph(e),u="deleted"in e?e.deleted:Jh(e,c),l="deleted"in n.metadata?n.metadata.deleted:Jh(n.metadata),h=/^1-/.test(n.metadata.rev);if(u&&!l&&a&&h){var d=n.data;d._rev=c,d._id=n.metadata.id,n=Ud(d,a)}var f=Gh(e.rev_tree,n.metadata.rev_tree[0],t);if(a&&(u&&l&&"new_leaf"!==f.conflicts||!u&&"new_leaf"!==f.conflicts||u&&!l&&"new_branch"===f.conflicts)){var p=sh(Ul);return r[i]=p,s()}var m=n.metadata.rev;n.metadata.rev_tree=f.tree,n.stemmedRevs=f.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var g=Ph(n.metadata),y=Jh(n.metadata,g),v=u===y?0:u<y?-1:1;o(n,g,y,m===g?y:Jh(n.metadata,m),!0,v,i,s)}(t,r.get(n),h,s,d,c,o,u);else{var f=Gh([],h.metadata.rev_tree[0],t);h.metadata.rev_tree=f.tree,h.stemmedRevs=f.stemmedRevs||[],function(t,e,n){var r=Ph(t.metadata),i=Jh(t.metadata,r);if("was_delete"in a&&i)return s[e]=sh(Zl,"deleted"),n();if(u&&function(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}(t)){var c=sh(Ul);return s[e]=c,n()}o(t,r,i,i,!1,i?0:1,e,n)}(h,d,c)}}l()})}(t.revs_limit,p,r,b,o,w,E,n,C)}function l(t){var e=sf(t.target.result);e&&b.set(e.id,e),u()}}()})}()})}function pf(t,e,n,r,i){var s,o,a;function c(t){o=t.target.result,s&&i(s,o,a)}function u(t){s=t.target.result,o&&i(s,o,a)}function l(t){var e=t.target.result;if(!e)return i();i([e.key],[e.value],e)}-1===r&&(r=1e3),"function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&r>1&&!n?(a={continue:function(){if(!s.length)return i();var n,a=s[s.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(a,e.upper,!0,e.upperOpen)}catch(ck){if("DataError"===ck.name&&0===ck.code)return i()}else n=IDBKeyRange.lowerBound(a,!0);s=null,o=null,t.getAll(e=n,r).onsuccess=c,t.getAllKeys(e,r).onsuccess=u}},t.getAll(e,r).onsuccess=c,t.getAllKeys(e,r).onsuccess=u):n?t.openCursor(e,"prev").onsuccess=l:t.openCursor(e).onsuccess=l}var mf=!1,gf=[];function yf(){!mf&&gf.length&&(mf=!0,gf.shift()())}var vf,_f=new vl,wf=new vl;function bf(t,e){var n=this;!function(e,r,i){gf.push(function(){!function(t,e,n){var r=e.name,i=null,s=null;function o(t){return function(e,n){e&&e instanceof Error&&!e.reason&&s&&(e.reason=s),t(e,n)}}function a(t,e){var n=t.objectStore(Gd);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value,s=Jh(i);i.deletedOrLocal=s?"1":"0",n.put(i),r.continue()}else e()}}function c(t,e){var n=t.objectStore(Xd),r=t.objectStore(Gd),i=t.objectStore(Kd);r.openCursor().onsuccess=function(t){var s=t.target.result;if(s){var o=s.value,a=o.id,c=Yh(a),u=Ph(o);if(c){var l=a+"::"+u,h=a+"::",d=a+"::~",f=i.index("_doc_id_rev"),p=IDBKeyRange.bound(h,d,!1,!1),m=f.openCursor(p);m.onsuccess=function(t){if(m=t.target.result){var e=m.value;e._doc_id_rev===l&&n.put(e),i.delete(m.primaryKey),m.continue()}else r.delete(s.primaryKey),s.continue()}}else s.continue()}else e&&e()}}function u(t,e){var n=t.objectStore(Kd),r=t.objectStore(Jd),i=t.objectStore(Yd);r.count().onsuccess=function(t){if(!t.target.result)return e();n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var r=n.value,s=n.primaryKey,o=Object.keys(r._attachments||{}),a={},c=0;c<o.length;c++)a[r._attachments[o[c]].digest]=!0;var u=Object.keys(a);for(c=0;c<u.length;c++)i.put({seq:s,digestSeq:u[c]+"::"+s});n.continue()}}}function l(t){var e=t.objectStore(Kd),n=t.objectStore(Gd);n.openCursor().onsuccess=function(t){var r,i=t.target.result;if(i){var s=(r=i.value).data?sf(r):(r.deleted="1"===r.deletedOrLocal,r);if(s.winningRev=s.winningRev||Ph(s),s.seq)return o();!function(){var t=s.id+"::",n=s.id+"::\uffff",r=e.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,n)),i=0;r.onsuccess=function(t){var e=t.target.result;if(!e)return s.seq=i,o();var n=e.primaryKey;n>i&&(i=n),e.continue()}}()}function o(){var t=rf(s,s.winningRev,s.deleted);n.put(t).onsuccess=function(){i.continue()}}}}t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=Dl(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(n,r,s){ff(e,n,r,t,i,o(s))},t._get=function(t,e,n){var r,s,o,a=e.ctx;if(!a){var c=hf(i,[Gd,Kd,Jd],"readonly");if(c.error)return n(c.error);a=c.txn}function u(){n(o,{doc:r,metadata:s,ctx:a})}a.objectStore(Gd).get(t).onsuccess=function(t){if(!(s=sf(t.target.result)))return o=sh(Zl,"missing"),u();var n;if(e.rev)n=e.latest?function(t,e){for(var n,r=e.rev_tree.slice();n=r.pop();){var i=n.pos,s=n.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:o,pos:i,opts:a}),u)for(var h=0,d=l.length;h<d;h++){var f=l[h];if(f.pos+"-"+f.id===t)return i+"-"+o}for(var p=0,m=c.length;p<m;p++)r.push({pos:i+1,ids:c[p],history:l})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}(e.rev,s):e.rev;else if(n=s.winningRev,Jh(s))return o=sh(Zl,"deleted"),u();var i=a.objectStore(Kd),c=s.id+"::"+n;i.index("_doc_id_rev").get(c).onsuccess=function(t){if((r=t.target.result)&&(r=of(r)),!r)return o=sh(Zl,"missing"),u();u()}}},t._getAttachment=function(t,e,n,r,s){var o;if(r.ctx)o=r.ctx;else{var a=hf(i,[Gd,Kd,Jd],"readonly");if(a.error)return s(a.error);o=a.txn}var c=n.digest,u=n.content_type;o.objectStore(Jd).get(c).onsuccess=function(t){af(t.target.result.body,u,r.binary,function(t){s(null,t)})}},t._info=function(e){var n,r,s=hf(i,[Qd,Kd],"readonly");if(s.error)return e(s.error);var o=s.txn;o.objectStore(Qd).get(Qd).onsuccess=function(t){r=t.target.result.docCount},o.objectStore(Kd).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},o.oncomplete=function(){e(null,{doc_count:r,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){!function(t,e,n){var r,i,s="keys"in t&&t.keys,o=t.skip||0,a="number"==typeof t.limit?t.limit:-1;if(!s&&(i=(r=function(t,e,n,r,i){try{if(t&&e)return i?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return i?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return i?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(ck){return{error:ck}}return null}("startkey"in t&&t.startkey,"endkey"in t&&t.endkey,!1!==t.inclusive_end,"key"in t&&t.key,t.descending))&&r.error)&&("DataError"!==i.name||0!==i.code))return n(sh(nh,i.name));var c=[Gd,Kd,Qd];t.attachments&&c.push(Jd);var u=hf(e,c,"readonly");if(u.error)return n(u.error);var l=u.txn;l.oncomplete=function(){t.attachments?uf(y,t.binary).then(b):b()},l.onabort=nf(n);var h,d,f=l.objectStore(Gd),p=l.objectStore(Kd),m=l.objectStore(Qd),g=p.index("_doc_id_rev"),y=[];function v(e,n){var r={id:n.id,key:n.id,value:{rev:e}};n.deleted?s&&(y.push(r),r.value.deleted=!0,r.doc=null):o--<=0&&(y.push(r),t.include_docs&&function(e,n,r){g.get(e.id+"::"+r).onsuccess=function(r){if(n.doc=of(r.target.result)||{},t.conflicts){var i=$h(e);i.length&&(n.doc._conflicts=i)}cf(n.doc,t,l)}}(n,r,e))}function _(t){for(var e=0,n=t.length;e<n&&y.length!==a;e++){var r=t[e];if(r.error&&s)y.push(r);else{var i=sf(r);v(i.winningRev,i)}}}function w(t,e,n){n&&(_(e),y.length<a&&n.continue())}function b(){var e={total_rows:h,offset:t.skip,rows:y};t.update_seq&&void 0!==d&&(e.update_seq=d),n(null,e)}m.get(Qd).onsuccess=function(t){h=t.target.result.docCount},t.update_seq&&(p.openCursor(null,"prev").onsuccess=function(t){var e=t.target.result,n=void 0;return e&&e.key&&(n=e.key),function(t){t.target.result&&t.target.result.length>0&&(d=t.target.result[0])}({target:{result:[n]}})}),i||0===a||(s?function(t,e,n){var r=new Array(t.length),i=0;t.forEach(function(s,o){e.get(s).onsuccess=function(e){r[o]=e.target.result?e.target.result:{key:s,error:"not_found"},++i===t.length&&n(t,r,{})}})}(t.keys,f,w):-1===a?function(t,e,n){if("function"!=typeof t.getAll){var r=[];t.openCursor(e).onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):n({target:{result:r}})}}else t.getAll(e).onsuccess=n}(f,r,function(e){var n=e.target.result;t.descending&&(n=n.reverse()),_(n)}):pf(f,r,t.descending,a+o,w))}(t,i,o(e))},t._changes=function(e){return function(t,e,n,r){if((t=Al(t)).continuous){var i=n+":"+jh();return df.addListener(n,i,e,t),df.notify(n),{cancel:function(){df.removeListener(n,i)}}}var s=t.doc_ids&&new yl(t.doc_ids);t.since=t.since||0;var o=t.since,a="limit"in t?t.limit:-1;0===a&&(a=1);var c,u,l,h,d=[],f=0,p=ah(t),m=new vl;function g(t,e,n,r){return n.seq!==e?r():n.winningRev===t._rev?r(n,t):void(h.get(t._id+"::"+n.winningRev).onsuccess=function(t){r(n,of(t.target.result))})}function y(){t.complete(null,{results:d,last_seq:o})}var v=[Gd,Kd];t.attachments&&v.push(Jd);var _=hf(r,v,"readonly");if(_.error)return t.complete(_.error);(c=_.txn).onabort=nf(t.complete),c.oncomplete=function(){!t.continuous&&t.attachments?uf(d).then(y):y()},u=c.objectStore(Kd),l=c.objectStore(Gd),h=u.index("_doc_id_rev"),pf(u,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,a,function(e,n,r){if(r&&e.length){var i=new Array(e.length),u=new Array(e.length),h=0;n.forEach(function(n,o){!function(t,e,n){if(s&&!s.has(t._id))return n();var r=m.get(t._id);if(r)return g(t,e,r,n);l.get(t._id).onsuccess=function(i){r=sf(i.target.result),m.set(t._id,r),g(t,e,r,n)}}(of(n),e[o],function(n,s){u[o]=n,i[o]=s,++h===e.length&&function(){for(var e=[],n=0,s=i.length;n<s&&f!==a;n++){var o=i[n];o&&e.push(y(u[n],o))}Promise.all(e).then(function(e){for(var n=0,r=e.length;n<r;n++)e[n]&&t.onChange(e[n])}).catch(t.complete),f!==a&&r.continue()}()})})}function y(e,n){var r=t.processChange(n,e,t);o=r.seq=e.seq;var i=p(r);return"object"==typeof i?Promise.reject(i):i?(f++,t.return_docs&&d.push(r),t.attachments&&t.include_docs?new Promise(function(e){cf(n,t,c,function(){uf([r],t.binary).then(function(){e(r)})})}):Promise.resolve(r)):Promise.resolve()}})}(e,t,r,i)},t._close=function(t){i.close(),_f.delete(r),t()},t._getRevisionTree=function(t,e){var n=hf(i,[Gd],"readonly");if(n.error)return e(n.error);n.txn.objectStore(Gd).get(t).onsuccess=function(t){var n=sf(t.target.result);n?e(null,n.rev_tree):e(sh(Zl))}},t._doCompaction=function(t,e,n){var r=hf(i,[Gd,Kd,Jd,Yd],"readwrite");if(r.error)return n(r.error);var s=r.txn;s.objectStore(Gd).get(t).onsuccess=function(n){var r=sf(n.target.result);Lh(r.rev_tree,function(t,n,r,i,s){-1!==e.indexOf(n+"-"+r)&&(s.status="missing")}),lf(e,t,s);var i=r.winningRev,o=r.deleted;s.objectStore(Gd).put(rf(r,i,o))},s.onabort=nf(n),s.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=hf(i,[Xd],"readonly");if(n.error)return e(n.error);var r=n.txn.objectStore(Xd).get(t);r.onerror=nf(e),r.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(sh(Zl))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var r=t._rev,s=t._id;t._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var o,a=e.ctx;if(!a){var c=hf(i,[Xd],"readwrite");if(c.error)return n(c.error);(a=c.txn).onerror=nf(n),a.oncomplete=function(){o&&n(null,o)}}var u,l=a.objectStore(Xd);r?(u=l.get(s)).onsuccess=function(i){var s=i.target.result;s&&s._rev===r?l.put(t).onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)}:n(sh(Ul))}:((u=l.add(t)).onerror=function(t){n(sh(Ul)),t.preventDefault(),t.stopPropagation()},u.onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var r,s=e.ctx;if(!s){var o=hf(i,[Xd],"readwrite");if(o.error)return n(o.error);(s=o.txn).oncomplete=function(){r&&n(null,r)}}var a=t._id,c=s.objectStore(Xd),u=c.get(a);u.onerror=nf(n),u.onsuccess=function(i){var s=i.target.result;s&&s._rev===t._rev?(c.delete(a),r={ok:!0,id:a,rev:"0-0"},e.ctx&&n(null,r)):n(sh(Zl))}},t._destroy=function(t,e){df.removeAllListeners(r);var n=wf.get(r);n&&n.result&&(n.result.close(),_f.delete(r));var i=indexedDB.deleteDatabase(r);i.onsuccess=function(){wf.delete(r),Ll()&&r in localStorage&&delete localStorage[r],e(null,{ok:!0})},i.onerror=nf(e)};var h=_f.get(r);if(h)return i=h.idb,t._meta=h.global,al()(function(){n(null,t)});var d=indexedDB.open(r,5);wf.set(r,d),d.onupgradeneeded=function(t){var e=t.target.result;if(t.oldVersion<1)return function(t){var e=t.createObjectStore(Gd,{keyPath:"id"});t.createObjectStore(Kd,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(Jd,{keyPath:"digest"}),t.createObjectStore(Qd,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(tf),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(Xd,{keyPath:"_id"});var n=t.createObjectStore(Yd,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var n=t.currentTarget.transaction;t.oldVersion<3&&function(t){t.createObjectStore(Xd,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(e),t.oldVersion<4&&function(t){var e=t.createObjectStore(Yd,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var r=[a,c,u,l],i=t.oldVersion;!function t(){var e=r[i-1];i++,e&&e(n,t)}()},d.onsuccess=function(e){(i=e.target.result).onversionchange=function(){i.close(),_f.delete(r)},i.onabort=function(t){Vl("error","Database has a global failure",t.target.error),s=t.target.error,i.close(),_f.delete(r)};var o,a,c,u,l=i.transaction([Qd,tf,Gd],"readwrite"),h=!1;function d(){void 0!==c&&h&&(t._meta={name:r,instanceId:u,blobSupport:c},_f.set(r,{idb:i,global:t._meta}),n(null,t))}function f(){if(void 0!==a&&void 0!==o){var t=r+"_id";t in o?u=o[t]:o[t]=u=jh(),o.docCount=a,l.objectStore(Qd).put(o)}}l.objectStore(Qd).get(Qd).onsuccess=function(t){o=t.target.result||{id:Qd},f()},function(t,e){t.objectStore(Gd).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){a=t.target.result,f()}}(l),vf||(vf=function(t){return new Promise(function(e){var n=kh([""]),r=t.objectStore(tf).put(n,"key");r.onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},r.onerror=t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}}).catch(function(){return!1})}(l)),vf.then(function(t){c=t,d()}),l.oncomplete=function(){h=!0,d()},l.onabort=nf(n)},d.onerror=function(t){var e=t.target.error&&t.target.error.message;e?-1!==e.indexOf("stored database is a higher version")&&(e=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):e="Failed to open indexedDB, are you in private browsing mode?",Vl("error",e),n(sh(nh,e))}}(n,t,function(t,e){!function(t,e,n,r){try{t(e,n)}catch(e){r.emit("error",e)}}(r,t,e,i),mf=!1,al()(function(){yf()})})}),yf()}(0,e,n.constructor)}bf.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(ck){return!1}};const kf=5e3;let Cf={};function xf(t){let e=t.doc||t.ok,n=e&&e._attachments;n&&Object.keys(n).forEach(function(t){let e=n[t];e.data=Oh(e.data,e.content_type)})}function Of(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function Ef(t){return t._attachments&&Object.keys(t._attachments)?Promise.all(Object.keys(t._attachments).map(function(e){let n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new Promise(function(t){Sh(n.data,t)}).then(function(t){n.data=t})})):Promise.resolve()}function Tf(t,e){return Sf(t,t.db+"/"+e)}function Sf(t,e){return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+(t.path?"/":"")+e}function Af(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function If(t,e){let n=this,r=function(t,e){if(function(t){if(!t.prefix)return!1;let e=yh(t.prefix).protocol;return"http"===e||"https"===e}(e)){let n=e.name.substr(e.prefix.length);t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(n)}let n=yh(t);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});let r=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=r.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=r.join("/"),n}(t.name,t),i=Tf(r,"");t=Al(t);const s=function(){var e=Gu(function*(e,n){if((n=n||{}).headers=n.headers||new dd,n.credentials="include",t.auth||r.auth){let e=t.auth||r.auth,i=bh(unescape(encodeURIComponent(e.username+":"+e.password)));n.headers.set("Authorization","Basic "+i)}let i=t.headers||{};Object.keys(i).forEach(function(t){n.headers.append(t,i[t])}),function(t){let e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==e.indexOf("msie"),r=-1!==e.indexOf("trident"),i=-1!==e.indexOf("edge");return(n||r||i)&&(!("method"in t)||"GET"===t.method)}(n)&&(e+=(-1===e.indexOf("?")?"?":"&")+"_nonce="+Date.now());let s=t.fetch||hd;return yield s(e,n)});return function(t,n){return e.apply(this,arguments)}}();function o(t,e){return Rl(t,function(...t){l().then(function(){return e.apply(this,t)}).catch(function(e){t.pop()(e)})}).bind(n)}function a(t,e){return c.apply(this,arguments)}function c(){return(c=Gu(function*(t,e){let n={};(e=e||{}).headers=e.headers||new dd,e.headers.get("Content-Type")||e.headers.set("Content-Type","application/json"),e.headers.get("Accept")||e.headers.set("Accept","application/json");const r=yield s(t,e);n.ok=r.ok,n.status=r.status;const i=yield r.json();if(n.data=i,!n.ok)throw n.data.status=n.status,oh(n.data);return Array.isArray(n.data)&&(n.data=n.data.map(function(t){return t.error||t.missing?oh(t):t})),n})).apply(this,arguments)}let u;function l(){return h.apply(this,arguments)}function h(){return(h=Gu(function*(){return t.skip_setup?Promise.resolve():u||(u=a(i).catch(function(t){return t&&t.status&&404===t.status?(ql(404,"PouchDB is just detecting if the remote exists."),a(i,{method:"PUT"})):Promise.reject(t)}).catch(function(t){return!(!t||!t.status||412!==t.status)||Promise.reject(t)}),u.catch(function(){u=null}),u)})).apply(this,arguments)}function d(t){return t.split("/").map(encodeURIComponent).join("/")}al()(function(){e(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=o("id",function(){var t=Gu(function*(t){let e;try{const t=yield s(Sf(r,""));e=yield t.json()}catch(n){e={}}t(null,e&&e.uuid?e.uuid+r.db:Tf(r,""))});return function(e){return t.apply(this,arguments)}}()),n.compact=o("compact",function(){var t=Gu(function*(t,e){"function"==typeof t&&(e=t,t={}),t=Al(t),yield a(Tf(r,"_compact"),{method:"POST"}),function r(){n.info(function(n,i){i&&!i.compact_running?e(null,{ok:!0}):setTimeout(r,t.interval||200)})}()});return function(e,n){return t.apply(this,arguments)}}()),n.bulkGet=Rl("bulkGet",function(t,e){let n=this;function i(t){return s.apply(this,arguments)}function s(){return(s=Gu(function*(e){let n={};t.revs&&(n.revs=!0),t.attachments&&(n.attachments=!0),t.latest&&(n.latest=!0);try{const i=yield a(Tf(r,"_bulk_get"+Af(n)),{method:"POST",body:JSON.stringify({docs:t.docs})});t.attachments&&t.binary&&i.data.results.forEach(function(t){t.docs.forEach(xf)}),e(null,i.data)}catch(i){e(i)}})).apply(this,arguments)}function o(){let r=Math.ceil(t.docs.length/50),i=0,s=new Array(r);function o(t){return function(n,o){s[t]=o.results,++i===r&&e(null,{results:ch(s)})}}for(let e=0;e<r;e++){let r=Ml(t,["revs","attachments","binary","latest"]);r.docs=t.docs.slice(50*e,Math.min(t.docs.length,50*(e+1))),Pl(n,r,o(e))}}let c=Sf(r,""),u=Cf[c];"boolean"!=typeof u?i(function(t,n){t?(Cf[c]=!1,ql(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(Cf[c]=!0,e(null,n))}):u?i(e):o()}),n._info=function(){var t=Gu(function*(t){try{yield l();const e=yield s(Tf(r,"")),n=yield e.json();n.host=Tf(r,""),t(null,n)}catch(e){t(e)}});return function(e){return t.apply(this,arguments)}}(),n.fetch=function(){var t=Gu(function*(t,e){yield l();const n="/"===t.substring(0,1)?Sf(r,t.substring(1)):Tf(r,t);return s(n,e)});return function(e,n){return t.apply(this,arguments)}}(),n.get=o("get",function(){var t=Gu(function*(t,e,n){"function"==typeof e&&(n=e,e={});let i={};function o(t){let n=t._attachments,i=n&&Object.keys(n);if(n&&i.length)return o=i.map(function(t){return function(){return function(t){return a.apply(this,arguments)}(t)}}),new Promise(function(t,e){var n,r=0,i=0,s=0,a=o.length;function c(){++s===a?n?e(n):t():h()}function u(){r--,c()}function l(t){r--,n=n||t,c()}function h(){for(;r<5&&i<a;)r++,o[i++]().then(u,l)}h()});var o;function a(){return(a=Gu(function*(i){const o=n[i],a=Of(t._id)+"/"+d(i)+"?rev="+t._rev,c=yield s(Tf(r,a));let u,l;if(u="buffer"in c?yield c.buffer():yield c.blob(),e.binary){let t=Object.getOwnPropertyDescriptor(u.__proto__,"type");t&&!t.set||(u.type=o.content_type),l=u}else l=yield new Promise(function(t){Sh(u,t)});delete o.stub,delete o.length,o.data=l})).apply(this,arguments)}}(e=Al(e)).revs&&(i.revs=!0),e.revs_info&&(i.revs_info=!0),e.latest&&(i.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),i.open_revs=e.open_revs),e.rev&&(i.rev=e.rev),e.conflicts&&(i.conflicts=e.conflicts),e.update_seq&&(i.update_seq=e.update_seq),t=Of(t);const c=Tf(r,t+Af(i));try{const t=yield a(c);e.attachments&&(yield(u=t.data,Array.isArray(u)?Promise.all(u.map(function(t){if(t.ok)return o(t.ok)})):o(u))),n(null,t.data)}catch(l){l.docId=t,n(l)}var u});return function(e,n,r){return t.apply(this,arguments)}}()),n.remove=o("remove",function(){var t=Gu(function*(t,e,n,i){let s;"string"==typeof e?(s={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(s=t,"function"==typeof e?(i=e,n={}):(i=n,n=e));const o=s._rev||n.rev,c=Tf(r,Of(s._id))+"?rev="+o;try{i(null,(yield a(c,{method:"DELETE"})).data)}catch(u){i(u)}});return function(e,n,r,i){return t.apply(this,arguments)}}()),n.getAttachment=o("getAttachment",function(){var t=Gu(function*(t,e,n,i){"function"==typeof n&&(i=n,n={});const o=n.rev?"?rev="+n.rev:"",a=Tf(r,Of(t))+"/"+d(e)+o;let c;try{const t=yield s(a,{method:"GET"});if(!t.ok)throw t;let e;if(c=t.headers.get("content-type"),e="undefined"==typeof process||process.browser||"function"!=typeof t.buffer?yield t.blob():yield t.buffer(),"undefined"!=typeof process&&!process.browser){var u=Object.getOwnPropertyDescriptor(e.__proto__,"type");u&&!u.set||(e.type=c)}i(null,e)}catch(l){i(l)}});return function(e,n,r,i){return t.apply(this,arguments)}}()),n.removeAttachment=o("removeAttachment",function(){var t=Gu(function*(t,e,n,i){const s=Tf(r,Of(t)+"/"+d(e))+"?rev="+n;try{i(null,(yield a(s,{method:"DELETE"})).data)}catch(o){i(o)}});return function(e,n,r,i){return t.apply(this,arguments)}}()),n.putAttachment=o("putAttachment",function(){var t=Gu(function*(t,e,n,i,s,o){"function"==typeof s&&(o=s,s=i,i=n,n=null);const c=Of(t)+"/"+d(e);let u=Tf(r,c);if(n&&(u+="?rev="+n),"string"==typeof i){let t;try{t=wh(i)}catch(l){return o(sh(Yl,"Attachment is not a valid base64 string"))}i=t?xh(t,s):""}try{o(null,(yield a(u,{headers:new dd({"Content-Type":s}),method:"PUT",body:i})).data)}catch(h){o(h)}});return function(e,n,r,i,s,o){return t.apply(this,arguments)}}()),n._bulkDocs=function(){var t=Gu(function*(t,e,n){t.new_edits=e.new_edits;try{yield l(),yield Promise.all(t.docs.map(Ef)),n(null,(yield a(Tf(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(t)})).data)}catch(i){n(i)}});return function(e,n,r){return t.apply(this,arguments)}}(),n._put=function(){var t=Gu(function*(t,e,n){try{yield l(),yield Ef(t),n(null,(yield a(Tf(r,Of(t._id)),{method:"PUT",body:JSON.stringify(t)})).data)}catch(i){i.docId=t&&t._id,n(i)}});return function(e,n,r){return t.apply(this,arguments)}}(),n.allDocs=o("allDocs",function(){var t=Gu(function*(t,e){"function"==typeof t&&(e=t,t={});let n,i={},s="GET";(t=Al(t)).conflicts&&(i.conflicts=!0),t.update_seq&&(i.update_seq=!0),t.descending&&(i.descending=!0),t.include_docs&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.key&&(i.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(i.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(i.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(i.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(i.limit=t.limit),void 0!==t.skip&&(i.skip=t.skip);let o=Af(i);void 0!==t.keys&&(s="POST",n={keys:t.keys});try{const i=yield a(Tf(r,"_all_docs"+o),{method:s,body:JSON.stringify(n)});t.include_docs&&t.attachments&&t.binary&&i.data.rows.forEach(xf),e(null,i.data)}catch(c){e(c)}});return function(e,n){return t.apply(this,arguments)}}()),n._changes=function(t){let e="batch_size"in t?t.batch_size:25;(t=Al(t)).continuous&&!("heartbeat"in t)&&(t.heartbeat=1e4);let n="timeout"in t?t.timeout:3e4;"timeout"in t&&t.timeout&&n-t.timeout<kf&&(n=t.timeout+kf),"heartbeat"in t&&t.heartbeat&&n-t.heartbeat<kf&&(n=t.heartbeat+kf);let i={};"timeout"in t&&t.timeout&&(i.timeout=t.timeout);let s=void 0!==t.limit&&t.limit,o=s;if(t.style&&(i.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.continuous&&(i.feed="longpoll"),t.seq_interval&&(i.seq_interval=t.seq_interval),t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),t.update_seq&&(i.update_seq=!0),"heartbeat"in t&&t.heartbeat&&(i.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(i.filter=t.filter),t.view&&"string"==typeof t.view&&(i.filter="_view",i.view=t.view),t.query_params&&"object"==typeof t.query_params)for(let r in t.query_params)Object.prototype.hasOwnProperty.call(t.query_params,r)&&(i[r]=t.query_params[r]);let c,u="GET";t.doc_ids?(i.filter="_doc_ids",u="POST",c={doc_ids:t.doc_ids}):t.selector&&(i.filter="_selector",u="POST",c={selector:t.selector});let h,d=new ld;const f=function(){var n=Gu(function*(n,f){if(t.aborted)return;i.since=n,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),t.descending?s&&(i.limit=o):i.limit=!s||o>e?e:o;let p=Tf(r,"_changes"+Af(i)),m={signal:d.signal,method:u,body:JSON.stringify(c)};if(h=n,!t.aborted)try{yield l(),f(null,(yield a(p,m)).data)}catch(g){f(g)}});return function(t,e){return n.apply(this,arguments)}}();let p={results:[]};const m=function(n,r){if(t.aborted)return;let i=0;if(r&&r.results){i=r.results.length,p.last_seq=r.last_seq;let e=null,n=null;"number"==typeof r.pending&&(e=r.pending),"string"!=typeof p.last_seq&&"number"!=typeof p.last_seq||(n=p.last_seq),r.results=r.results.filter(function(r){o--;let i=ah(t)(r);return i&&(t.include_docs&&t.attachments&&t.binary&&xf(r),t.return_docs&&p.results.push(r),t.onChange(r,e,n)),i})}else if(n)return t.aborted=!0,void t.complete(n);r&&r.last_seq&&(h=r.last_seq),(!t.continuous||s&&o<=0)&&(s&&o<=0||r&&i<e||t.descending)?t.complete(null,p):al()(function(){f(h,m)})};return f(t.since||0,m),{cancel:function(){t.aborted=!0,d.abort()}}},n.revsDiff=o("revsDiff",function(){var t=Gu(function*(t,e,n){"function"==typeof e&&(n=e,e={});try{n(null,(yield a(Tf(r,"_revs_diff"),{method:"POST",body:JSON.stringify(t)})).data)}catch(i){n(i)}});return function(e,n,r){return t.apply(this,arguments)}}()),n._close=function(t){t()},n._destroy=function(){var t=Gu(function*(t,e){try{e(null,yield a(Tf(r,""),{method:"DELETE"}))}catch(n){404===n.status?e(null,{ok:!0}):e(n)}});return function(e,n){return t.apply(this,arguments)}}()}If.valid=function(){return!0};class Df extends Error{constructor(t){super(),this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Df)}catch(ck){}}}class Rf extends Error{constructor(t){super(),this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Rf)}catch(ck){}}}class Mf extends Error{constructor(t){super(),this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Mf)}catch(ck){}}}function Nf(t,e){return e&&t.then(function(t){al()(function(){e(null,t)})},function(t){al()(function(){e(t)})}),t}function jf(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}function Pf(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function Lf(t){var e=new yl(t),n=new Array(e.size),r=-1;return e.forEach(function(t){n[++r]=t}),n}function Ff(t){var e=new Array(t.size),n=-1;return t.forEach(function(t,r){e[++n]=r}),e}function Vf(t){return new Mf("builtin "+t+" function requires map values to be numbers or number arrays")}function $f(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if("number"!=typeof i){if(!Array.isArray(i))throw Vf("_sum");e="number"==typeof e?[e]:e;for(var s=0,o=i.length;s<o;s++){var a=i[s];if("number"!=typeof a)throw Vf("_sum");void 0===e[s]?e.push(a):e[s]+=a}}else"number"==typeof e?e+=i:e[0]+=i}return e}var qf=Vl.bind(null,"log"),Hf=Array.isArray,Bf=JSON.parse;function zf(t,e){return vh("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:$f,log:qf,isArray:Hf,toJSON:Bf})}class Zf{constructor(){this.promise=new Promise(function(t){t()})}add(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()}),this.promise}finish(){return this.promise}}function Uf(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Wf(t,e){return Uf(t)+Uf(e)+"undefined"}function Gf(t,e,n,r,i,s){return Kf.apply(this,arguments)}function Kf(){return(Kf=Gu(function*(t,e,n,r,i,s){const o=Wf(n,r);let a;if(!i&&(a=t._cachedViews=t._cachedViews||{},a[o]))return a[o];const c=t.info().then(function(){var c=Gu(function*(c){const u=c.db_name+"-mrview-"+(i?"temp":Mh(o));yield _h(t,"_local/"+s,function(t){t.views=t.views||{};let n=e;-1===n.indexOf("/")&&(n=e+"/"+e);const r=t.views[n]=t.views[n]||{};if(!r[u])return r[u]=!0,t});const l=(yield t.registerDependentDatabase(u)).db;l.auto_compaction=!0;const h={name:u,db:l,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:r};let d;try{d=yield h.db.get("_local/lastSeq")}catch(f){if(404!==f.status)throw f}return h.seq=d?d.seq:0,a&&h.db.once("destroyed",function(){delete a[o]}),h});return function(t){return c.apply(this,arguments)}}());return a&&(a[o]=c),c})).apply(this,arguments)}var Jf={},Yf=new Zf;function Qf(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Xf(t){return 1===t.length&&/^1-/.test(t[0].rev)}function tp(t,e,n){try{t.emit("error",e)}catch(r){Vl("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Vl("error",e,n)}}var ep=function(t,e){return $f(e)},np=function(t,e){return e.length},rp=function(t,e){return{sum:$f(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];e+=i*i}return e}(e)}},ip=function(t,e,n,r){function i(t,e,n){try{e(n)}catch(ck){tp(t,ck,{fun:e,doc:n})}}function s(t,e,n,r,i){try{return{output:e(n,r,i)}}catch(ck){return tp(t,ck,{fun:e,keys:n,values:r,rereduce:i}),{error:ck}}}function o(t,e){const n=xd(t.key,e.key);return 0!==n?n:xd(t.value,e.value)}function a(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function c(t){const e=t.value;return e&&"object"==typeof e&&e._id||t.id}function u(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&function(t){t.rows.forEach(function(t){const e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){const n=e[t];e[t].data=Oh(n.data,n.content_type)})})}(e),e}}function l(t,e,n,r){let i=e[t];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(t+"="+i))}function h(t){if(void 0!==t){const e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function d(t,e){const n=t.descending?"endkey":"startkey",r=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[r]&&xd(t[n],t[r])>0)throw new Df("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new Df("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new Df("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){const n=function(t){if(t){if("number"!=typeof t)return new Df(`Invalid value for integer: "${t}"`);if(t<0)return new Df(`Invalid value for positive integer: "${t}"`)}}(t[e]);if(n)throw n})}function f(t,e,n){return p.apply(this,arguments)}function p(){return(p=Gu(function*(t,e,n){let r,i,s=[],o="GET";if(l("reduce",n,s),l("include_docs",n,s),l("attachments",n,s),l("limit",n,s),l("descending",n,s),l("group",n,s),l("group_level",n,s),l("skip",n,s),l("stale",n,s),l("conflicts",n,s),l("startkey",n,s,!0),l("start_key",n,s,!0),l("endkey",n,s,!0),l("end_key",n,s,!0),l("inclusive_end",n,s),l("key",n,s,!0),l("update_seq",n,s),s=s.join("&"),s=""===s?"":"?"+s,void 0!==n.keys){const t=2e3,i=`keys=${encodeURIComponent(JSON.stringify(n.keys))}`;i.length+s.length+1<=t?s+=("?"===s[0]?"&":"?")+i:(o="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){const a=Qf(e),c=yield t.fetch("_design/"+a[0]+"/_view/"+a[1]+s,{headers:new dd({"Content-Type":"application/json"}),method:o,body:JSON.stringify(r)});i=c.ok;const l=yield c.json();if(!i)throw l.status=c.status,oh(l);return l.rows.forEach(function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)}),new Promise(function(t){t(l)}).then(u(n))}r=r||{},Object.keys(e).forEach(function(t){r[t]=Array.isArray(e[t])?e[t]:e[t].toString()});const a=yield t.fetch("_temp_view"+s,{headers:new dd({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)});i=a.ok;const c=yield a.json();if(!i)throw c.status=a.status,oh(c);return new Promise(function(t){t(c)}).then(u(n))})).apply(this,arguments)}function m(t,e,n){return new Promise(function(r,i){t._query(e,n,function(t,e){if(t)return i(t);r(e)})})}function g(t){return function(e){if(404===e.status)return t;throw e}}function y(){return(y=Gu(function*(t,e,n){const r="_local/doc_"+t,i={_id:r,keys:[]},s=n.get(t),o=s[0],a=s[1],c=yield Xf(a)?Promise.resolve(i):e.db.get(r).catch(g(i));return function(t,e){const n=[],r=new yl;for(let s=0,a=e.rows.length;s<a;s++){const t=e.rows[s].doc;if(t&&(n.push(t),r.add(t._id),t._deleted=!o.has(t._id),!t._deleted)){const e=o.get(t._id);"value"in e&&(t.value=e.value)}}const i=Ff(o);return i.forEach(function(t){if(!r.has(t)){const e={_id:t},r=o.get(t);"value"in r&&(e.value=r.value),n.push(e)}}),t.keys=Lf(i.concat(t.keys)),n.push(t),n}(c,yield function(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):Promise.resolve({rows:[]})}(c))})).apply(this,arguments)}function v(t,e,n){var r="_local/lastSeq";return t.db.get(r).catch(g({_id:r,seq:0})).then(function(r){var i=Ff(e);return Promise.all(i.map(function(n){return function(t,e,n){return y.apply(this,arguments)}(n,t,e)})).then(function(e){var i=ch(e);return r.seq=n,i.push(r),t.db.bulkDocs({docs:i})}).then(()=>function(t){return t.sourceDB.get("_local/purges").then(function(e){const n=e.purgeSeq;return t.db.get("_local/purgeSeq").then(function(t){return t._rev}).catch(function(t){if(404!==t.status)throw t}).then(function(e){return t.db.put({_id:"_local/purgeSeq",_rev:e,purgeSeq:n})})}).catch(function(t){if(404!==t.status)throw t})}(t))})}function _(t){const e="string"==typeof t?t:t.name;let n=Jf[e];return n||(n=Jf[e]=new Zf),n}function w(t,e){return b.apply(this,arguments)}function b(){return(b=Gu(function*(t,e){return Pf(_(t),function(){return k(t,e)})()})).apply(this,arguments)}function k(t,e){return C.apply(this,arguments)}function C(){return(C=Gu(function*(t,n){let r,s,a;const c=e(t.mapFun,function(t,e){const n={id:s._id,key:Od(t)};null!=e&&(n.value=Od(e)),r.push(n)});let u=t.seq||0,l=0;t.sourceDB.emit("indexing",{view:t.name,indexed_docs:l});const h=new Zf;function d(){return f.apply(this,arguments)}function f(){return(f=Gu(function*(){return m(yield t.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:u,limit:n.changes_batch_size}),yield p())})).apply(this,arguments)}function p(){return t.db.get("_local/purgeSeq").then(function(t){return t.purgeSeq}).catch(function(t){if(t&&404!==t.status)throw t;return-1}).then(function(e){return t.sourceDB.get("_local/purges").then(function(n){const r=n.purges.filter(function(t,n){return n>e}).map(t=>t.docId),i=r.filter(function(t,e){return r.indexOf(t)===e});return Promise.all(i.map(function(e){return t.sourceDB.get(e).then(function(t){return{docId:e,doc:t}}).catch(function(t){if(404!==t.status)throw t;return{docId:e}})}))}).catch(function(t){if(t&&404!==t.status)throw t;return[]})})}function m(e,f){var p=e.results;if(p.length||f.length){for(let t of f)if(p.findIndex(function(e){return e.id===t.docId})<0){const e={_id:t.docId,doc:{_id:t.docId,_deleted:1},changes:[]};t.doc&&(e.doc=t.doc,e.changes.push({rev:t.doc._rev})),p.push(e)}var m=function(e){const n=new vl;for(let a=0,l=e.length;a<l;a++){const l=e[a];if("_"!==l.doc._id[0]){r=[],s=l.doc,s._deleted||i(t.sourceDB,c,s),r.sort(o);const e=g(r);n.set(l.doc._id,[e,l.changes])}u=l.seq}return n}(p);return h.add(function(e,n){return function(){return v(t,e,n)}}(m,u)),l+=p.length,t.sourceDB.emit("indexing",{view:t.name,last_seq:e.last_seq,results_count:p.length,indexed_docs:l}),t.sourceDB.activeTasks.update(a,{completed_items:l}),p.length<n.changes_batch_size?void 0:d()}}function g(t){const e=new vl;let n;for(let r=0,i=t.length;r<i;r++){const i=t[r],s=[i.key,i.id];r>0&&0===xd(i.key,n)&&s.push(r),e.set(Ed(s),i),n=i.key}return e}try{yield t.sourceDB.info().then(function(e){a=t.sourceDB.activeTasks.add({name:"view_indexing",total_items:e.update_seq-u})}),yield d(),yield h.finish(),t.seq=u,t.sourceDB.activeTasks.remove(a)}catch(y){t.sourceDB.activeTasks.remove(a,y)}})).apply(this,arguments)}function x(t,e,n){0===n.group_level&&delete n.group_level;const r=n.group||n.group_level,i=function(t){var e=t.toString();return function(t){if(/^_sum/.test(t))return ep;if(/^_count/.test(t))return np;if(/^_stats/.test(t))return rp;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(e)||zf(e)}(t.reduceFun),o=[],c=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;e.forEach(function(t){const e=o[o.length-1];let n=r?t.key:null;if(r&&Array.isArray(n)&&(n=n.slice(0,c)),e&&0===xd(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);o.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(let a=0,u=o.length;a<u;a++){const n=o[a],r=s(t.sourceDB,i,n.keys,n.values,!1);if(r.error&&r.error instanceof Mf)throw r.error;e.push({value:r.error?null:r.output,key:n.groupKey})}return{rows:a(e,n.limit,n.skip)}}function O(t,e){return Pf(_(t),function(){return function(t,e){return E.apply(this,arguments)}(t,e)})()}function E(){return(E=Gu(function*(t,e){let n;const r=t.reduceFun&&!1!==e.reduce,i=e.skip||0;function s(t){return o.apply(this,arguments)}function o(){return(o=Gu(function*(e){e.include_docs=!0;const r=yield t.db.allDocs(e);return n=r.total_rows,r.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){const e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}const e=Ad(t.doc._id);return{key:e[0],id:e[1],value:"value"in t.doc?t.doc.value:null}})})).apply(this,arguments)}function u(t){return l.apply(this,arguments)}function l(){return(l=Gu(function*(s){let o;if(o=r?x(t,s,e):void 0===e.keys?{total_rows:n,offset:i,rows:s}:{total_rows:n,offset:i,rows:a(s,e.limit,e.skip)},e.update_seq&&(o.update_seq=t.seq),e.include_docs){const n=Lf(s.map(c)),r=yield t.sourceDB.allDocs({keys:n,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary});var u=new vl;return r.rows.forEach(function(t){u.set(t.id,t.doc)}),s.forEach(function(t){var e=c(t),n=u.get(e);n&&(t.doc=n)}),o}return o})).apply(this,arguments)}if(void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys),void 0!==e.keys){const t=e.keys.map(function(t){const n={startkey:Ed([t]),endkey:Ed([t,{}])};return e.update_seq&&(n.update_seq=!0),s(n)});return u(ch(yield Promise.all(t)))}{const t={descending:e.descending};let n,o;if(e.update_seq&&(t.update_seq=!0),"start_key"in e&&(n=e.start_key),"startkey"in e&&(n=e.startkey),"end_key"in e&&(o=e.end_key),"endkey"in e&&(o=e.endkey),void 0!==n&&(t.startkey=Ed(e.descending?[n,{}]:[n])),void 0!==o){let n=!1!==e.inclusive_end;e.descending&&(n=!n),t.endkey=Ed(n?[o,{}]:[o])}if(void 0!==e.key){const n=Ed([e.key]),r=Ed([e.key,{}]);t.descending?(t.endkey=n,t.startkey=r):(t.startkey=n,t.endkey=r)}return r||("number"==typeof e.limit&&(t.limit=e.limit),t.skip=i),u(yield s(t))}})).apply(this,arguments)}function T(){return(T=Gu(function*(t){return(yield t.fetch("_view_cleanup",{headers:new dd({"Content-Type":"application/json"}),method:"POST"})).json()})).apply(this,arguments)}function S(){return(S=Gu(function*(t){try{const e=yield t.get("_local/mrviews"),n=new vl;Object.keys(e.views).forEach(function(t){const e=Qf(t),r="_design/"+e[0],i=e[1];let s=n.get(r);s||(s=new yl,n.set(r,s)),s.add(i)});const r={keys:Ff(n),include_docs:!0},i=yield t.allDocs(r),s={};i.rows.forEach(function(t){const r=t.key.substring(8);n.get(t.key).forEach(function(n){let i=r+"/"+n;e.views[i]||(i=n);const o=Object.keys(e.views[i]),a=t.doc&&t.doc.views&&t.doc.views[n];o.forEach(function(t){s[t]=s[t]||a})})});const o=Object.keys(s).filter(function(t){return!s[t]}).map(function(e){return Pf(_(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return Promise.all(o).then(function(){return{ok:!0}})}catch(e){if(404===e.status)return{ok:!0};throw e}})).apply(this,arguments)}function A(){return(A=Gu(function*(e,n,i){if("function"==typeof e._query)return m(e,n,i);if(lh(e))return f(e,n,i);const s={changes_batch_size:e.__opts.view_update_changes_batch_size||50};if("string"!=typeof n)return d(i,n),Yf.add(Gu(function*(){const r=yield Gf(e,"temp_view/temp_view",n.map,n.reduce,!0,t);return jf(w(r,s).then(function(){return O(r,i)}),function(){return r.db.destroy()})})),Yf.finish();{const o=n,a=Qf(o),c=a[0],u=a[1],l=yield e.get("_design/"+c);if(!(n=l.views&&l.views[u]))throw new Rf(`ddoc ${l._id} has no view named ${u}`);r(l,u),d(i,n);const h=yield Gf(e,o,n.map,n.reduce,!1,t);return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&al()(function(){w(h,s)}),O(h,i)):(yield w(h,s),O(h,i))}})).apply(this,arguments)}var I;return{query:function(t,e,n){const r=this;"function"==typeof e&&(n=e,e={}),e=e?function(t){return t.group_level=h(t.group_level),t.limit=h(t.limit),t.skip=h(t.skip),t}(e):{},"function"==typeof t&&(t={map:t});const i=Promise.resolve().then(function(){return function(t,e,n){return A.apply(this,arguments)}(r,t,e)});return Nf(i,n),i},viewCleanup:(I=function(){const t=this;return"function"==typeof t._viewCleanup?function(t){return new Promise(function(e,n){t._viewCleanup(function(t,r){if(t)return n(t);e(r)})})}(t):lh(t)?function(t){return T.apply(this,arguments)}(t):function(t){return S.apply(this,arguments)}(t)},function(...t){var e=t.pop(),n=I.apply(this,t);return"function"==typeof e&&Nf(n,e),n})}}("mrviews",function(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return zf(t.toString(),e)},0,function(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new Rf("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}),sp={query:function(t,e,n){return ip.query.call(this,t,e,n)},viewCleanup:function(t){return ip.viewCleanup.call(this,t)}};function op(t,e){var n=Object.keys(e._attachments);return Promise.all(n.map(function(n){return t.getAttachment(e._id,n,{rev:e._rev})}))}var ap="pouchdb";function cp(t,e,n,r,i){return t.get(e).catch(function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||ql(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:ap,version:1};throw n}).then(function(s){if(!i.cancelled&&s.last_seq!==n)return s.history=(s.history||[]).filter(function(t){return t.session_id!==r}),s.history.unshift({last_seq:n,session_id:r}),s.history=s.history.slice(0,5),s.version=1,s.replicator=ap,s.session_id=r,s.last_seq=n,t.put(s).catch(function(s){if(409===s.status)return cp(t,e,n,r,i);throw s})})}class up{constructor(t,e,n,r,i){this.src=t,this.target=e,this.id=n,this.returnValue=r,this.opts=i||{}}writeCheckpoint(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})}updateTarget(t,e){return this.opts.writeTargetCheckpoint?cp(this.target,this.id,t,e,this.returnValue):Promise.resolve(!0)}updateSource(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return cp(this.src,this.id,t,e,this.returnValue).catch(function(t){if(fp(t))return n.opts.writeSourceCheckpoint=!1,!0;throw t})}return Promise.resolve(!0)}getCheckpoint(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then(function(t){return t.last_seq||0}).catch(function(t){if(404!==t.status)throw t;return 0}):t.target.get(t.id).then(function(e){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?e.last_seq||0:t.src.get(t.id).then(function(t){return e.version!==t.version?0:(n=e.version?e.version.toString():"undefined")in lp?lp[n](e,t):0;var n},function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:0}).then(function(){return 0},function(n){return fp(n)?(t.opts.writeSourceCheckpoint=!1,e.last_seq):0});throw n})}).catch(function(t){if(404!==t.status)throw t;return 0})}}var lp={undefined:function(t,e){return 0===xd(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return(n=e,r=t,n.session_id===r.session_id?{last_seq:n.last_seq,history:n.history}:hp(n.history,r.history)).last_seq;var n,r}};function hp(t,e){var n=t[0],r=t.slice(1),i=e[0],s=e.slice(1);return n&&0!==e.length?dp(n.session_id,e)?{last_seq:n.last_seq,history:t}:dp(i.session_id,r)?{last_seq:i.last_seq,history:s}:hp(r,s):{last_seq:0,history:[]}}function dp(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||dp(t,r))}function fp(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function pp(t,e,n,r,i){return this instanceof up?pp:new up(t,e,n,r,i)}function mp(t,e,n,r,i){var s,o,a,c=[],u={seq:0,changes:[],docs:[]},l=!1,h=!1,d=!1,f=0,p=0,m=n.continuous||n.live||!1,g=n.batch_size||100,y=n.batches_limit||10,v=n.style||"all_docs",_=!1,w=n.doc_ids,b=n.selector,k=[],C=jh();i=i||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var x={};function O(){return o?Promise.resolve():function(t,e,n){var r=n.doc_ids?n.doc_ids.sort(xd):"",i=n.filter?n.filter.toString():"",s="",o="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(s=JSON.stringify(function(t){return Object.keys(t).sort(xd).reduce(function(e,n){return e[n]=t[n],e},{})}(n.query_params))),n.filter&&"_view"===n.filter&&(o=n.view.toString()),Promise.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+i+o+s+r+a;return new Promise(function(t){Rh(e,t)})}).then(function(t){return"_local/"+t.replace(/\//g,".").replace(/\+/g,"_")})}(t,e,n).then(function(i){o=new pp(t,e,i,r,!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function E(){if(k=[],0!==s.docs.length){var t=s.docs;return e.bulkDocs({docs:t,new_edits:!1},{timeout:n.timeout}).then(function(e){if(r.cancelled)throw R(),new Error("cancelled");var n=Object.create(null);e.forEach(function(t){t.error&&(n[t.id]=t)});var s=Object.keys(n).length;i.doc_write_failures+=s,i.docs_written+=t.length-s,t.forEach(function(t){var e=n[t._id];if(e){i.errors.push(e);var s=(e.name||"").toLowerCase();if("unauthorized"!==s&&"forbidden"!==s)throw e;r.emit("denied",Al(e))}else k.push(t)})},function(e){throw i.doc_write_failures+=t.length,e})}}function T(){if(s.error)throw new Error("There was a problem getting docs.");i.last_seq=p=s.seq;var e=Al(i);return k.length&&(e.docs=k,"number"==typeof s.pending&&(e.pending=s.pending,delete s.pending),r.emit("change",e)),l=!0,t.info().then(function(e){var n=t.activeTasks.get(a);if(s&&n){var r=n.completed_items||0,i=parseInt(e.update_seq,10)-parseInt(f,10);t.activeTasks.update(a,{completed_items:r+s.changes.length,total_items:i})}}),o.writeCheckpoint(s.seq,C).then(function(){if(r.emit("checkpoint",{checkpoint:s.seq}),l=!1,r.cancelled)throw R(),new Error("cancelled");s=void 0,P()}).catch(function(t){throw V(t),t})}function S(){return function(t,e,n,r){n=Al(n);var i=[],s=!0;return Promise.resolve().then(function(){var o=function(t){var e=[];return Object.keys(t).forEach(function(n){t[n].missing.forEach(function(t){e.push({id:n,rev:t})})}),{docs:e,revs:!0,latest:!0}}(n);if(o.docs.length)return t.bulkGet(o).then(function(n){if(r.cancelled)throw new Error("cancelled");return Promise.all(n.results.map(function(n){return Promise.all(n.docs.map(function(n){var r=n.ok;return n.error&&(s=!1),r&&r._attachments?function(t,e,n){var r=lh(e)&&!lh(t),i=Object.keys(n._attachments);return r?t.get(n._id).then(function(r){return Promise.all(i.map(function(i){return function(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}(r,n,i)?e.getAttachment(n._id,i):t.getAttachment(r._id,i)}))}).catch(function(t){if(404!==t.status)throw t;return op(e,n)}):op(e,n)}(e,t,r).then(function(t){var e=Object.keys(r._attachments);return t.forEach(function(t,n){var i=r._attachments[e[n]];delete i.stub,delete i.length,i.data=t}),r}):r}))})).then(function(t){i=i.concat(ch(t).filter(Boolean))})})}).then(function(){return{ok:s,docs:i}})}(t,e,s.diffs,r).then(function(t){s.error=!t.ok,t.docs.forEach(function(t){delete s.diffs[t._id],i.docs_read++,s.docs.push(t)})})}function A(){var t;r.cancelled||s||(0!==c.length?(s=c.shift(),r.emit("checkpoint",{start_next_batch:s.seq}),(t={},s.changes.forEach(function(e){r.emit("checkpoint",{revs_diff:e}),"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(r.cancelled)throw R(),new Error("cancelled");s.diffs=t})).then(S).then(E).then(T).then(A).catch(function(t){D("batch processing terminated with error",t)})):I(!0))}function I(t){0!==u.changes.length?(t||h||u.changes.length>=g)&&(c.push(u),u={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),A()):0!==c.length||s||((m&&x.live||h)&&(r.state="pending",r.emit("paused")),h&&R())}function D(t,e){d||(e.message||(e.message=t),i.ok=!1,i.status="aborting",c=[],u={seq:0,changes:[],docs:[]},R(e))}function R(s){if(!(d||r.cancelled&&(i.status="cancelled",l)))if(i.status=i.status||"complete",i.end_time=(new Date).toISOString(),i.last_seq=p,d=!0,t.activeTasks.remove(a,s),s){(s=sh(s)).result=i;var o=(s.name||"").toLowerCase();"unauthorized"===o||"forbidden"===o?(r.emit("error",s),r.removeAllListeners()):function(t,e,n,r){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=$l),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var i=function(){t.current_back_off=0};e.once("paused",function(){e.removeListener("active",i)}),e.once("active",i)}t.current_back_off=t.current_back_off||0,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}(n,r,s,function(){mp(t,e,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function M(e,i,s){if(r.cancelled)return R();if("number"==typeof i&&(u.pending=i),ah(n)(e))u.seq=e.seq||s,u.changes.push(e),r.emit("checkpoint",{pending_batch:u.seq}),al()(function(){I(0===c.length&&x.live)});else{var o=t.activeTasks.get(a);if(o){var l=o.completed_items||0;t.activeTasks.update(a,{completed_items:++l})}}}function N(t){if(_=!1,r.cancelled)return R();if(t.results.length>0)x.since=t.results[t.results.length-1].seq,P(),I(!0);else{var e=function(){m?(x.live=!0,P()):h=!0,I(!0)};s||0!==t.results.length?e():(l=!0,o.writeCheckpoint(t.last_seq,C).then(function(){if(l=!1,i.last_seq=p=t.last_seq,r.cancelled)throw R(),new Error("cancelled");e()}).catch(V))}}function j(t){if(_=!1,r.cancelled)return R();D("changes rejected",t)}function P(){if(!_&&!h&&c.length<y){_=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",i);var e=t.changes(x).on("change",M);e.then(s,s),e.then(N).catch(j),n.retry&&(r._changes=e,r._abortChanges=i)}function i(){e.cancel()}function s(){r.removeListener("cancel",i)}}function L(e){return t.info().then(function(r){var i=void 0===n.since?parseInt(r.update_seq,10)-parseInt(e,10):parseInt(r.update_seq,10);return a=t.activeTasks.add({name:`${m?"continuous ":""}replication from ${r.db_name}`,total_items:i}),e})}function F(){O().then(function(){if(!r.cancelled)return o.getCheckpoint().then(L).then(function(t){f=t,x={since:p=t,limit:g,batch_size:g,style:v,doc_ids:w,selector:b,return_docs:!0},n.filter&&("string"!=typeof n.filter?x.include_docs=!0:x.filter=n.filter),"heartbeat"in n&&(x.heartbeat=n.heartbeat),"timeout"in n&&(x.timeout=n.timeout),n.query_params&&(x.query_params=n.query_params),n.view&&(x.view=n.view),P()});R()}).catch(function(t){D("getCheckpoint rejected with ",t)})}function V(t){l=!1,D("writeCheckpoint completed with error",t)}r.ready(t,e),r.cancelled?R():(r._addedListeners||(r.once("cancel",R),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(t){n.complete(null,t)})),r._addedListeners=!0),void 0===n.since?F():O().then(function(){return l=!0,o.writeCheckpoint(n.since,C)}).then(function(){l=!1,r.cancelled?R():(p=n.since,F())}).catch(V))}class gp extends(bl()){constructor(){super(),this.cancelled=!1,this.state="pending";const t=new Promise((t,e)=>{this.once("complete",t),this.once("error",e)});this.then=function(e,n){return t.then(e,n)},this.catch=function(e){return t.catch(e)},this.catch(function(){})}cancel(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")}ready(t,e){if(this._readyCalled)return;this._readyCalled=!0;const n=()=>{this.cancel()};function r(){t.removeListener("destroyed",n),e.removeListener("destroyed",n)}t.once("destroyed",n),e.once("destroyed",n),this.once("complete",r),this.once("error",r)}}function yp(t,e){return"string"==typeof t?new(0,e.PouchConstructor)(t,e):t}function vp(t,e,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw sh(th,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=Al(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new gp(n);return mp(yp(t,n),yp(e,n),n,i),i}function _p(t,e,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=Al(n)).PouchConstructor=n.PouchConstructor||this,t=yp(t,n),e=yp(e,n),new wp(t,e,n,r)}class wp extends(bl()){constructor(t,e,n,r){super(),this.canceled=!1;const i=n.push?Hl({},n,n.push):n,s=n.pull?Hl({},n,n.pull):n;this.push=vp(t,e,i),this.pull=vp(e,t,s),this.pushPaused=!0,this.pullPaused=!0;const o=t=>{this.emit("change",{direction:"pull",change:t})},a=t=>{this.emit("change",{direction:"push",change:t})},c=t=>{this.emit("denied",{direction:"push",doc:t})},u=t=>{this.emit("denied",{direction:"pull",doc:t})},l=()=>{this.pushPaused=!0,this.pullPaused&&this.emit("paused")},h=()=>{this.pullPaused=!0,this.pushPaused&&this.emit("paused")},d=()=>{this.pushPaused=!1,this.pullPaused&&this.emit("active",{direction:"push"})},f=()=>{this.pullPaused=!1,this.pushPaused&&this.emit("active",{direction:"pull"})};let p={};const m=t=>(e,n)=>{("change"===e&&(n===o||n===a)||"denied"===e&&(n===u||n===c)||"paused"===e&&(n===h||n===l)||"active"===e&&(n===f||n===d))&&(e in p||(p[e]={}),p[e][t]=!0,2===Object.keys(p[e]).length&&this.removeAllListeners(e))};function g(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}n.live&&(this.push.on("complete",this.pull.cancel.bind(this.pull)),this.pull.on("complete",this.push.cancel.bind(this.push))),this.on("newListener",function(t){"change"===t?(g(this.pull,"change",o),g(this.push,"change",a)):"denied"===t?(g(this.pull,"denied",u),g(this.push,"denied",c)):"active"===t?(g(this.pull,"active",f),g(this.push,"active",d)):"paused"===t&&(g(this.pull,"paused",h),g(this.push,"paused",l))}),this.on("removeListener",function(t){"change"===t?(this.pull.removeListener("change",o),this.push.removeListener("change",a)):"denied"===t?(this.pull.removeListener("denied",u),this.push.removeListener("denied",c)):"active"===t?(this.pull.removeListener("active",f),this.push.removeListener("active",d)):"paused"===t&&(this.pull.removeListener("paused",h),this.push.removeListener("paused",l))}),this.pull.on("removeListener",m("pull")),this.push.on("removeListener",m("push"));const y=Promise.all([this.push,this.pull]).then(t=>{const e={push:t[0],pull:t[1]};return this.emit("complete",e),r&&r(null,e),this.removeAllListeners(),e},t=>{if(this.cancel(),r?r(t):this.emit("error",t),this.removeAllListeners(),r)throw t});this.then=function(t,e){return y.then(t,e)},this.catch=function(t){return y.catch(t)}}cancel(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}}ud.plugin(function(t){t.adapter("idb",bf,!0)}).plugin(function(t){t.adapter("http",If,!1),t.adapter("https",If,!1)}).plugin(sp).plugin(function(t){t.replicate=vp,t.sync=_p,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,n,r){return t.constructor.replicate(e,t,n,r)},to:function(e,n,r){return t.constructor.replicate(t,e,n,r)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}});const bp=ud;class kp{constructor(t){this._dbname=t,this._indices=[],this.startDB()}clearTable(){var t=this;return Gu(function*(){const e=(yield t._db.allDocs({include_docs:!0})).rows.map(t=>t.doc);t._db.bulkDocs(e.map(t=>Object.assign(Object.assign({},t),{_deleted:!0})))})()}startDB(){var t=this;return Gu(function*(){t._db=new bp(t._dbname)})()}}let Cp=(()=>{class t extends kp{constructor(){super("Advisor"),this.advisors=[]}generateAdvisors(){var t=this;return Gu(function*(){yield t.clearTable();const e=(yield t.loadAdvisorGenerator("experimentalGeneratorControl"))(Ku);return t.initAllAdvisors(e),yield t._db.bulkDocs(e),t.advisors=e,e})()}isAdvisorRebellious(t){var e=this;return Gu(function*(){return(yield e._db.get(t)).rebellious})()}makeAllAdvisorsReactToAction(t){var e=this;return Gu(function*(){const n=yield e.advisors,r=Ku.playerCharacterKey,i=Ku.maxAffinity,s=Ku.minAffinity;n.forEach(e=>{const n=e.affinities.findIndex(t=>t.name===r);let o=e.affinities[n].affinity;o+=Qu(t,e),o=Math.floor(Math.max(s,Math.min(o,i))),e.affinities[n]={name:r,affinity:o}}),e.updateAllAdvisorRelationshipEffects(n),e.updateAllAdvisorRebellionUtilities(n),yield e._db.bulkDocs(n),e.advisors=n})()}updateAllAdvisorRelationshipEffects(t){const e=Ku.playerCharacterKey;t.forEach(n=>{t.filter(t=>![n.name,e].includes(t.name)).forEach(t=>{const e=n.relationshipEffects.findIndex(e=>e.name===t.name);n.relationshipEffects[e].effect=this.calculateRelationshipEffectOnRebellionUtility(n,t)})})}updateAllAdvisorRebellionUtilities(t){t.forEach(t=>{t.rebellionUtility=this.calculateRebellionUtility(t),t.rebellious=this.determineIfRebellious(t)})}determineIfRebellious(t){return t.rebellionUtility>0}calculateEmperorOpinion(t){const e=Ku.playerCharacterKey,n=t.affinities.filter(e=>e.name!==t.name),r=n.find(t=>t.name===e).affinity;return n.filter(t=>t.name!==Ju).reduce((e,n)=>{var r;return e+((null===(r=t.relationshipEffects.find(t=>t.name===n.name))||void 0===r?void 0:r.effect)||0)},r)}calculateRelationshipEffectOnRebellionUtility(t,e){var n,r;const i=Ku.playerCharacterKey;return(null===(n=t.affinities.find(t=>t.name===e.name))||void 0===n?void 0:n.affinity)*(null===(r=e.affinities.find(t=>t.name===i))||void 0===r?void 0:r.affinity)}calculateRebellionUtility(t){return-this.calculateEmperorOpinion(t)}initAllAdvisors(t){const e=Ku.playerCharacterKey,n=()=>10*Math.random()-5;t.forEach(t=>{const r=Ku.initialAffinityTowardPlayer,i=Boolean(r)||0===r?r:Math.round(n());t.affinities.push({name:e,affinity:i})}),t.forEach((e,r)=>{t.forEach((t,i)=>{if(r===i)return void e.affinities.push({name:e.name,affinity:0});const s=n();e.affinities.push({name:t.name,affinity:Math.round(s)}),e.relationshipEffects.push({name:t.name,effect:this.calculateRelationshipEffectOnRebellionUtility(e,t)})})}),t.forEach(t=>{t.rebellionUtility=this.calculateRebellionUtility(t),t.rebellious=this.determineIfRebellious(t)})}loadAdvisorGenerator(t){return Gu(function*(){return il.get(t)})()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const xp=[{name:"Maintain Barracks",oppositeName:"Repurpose Barracks",promote:[ju],description:"Maintain your military's presence in the empire.",oppositeDescription:"Replace the barracks with something that the people can use.",harm:[Fu]},{name:"Authorize Military March",oppositeName:"Prohibit Military March",description:"Show off the achievements and grandeur of your army before the peasants.",oppositeDescription:"Your subjects don't need to be reminded of what your military is capable of.",promote:["achievement"],harm:[Fu]},{name:"Authorize Festival",oppositeName:"Prohibit Festival",description:"Let the people run wild!",oppositeDescription:"A festival will attract crowds too large for the guards to handle.",promote:["hedonism"],harm:[Pu]},{name:"Maintain Art Museum",oppositeName:"Repurpose Art Museum",promote:[$u],description:"Art stimulates the mind.",oppositeDescription:"Art museums give space to rebels and heretics. You cannot have that.",harm:[Lu]},{name:"Pardon Criminal",oppositeName:"Condemn Criminal",description:"Give the criminal one more chance to do right in life.",oppositeDescription:"You have no tolerance for law-breaking in your empire.",promote:[Vu],harm:[Lu]},{name:"Maintain Hospital",oppositeName:"Repurpose Hospital",description:"Even the sick are under your care.",oppositeDescription:"Maintaining this hospital and tending to the sick shows weakness.",promote:[Fu],harm:[ju]},{name:"Open Food Rations",oppositeName:"Restrict Food Rations",description:"Bring mercy to the needy by giving them access to food.",oppositeDescription:"Bringing out rations will attract crowds too large for the guards to handle.",promote:["benevolence"],harm:[Pu]},{name:"Enforce Mass",oppositeName:"Relax Mass",description:"Remind your subjects who they should pray to.",oppositeDescription:"The faithful will come. The rest may do as they please.",promote:[Lu],harm:[$u]},{name:"Maintain Prison",oppositeName:"Repurpose Prison",description:"Remind would-be troublemakers what their lives can amount to.",oppositeDescription:"The law can be less heavy-handed for a while.",promote:[Pu],harm:[Vu]}],Op=new Map([["defaultGenerator",function(){const t=[];return xp.forEach(e=>{const n={name:e.name,description:e.description,promotes:e.promote.map(t=>qu(t)),harms:e.harm.map(t=>qu(t)),oppositeActionKey:e.oppositeName},r={name:e.oppositeName,description:e.oppositeDescription,promotes:e.harm.map(t=>qu(t)),harms:e.promote.map(t=>qu(t)),oppositeActionKey:e.name};t.push(n,r)}),t}],["experimentalGenerator",function(){const t=[];return xp.forEach(e=>{const n={name:e.name,description:e.description,promotes:e.promote.map(t=>qu(t)),harms:[],oppositeActionKey:e.oppositeName},r={name:e.oppositeName,description:e.oppositeDescription,promotes:e.harm.map(t=>qu(t)),harms:[],oppositeActionKey:e.name};t.push(n,r)}),t}]]);let Ep=(()=>{class t extends kp{constructor(){super("Actions")}generateActions(){var t=this;return Gu(function*(){yield t.clearTable();const e=(yield t.loadActionGenerator("experimentalGenerator"))(null).map(t=>Object.assign({_id:t.name},t));return yield t._db.bulkDocs(e),e})()}getAllActions(){var t=this;return Gu(function*(){return(yield t._db.allDocs({include_docs:!0})).rows.map(t=>t.doc)})()}loadActionGenerator(t){return Gu(function*(){return Op.get(t)})()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Tp=function(t){return t.PROMOTE="promotes",t.HARM="harms",t}({});const Sp=new Set;let Ap;const Ip=new Map;function Dp(t,e){return[t.name,e.name].sort((t,e)=>t.localeCompare(e)).join(".")}function Rp(t){Ip.has(t.name)||Ip.set(t.name,0);const e=Ip.get(t.name);Ip.set(t.name,e+1)}function Mp(t,e){const n=e.length-1;if(Ip.get(t.name)>=n){const e=Ap.findIndex(e=>e.name===t.name);Ap.splice(e,1)}}let Np=!0;const jp=[],Pp=new Map([["defaultGenerator",function(t){Ap||(Ap=t.actionList);const e=Math.floor(Math.random()*Nu.length),n=(r=Tp.PROMOTE,i=e,Ap.find(t=>t[r].includes(i)));var r,i;const s=Ru(Ap.filter(t=>{const e=t.name!==n.name,r=!Sp.has(Dp(n,t));return e&&r}));return function(t,e){const n=Dp(t,e);Sp.add(n)}(n,s),Rp(n),Rp(s),Mp(n,t.actionList),Mp(s,t.actionList),{alternatives:[n,s],chosenAction:null}}],["experimentalGenerator",function(t){if(Np&&(Np=!1,jp.push(...function(t,e){const n=t=>Ru(e.filter(e=>e.promotes.includes(t))),r=Nu.map(t=>qu(t)).filter(e=>!t.cherishes.includes(e)&&!t.despises.includes(e)),i=t.cherishes.map(t=>n(t)),s=t.despises.map(t=>n(t)),o=r.map(t=>n(t));return[[i[0],o[0]],[s[0],o[1]],[i[0],s[0]],[i[0],o[0]],[i[1],o[2]],[s[1],Ru(o)],[i[2],s[2]]]}(t.advisor,t.actionList))),0===jp.length)throw Error("Error generating next decision event: There are no more decision events to show!");const e=jp.shift();let n=[];return n=Math.random()<.5?[0,1]:[1,0],{alternatives:n.map(t=>e[t]),chosenAction:null}}]]);let Lp=(()=>{class t extends kp{constructor(){super("DecisionEvents")}generateDecisionEvent(t){var e=this;return Gu(function*(){return e._generator||(e._generator=yield e.loadDecisionEventGenerator("experimentalGenerator")),Object.assign(Object.assign({},e._generator(t)),{_id:""+(new Date).getTime()})})()}loadDecisionEventGenerator(t){return Gu(function*(){return Pp.get(t)})()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fp=(()=>{class t{constructor(t,e,n,r){this._logger=t,this._advisorService=e,this._actionService=n,this._decisionEventService=r,this.$beforeNextRound=new ja,this.$onStart=new ja,this.$onNextRound=new ja,this.$onGameOver=new ja,this._round=0,this._currentDecisionEvent=null,this._decisionEventHistory=[]}get advisors(){return this._advisorService.advisors}get currentDecisionEvent(){return this._currentDecisionEvent}get isGameOver(){return this._round>=7}get round(){return this._round}get maxRounds(){return 7}get isPlayerOverThrown(){const t=this.advisors,e=t.filter(t=>t.rebellious),n=t.filter(t=>!t.rebellious);return e.length>n.length}onStart(){var t=this;return Gu(function*(){yield t._advisorService.generateAdvisors();const e=yield t._actionService.generateActions();t._logger.logData({type:Zu.INIT,playthroughNo:1,round:t._round,actions:e}),t._round=0,yield t.generateDecisionEvent(),t.$onStart.emit()})()}onChooseAction(t){var e=this;return Gu(function*(){e._currentDecisionEvent&&(e._currentDecisionEvent.chosenAction=t,e._decisionEventHistory.push(e._currentDecisionEvent),e._logger.logData({type:Zu.POST_DECISION,decisionEvent:e._currentDecisionEvent,playthroughNo:1,round:e._round}),e.$beforeNextRound.emit({round:e._round,chosenAction:t,alternateAction:e._currentDecisionEvent.alternatives.find(e=>e.name!==t.name),reactions:e.advisors.map(e=>({advisor:e,reaction:Qu(t,e)}))}),yield e._advisorService.makeAllAdvisorsReactToAction(t),e._round+=1,e.$onNextRound.emit(e._round),e.isGameOver?e.$onGameOver.emit():yield e.generateDecisionEvent())})()}generateDecisionEvent(){var t=this;return Gu(function*(){const e=yield t._actionService.getAllActions();return t._currentDecisionEvent=yield t._decisionEventService.generateDecisionEvent({actionList:e,advisor:t.advisors[0]}),t._logger.logData({type:Zu.PRE_DECISION,decisionEvent:t._currentDecisionEvent,playthroughNo:1,round:t._round}),t._currentDecisionEvent})()}getDecisionEventAtRound(t){return this._decisionEventHistory[t]}}return t.\u0275fac=function(e){return new(e||t)(sr(Uu),sr(Cp),sr(Ep),sr(Lp))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Vp={advisorList:[],actionList:[]};let $p=(()=>{class t{constructor(t,e){this._gameLogic=t,this._logger=e}run(){var t=this;return Gu(function*(){for(let e=0;e<1;e+=1)for(console.log("Running playthrough #",e),t._gameLogic.onStart(),yield t._logger.logData({playthroughNo:e,round:t._gameLogic.round,type:Zu.INIT,actions:Vp.actionList}),t._gameLogic.generateDecisionEvent();!t._gameLogic.isGameOver;){const n=t._gameLogic.round,r=Object.assign({},t._gameLogic.currentDecisionEvent);yield t._logger.logData({playthroughNo:e,round:n,type:Zu.PRE_DECISION,decisionEvent:r}),yield t._logger.logData({playthroughNo:e,round:n,type:Zu.ADVISOR_STATE,advisors:Vp.advisorList});const i=t.chooseAction();yield t._logger.logData({playthroughNo:e,round:n,type:Zu.POST_DECISION,decisionEvent:Object.assign(Object.assign({},r),{chosenAction:i})}),yield t._logger.logData({playthroughNo:e,round:n,type:Zu.ADVISOR_STATE,advisors:Vp.advisorList})}})()}chooseAction(){const t=this._gameLogic.currentDecisionEvent,e=null==t?void 0:t.alternatives,n=e[Math.floor(Math.random()*e.length)];return this._gameLogic.onChooseAction(n),n}}return t.\u0275fac=function(e){return new(e||t)(sr(Fp),sr(Uu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class qp extends Error{}class Hp extends qp{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Bp extends qp{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class zp extends qp{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Zp extends qp{}class Up extends qp{constructor(t){super(`Invalid unit ${t}`)}}class Wp extends qp{}class Gp extends qp{constructor(){super("Zone is an abstract class")}}const Kp="numeric",Jp="short",Yp="long",Qp={year:Kp,month:Kp,day:Kp},Xp={year:Kp,month:Jp,day:Kp},tm={year:Kp,month:Jp,day:Kp,weekday:Jp},em={year:Kp,month:Yp,day:Kp},nm={year:Kp,month:Yp,day:Kp,weekday:Yp},rm={hour:Kp,minute:Kp},im={hour:Kp,minute:Kp,second:Kp},sm={hour:Kp,minute:Kp,second:Kp,timeZoneName:Jp},om={hour:Kp,minute:Kp,second:Kp,timeZoneName:Yp},am={hour:Kp,minute:Kp,hourCycle:"h23"},cm={hour:Kp,minute:Kp,second:Kp,hourCycle:"h23"},um={hour:Kp,minute:Kp,second:Kp,hourCycle:"h23",timeZoneName:Jp},lm={hour:Kp,minute:Kp,second:Kp,hourCycle:"h23",timeZoneName:Yp},hm={year:Kp,month:Kp,day:Kp,hour:Kp,minute:Kp},dm={year:Kp,month:Kp,day:Kp,hour:Kp,minute:Kp,second:Kp},fm={year:Kp,month:Jp,day:Kp,hour:Kp,minute:Kp},pm={year:Kp,month:Jp,day:Kp,hour:Kp,minute:Kp,second:Kp},mm={year:Kp,month:Jp,day:Kp,weekday:Jp,hour:Kp,minute:Kp},gm={year:Kp,month:Yp,day:Kp,hour:Kp,minute:Kp,timeZoneName:Jp},ym={year:Kp,month:Yp,day:Kp,hour:Kp,minute:Kp,second:Kp,timeZoneName:Jp},vm={year:Kp,month:Yp,day:Kp,weekday:Yp,hour:Kp,minute:Kp,timeZoneName:Yp},_m={year:Kp,month:Yp,day:Kp,weekday:Yp,hour:Kp,minute:Kp,second:Kp,timeZoneName:Yp};class wm{get type(){throw new Gp}get name(){throw new Gp}get ianaName(){return this.name}get isUniversal(){throw new Gp}offsetName(t,e){throw new Gp}formatOffset(t,e){throw new Gp}offset(t){throw new Gp}equals(t){throw new Gp}get isValid(){throw new Gp}}let bm=null;class km extends wm{static get instance(){return null===bm&&(bm=new km),bm}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:n}){return pg(t,e,n)}formatOffset(t,e){return vg(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return"system"===t.type}get isValid(){return!0}}let Cm={};const xm={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let Om={};class Em extends wm{static create(t){return Om[t]||(Om[t]=new Em(t)),Om[t]}static resetCache(){Om={},Cm={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(ck){return!1}}constructor(t){super(),this.zoneName=t,this.valid=Em.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:n}){return pg(t,e,n,this.name)}formatOffset(t,e){return vg(this.offset(t),e)}offset(t){const e=new Date(t);if(isNaN(e))return NaN;const n=(Cm[r=this.name]||(Cm[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Cm[r]);var r;let[i,s,o,a,c,u,l]=n.formatToParts?function(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:t,value:e}=n[i],s=xm[t];"era"===t?r[s]=e:Jm(s)||(r[s]=parseInt(e,10))}return r}(n,e):function(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,c,u,l]=r;return[o,i,s,a,c,u,l]}(n,e);"BC"===a&&(i=1-Math.abs(i));let h=+e;const d=h%1e3;return h-=d>=0?d:1e3+d,(hg({year:i,month:s,day:o,hour:24===c?0:c,minute:u,second:l,millisecond:0})-h)/6e4}equals(t){return"iana"===t.type&&t.name===this.name}get isValid(){return this.valid}}let Tm={},Sm={};function Am(t,e={}){const n=JSON.stringify([t,e]);let r=Sm[n];return r||(r=new Intl.DateTimeFormat(t,e),Sm[n]=r),r}let Im={},Dm={},Rm=null;function Mm(t,e,n,r,i){const s=t.listingMode(n);return"error"===s?null:"en"===s?r(e):i(e)}class Nm{constructor(t,e,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:i,...s}=n;if(!e||Object.keys(s).length>0){const e={useGrouping:!1,...n};n.padTo>0&&(e.minimumIntegerDigits=n.padTo),this.inf=function(t,e={}){const n=JSON.stringify([t,e]);let r=Im[n];return r||(r=new Intl.NumberFormat(t,e),Im[n]=r),r}(t,e)}}format(t){if(this.inf){const e=this.floor?Math.floor(t):t;return this.inf.format(e)}return rg(this.floor?Math.floor(t):ag(t,3),this.padTo)}}class jm{constructor(t,e,n){let r;if(this.opts=n,t.zone.isUniversal){const e=t.offset/60*-1,i=e>=0?`Etc/GMT+${e}`:`Etc/GMT${e}`;0!==t.offset&&Em.create(i).valid?(r=i,this.dt=t):(r="UTC",this.dt=n.timeZoneName||0===t.offset?t:Nv.fromMillis(t.ts+60*t.offset*1e3))}else"system"===t.zone.type?this.dt=t:(this.dt=t,r=t.zone.name);const i={...this.opts};r&&(i.timeZone=r),this.dtf=Am(e,i)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class Pm{constructor(t,e,n){this.opts={style:"long",...n},!e&&Xm()&&(this.rtf=function(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=Dm[i];return s||(s=new Intl.RelativeTimeFormat(t,e),Dm[i]=s),s}(t,n))}format(t,e){return this.rtf?this.rtf.format(t,e):function(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(t);if("auto"===n&&s){const n="days"===t;switch(e){case 1:return n?"tomorrow":`next ${i[t][0]}`;case-1:return n?"yesterday":`last ${i[t][0]}`;case 0:return n?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),c=1===a,u=i[t],l=r?c?u[1]:u[2]||u[1]:c?i[t][0]:t;return o?`${a} ${l} ago`:`in ${a} ${l}`}(e,t,this.opts.numeric,"long"!==this.opts.style)}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}}class Lm{static fromOpts(t){return Lm.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,e,n,r=!1){const i=t||Km.defaultLocale,s=i||(r?"en-US":Rm||(Rm=(new Intl.DateTimeFormat).resolvedOptions().locale,Rm));return new Lm(s,e||Km.defaultNumberingSystem,n||Km.defaultOutputCalendar,i)}static resetCache(){Rm=null,Sm={},Im={},Dm={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:n}={}){return Lm.create(t,e,n)}constructor(t,e,n,r){const[i,s,o]=function(t){const e=t.indexOf("-u-");if(-1===e)return[t];{let n;const r=t.substring(0,e);try{n=Am(t).resolvedOptions()}catch(ck){n=Am(r).resolvedOptions()}const{numberingSystem:i,calendar:s}=n;return[r,i,s]}}(t);this.locale=i,this.numberingSystem=e||s||null,this.outputCalendar=n||o||null,this.intl=function(t,e,n){return n||e?(t+="-u",n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`),t):t}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){var t;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(t=this).numberingSystem||"latn"===t.numberingSystem)&&("latn"===t.numberingSystem||!t.locale||t.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"}clone(t){return t&&0!==Object.getOwnPropertyNames(t).length?Lm.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1,n=!0){return Mm(this,t,n,Cg,()=>{const n=e?{month:t,day:"numeric"}:{month:t},r=e?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=function(t){const e=[];for(let n=1;n<=12;n++){const r=Nv.utc(2016,n,1);e.push(t(r))}return e}(t=>this.extract(t,n,"month"))),this.monthsCache[r][t]})}weekdays(t,e=!1,n=!0){return Mm(this,t,n,Tg,()=>{const n=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=e?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=function(t){const e=[];for(let n=1;n<=7;n++){const r=Nv.utc(2016,11,13+n);e.push(t(r))}return e}(t=>this.extract(t,n,"weekday"))),this.weekdaysCache[r][t]})}meridiems(t=!0){return Mm(this,void 0,t,()=>Sg,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Nv.utc(2016,11,13,9),Nv.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(t,e=!0){return Mm(this,t,e,Rg,()=>{const e={era:t};return this.eraCache[t]||(this.eraCache[t]=[Nv.utc(-40,1,1),Nv.utc(2017,1,1)].map(t=>this.extract(t,e,"era"))),this.eraCache[t]})}extract(t,e,n){const r=this.dtFormatter(t,e).formatToParts().find(t=>t.type.toLowerCase()===n);return r?r.value:null}numberFormatter(t={}){return new Nm(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new jm(t,this.intl,e)}relFormatter(t={}){return new Pm(this.intl,this.isEnglish(),t)}listFormatter(t={}){return function(t,e={}){const n=JSON.stringify([t,e]);let r=Tm[n];return r||(r=new Intl.ListFormat(t,e),Tm[n]=r),r}(this.intl,t)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Fm=null;class Vm extends wm{static get utcInstance(){return null===Fm&&(Fm=new Vm(0)),Fm}static instance(t){return 0===t?Vm.utcInstance:new Vm(t)}static parseSpecifier(t){if(t){const e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new Vm(mg(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${vg(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${vg(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return vg(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return"fixed"===t.type&&t.fixed===this.fixed}get isValid(){return!0}}class $m extends wm{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function qm(t,e){if(Jm(t)||null===t)return e;if(t instanceof wm)return t;if("string"==typeof t){const n=t.toLowerCase();return"default"===n?e:"local"===n||"system"===n?km.instance:"utc"===n||"gmt"===n?Vm.utcInstance:Vm.parseSpecifier(n)||Em.create(t)}return Ym(t)?Vm.instance(t):"object"==typeof t&&t.offset&&"number"==typeof t.offset?t:new $m(t)}let Hm,Bm=()=>Date.now(),zm="system",Zm=null,Um=null,Wm=null,Gm=60;class Km{static get now(){return Bm}static set now(t){Bm=t}static set defaultZone(t){zm=t}static get defaultZone(){return qm(zm,km.instance)}static get defaultLocale(){return Zm}static set defaultLocale(t){Zm=t}static get defaultNumberingSystem(){return Um}static set defaultNumberingSystem(t){Um=t}static get defaultOutputCalendar(){return Wm}static set defaultOutputCalendar(t){Wm=t}static get twoDigitCutoffYear(){return Gm}static set twoDigitCutoffYear(t){Gm=t%100}static get throwOnInvalid(){return Hm}static set throwOnInvalid(t){Hm=t}static resetCaches(){Lm.resetCache(),Em.resetCache()}}function Jm(t){return void 0===t}function Ym(t){return"number"==typeof t}function Qm(t){return"number"==typeof t&&t%1==0}function Xm(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(ck){return!1}}function tg(t,e,n){if(0!==t.length)return t.reduce((t,r)=>{const i=[e(r),r];return t&&n(t[0],i[0])===t[0]?t:i},null)[1]}function eg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ng(t,e,n){return Qm(t)&&t>=e&&t<=n}function rg(t,e=2){let n;return n=t<0?"-"+(""+-t).padStart(e,"0"):(""+t).padStart(e,"0"),n}function ig(t){return Jm(t)||null===t||""===t?void 0:parseInt(t,10)}function sg(t){return Jm(t)||null===t||""===t?void 0:parseFloat(t)}function og(t){if(!Jm(t)&&null!==t&&""!==t){const e=1e3*parseFloat("0."+t);return Math.floor(e)}}function ag(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function cg(t){return t%4==0&&(t%100!=0||t%400==0)}function ug(t){return cg(t)?366:365}function lg(t,e){const n=(r=e-1)-12*Math.floor(r/12)+1;var r;return 2===n?cg(t+(e-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function hg(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function dg(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===e||3===r?53:52}function fg(t){return t>99?t:t>Km.twoDigitCutoffYear?1900+t:2e3+t}function pg(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(t=>"timezonename"===t.type.toLowerCase());return a?a.value:null}function mg(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function gg(t){const e=Number(t);if("boolean"==typeof t||""===t||Number.isNaN(e))throw new Wp(`Invalid unit value ${t}`);return e}function yg(t,e){const n={};for(const r in t)if(eg(t,r)){const i=t[r];if(null==i)continue;n[e(r)]=gg(i)}return n}function vg(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${rg(n,2)}:${rg(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${rg(n,2)}${rg(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function _g(t){return function(t,e){return["hour","minute","second","millisecond"].reduce((e,n)=>(e[n]=t[n],e),{})}(t)}const wg=["January","February","March","April","May","June","July","August","September","October","November","December"],bg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kg=["J","F","M","A","M","J","J","A","S","O","N","D"];function Cg(t){switch(t){case"narrow":return[...kg];case"short":return[...bg];case"long":return[...wg];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const xg=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Og=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Eg=["M","T","W","T","F","S","S"];function Tg(t){switch(t){case"narrow":return[...Eg];case"short":return[...Og];case"long":return[...xg];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Sg=["AM","PM"],Ag=["Before Christ","Anno Domini"],Ig=["BC","AD"],Dg=["B","A"];function Rg(t){switch(t){case"narrow":return[...Dg];case"short":return[...Ig];case"long":return[...Ag];default:return null}}function Mg(t,e){let n="";for(const r of t)n+=r.literal?r.val:e(r.val);return n}const Ng={D:Qp,DD:Xp,DDD:em,DDDD:nm,t:rm,tt:im,ttt:sm,tttt:om,T:am,TT:cm,TTT:um,TTTT:lm,f:hm,ff:fm,fff:gm,ffff:vm,F:dm,FF:pm,FFF:ym,FFFF:_m};class jg{static create(t,e={}){return new jg(t,e)}static parseFormat(t){let e=null,n="",r=!1;const i=[];for(let s=0;s<t.length;s++){const o=t.charAt(s);"'"===o?(n.length>0&&i.push({literal:r,val:n}),e=null,n="",r=!r):r||o===e?n+=o:(n.length>0&&i.push({literal:!1,val:n}),n=o,e=o)}return n.length>0&&i.push({literal:r,val:n}),i}static macroTokenToFormatOpts(t){return Ng[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}formatDateTime(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).format()}formatDateTimeParts(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).formatToParts()}resolvedOptions(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return rg(t,e);const n={...this.opts};return e>0&&(n.padTo=e),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,e){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,i=(e,n)=>this.loc.extract(t,e,n),s=e=>t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):"",o=(e,r)=>n?function(t,e){return Cg(e)[t.month-1]}(t,e):i(r?{month:e}:{month:e,day:"numeric"},"month"),a=(e,r)=>n?function(t,e){return Tg(e)[t.weekday-1]}(t,e):i(r?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday"),c=e=>{const n=jg.macroTokenToFormatOpts(e);return n?this.formatWithSystemDefault(t,n):e},u=e=>n?function(t,e){return Rg(e)[t.year<0?0:1]}(t,e):i({era:e},"era");return Mg(jg.parseFormat(e),e=>{switch(e){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12==0?12:t.hour%12);case"hh":return this.num(t.hour%12==0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return n?function(t){return Sg[t.hour<12?0:1]}(t):i({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return r?i({day:"numeric"},"day"):this.num(t.day);case"dd":return r?i({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return r?i({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?i({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return r?i({month:"numeric"},"month"):this.num(t.month);case"MM":return r?i({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return r?i({year:"numeric"},"year"):this.num(t.year);case"yy":return r?i({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?i({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?i({year:"numeric"},"year"):this.num(t.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return c(e)}})}formatDurationFromString(t,e){const n=t=>{switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=jg.parseFormat(e),i=r.reduce((t,{literal:e,val:n})=>e?t:t.concat(n),[]);return Mg(r,(t=>e=>{const r=n(e);return r?this.num(t.get(r),e.length):e})(t.shiftTo(...i.map(n).filter(t=>t))))}}class Pg{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Lg=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Fg(...t){const e=t.reduce((t,e)=>t+e.source,"");return RegExp(`^${e}$`)}function Vg(...t){return e=>t.reduce(([t,n,r],i)=>{const[s,o,a]=i(e,r);return[{...t,...s},o||n,a]},[{},null,1]).slice(0,2)}function $g(t,...e){if(null==t)return[null,null];for(const[n,r]of e){const e=n.exec(t);if(e)return r(e)}return[null,null]}function qg(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=ig(e[n+i]);return[r,null,n+i]}}const Hg=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Bg=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zg=RegExp(`${Bg.source}(?:${Hg.source}?(?:\\[(${Lg.source})\\])?)?`),Zg=RegExp(`(?:T${zg.source})?`),Ug=qg("weekYear","weekNumber","weekDay"),Wg=qg("year","ordinal"),Gg=RegExp(`${Bg.source} ?(?:${Hg.source}|(${Lg.source}))?`),Kg=RegExp(`(?: ${Gg.source})?`);function Jg(t,e,n){const r=t[e];return Jm(r)?n:ig(r)}function Yg(t,e){return[{hours:Jg(t,e,0),minutes:Jg(t,e+1,0),seconds:Jg(t,e+2,0),milliseconds:og(t[e+3])},null,e+4]}function Qg(t,e){const n=!t[e]&&!t[e+1],r=mg(t[e+1],t[e+2]);return[{},n?null:Vm.instance(r),e+3]}function Xg(t,e){return[{},t[e]?Em.create(t[e]):null,e+1]}const ty=RegExp(`^T?${Bg.source}$`),ey=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function ny(t){const[e,n,r,i,s,o,a,c,u]=t,l="-"===e[0],h=c&&"-"===c[0],d=(t,e=!1)=>void 0!==t&&(e||t&&l)?-t:t;return[{years:d(sg(n)),months:d(sg(r)),weeks:d(sg(i)),days:d(sg(s)),hours:d(sg(o)),minutes:d(sg(a)),seconds:d(sg(c),"-0"===c),milliseconds:d(og(u),h)}]}const ry={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function iy(t,e,n,r,i,s,o){const a={year:2===e.length?fg(ig(e)):ig(e),month:bg.indexOf(n)+1,day:ig(r),hour:ig(i),minute:ig(s)};return o&&(a.second=ig(o)),t&&(a.weekday=t.length>3?xg.indexOf(t)+1:Og.indexOf(t)+1),a}const sy=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function oy(t){const[,e,n,r,i,s,o,a,c,u,l,h]=t,d=iy(e,i,r,n,s,o,a);let f;return f=c?ry[c]:u?0:mg(l,h),[d,new Vm(f)]}const ay=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,cy=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,uy=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ly(t){const[,e,n,r,i,s,o,a]=t;return[iy(e,i,r,n,s,o,a),Vm.utcInstance]}function hy(t){const[,e,n,r,i,s,o,a]=t;return[iy(e,a,n,r,i,s,o),Vm.utcInstance]}const dy=Fg(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Zg),fy=Fg(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Zg),py=Fg(/(\d{4})-?(\d{3})/,Zg),my=Fg(zg),gy=Vg(function(t,e){return[{year:Jg(t,e),month:Jg(t,e+1,1),day:Jg(t,e+2,1)},null,e+3]},Yg,Qg,Xg),yy=Vg(Ug,Yg,Qg,Xg),vy=Vg(Wg,Yg,Qg,Xg),_y=Vg(Yg,Qg,Xg),wy=Vg(Yg),by=Fg(/(\d{4})-(\d\d)-(\d\d)/,Kg),ky=Fg(Gg),Cy=Vg(Yg,Qg,Xg),xy={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Oy={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...xy},Ey={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...xy},Ty=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Sy=Ty.slice(0).reverse();function Ay(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Dy(r)}function Iy(t,e,n,r,i){const s=t[i][n],o=e[n]/s,a=Math.sign(o)!==Math.sign(r[i])&&0!==r[i]&&Math.abs(o)<=1?function(t){return t<0?Math.floor(t):Math.ceil(t)}(o):Math.trunc(o);r[i]+=a,e[n]-=a*s}class Dy{constructor(t){const e="longterm"===t.conversionAccuracy||!1;let n=e?Ey:Oy;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||Lm.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,e){return Dy.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(null==t||"object"!=typeof t)throw new Wp("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new Dy({values:yg(t,Dy.normalizeUnit),loc:Lm.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(Ym(t))return Dy.fromMillis(t);if(Dy.isDuration(t))return t;if("object"==typeof t)return Dy.fromObject(t);throw new Wp(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){const[n]=function(t){return $g(t,[ey,ny])}(t);return n?Dy.fromObject(n,e):Dy.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){const[n]=function(t){return $g(t,[ty,wy])}(t);return n?Dy.fromObject(n,e):Dy.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new Wp("need to specify a reason the Duration is invalid");const n=t instanceof Pg?t:new Pg(t,e);if(Km.throwOnInvalid)throw new zp(n);return new Dy({invalid:n})}static normalizeUnit(t){const e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t?t.toLowerCase():t];if(!e)throw new Up(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){const n={...e,floor:!1!==e.round&&!1!==e.floor};return this.isValid?jg.create(this.loc,n).formatDurationFromString(this,t):"Invalid Duration"}toHuman(t={}){const e=Ty.map(e=>{const n=this.values[e];return Jm(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:e.slice(0,-1)}).format(n)}).filter(t=>t);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return 0!==this.years&&(t+=this.years+"Y"),0===this.months&&0===this.quarters||(t+=this.months+3*this.quarters+"M"),0!==this.weeks&&(t+=this.weeks+"W"),0!==this.days&&(t+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(t+="T"),0!==this.hours&&(t+=this.hours+"H"),0!==this.minutes&&(t+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(t+=ag(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===t&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const e=this.toMillis();if(e<0||e>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const n=this.shiftTo("hours","minutes","seconds","milliseconds");let r="basic"===t.format?"hhmm":"hh:mm";t.suppressSeconds&&0===n.seconds&&0===n.milliseconds||(r+="basic"===t.format?"ss":":ss",t.suppressMilliseconds&&0===n.milliseconds||(r+=".SSS"));let i=n.toFormat(r);return t.includePrefix&&(i="T"+i),i}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const e=Dy.fromDurationLike(t),n={};for(const r of Ty)(eg(e.values,r)||eg(this.values,r))&&(n[r]=e.get(r)+this.get(r));return Ay(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const e=Dy.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=gg(t(this.values[n],n));return Ay(this,{values:e},!0)}get(t){return this[Dy.normalizeUnit(t)]}set(t){return this.isValid?Ay(this,{values:{...this.values,...yg(t,Dy.normalizeUnit)}}):this}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:n,matrix:r}={}){return Ay(this,{loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:r,conversionAccuracy:n})}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return function(t,e){Sy.reduce((n,r)=>Jm(e[r])?n:(n&&Iy(t,e,n,e,r),r),null)}(this.matrix,t),Ay(this,{values:t},!0)}rescale(){return this.isValid?Ay(this,{values:function(t){const e={};for(const[n,r]of Object.entries(t))0!==r&&(e[n]=r);return e}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...t){if(!this.isValid)return this;if(0===t.length)return this;t=t.map(t=>Dy.normalizeUnit(t));const e={},n={},r=this.toObject();let i;for(const s of Ty)if(t.indexOf(s)>=0){i=s;let t=0;for(const e in n)t+=this.matrix[e][s]*n[e],n[e]=0;Ym(r[s])&&(t+=r[s]);const o=Math.trunc(t);e[s]=o,n[s]=(1e3*t-1e3*o)/1e3;for(const n in r)Ty.indexOf(n)>Ty.indexOf(s)&&Iy(this.matrix,r,n,e,s)}else Ym(r[s])&&(n[s]=r[s]);for(const s in n)0!==n[s]&&(e[i]+=s===i?n[s]:n[s]/this.matrix[i][s]);return Ay(this,{values:e},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const e of Object.keys(this.values))t[e]=0===this.values[e]?0:-this.values[e];return Ay(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid)return!1;if(!this.loc.equals(t.loc))return!1;for(const r of Ty)if(n=t.values[r],!(void 0===(e=this.values[r])||0===e?void 0===n||0===n:e===n))return!1;var e,n;return!0}}const Ry="Invalid Interval";class My{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new Wp("need to specify a reason the Interval is invalid");const n=t instanceof Pg?t:new Pg(t,e);if(Km.throwOnInvalid)throw new Bp(n);return new My({invalid:n})}static fromDateTimes(t,e){const n=jv(t),r=jv(e),i=function(t,e){return t&&t.isValid?e&&e.isValid?e<t?My.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null:My.invalid("missing or invalid end"):My.invalid("missing or invalid start")}(n,r);return null==i?new My({start:n,end:r}):i}static after(t,e){const n=Dy.fromDurationLike(e),r=jv(t);return My.fromDateTimes(r,r.plus(n))}static before(t,e){const n=Dy.fromDurationLike(e),r=jv(t);return My.fromDateTimes(r.minus(n),r)}static fromISO(t,e){const[n,r]=(t||"").split("/",2);if(n&&r){let t,i,s,o;try{t=Nv.fromISO(n,e),i=t.isValid}catch(r){i=!1}try{s=Nv.fromISO(r,e),o=s.isValid}catch(r){o=!1}if(i&&o)return My.fromDateTimes(t,s);if(i){const n=Dy.fromISO(r,e);if(n.isValid)return My.after(t,n)}else if(o){const t=Dy.fromISO(n,e);if(t.isValid)return My.before(s,t)}}return My.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const e=this.start.startOf(t),n=this.end.startOf(t);return Math.floor(n.diff(e,t).get(t))+1}hasSame(t){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,t))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return!!this.isValid&&this.s>t}isBefore(t){return!!this.isValid&&this.e<=t}contains(t){return!!this.isValid&&this.s<=t&&this.e>t}set({start:t,end:e}={}){return this.isValid?My.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];const e=t.map(jv).filter(t=>this.contains(t)).sort(),n=[];let{s:r}=this,i=0;for(;r<this.e;){const t=e[i]||this.e,s=+t>+this.e?this.e:t;n.push(My.fromDateTimes(r,s)),r=s,i+=1}return n}splitBy(t){const e=Dy.fromDurationLike(t);if(!this.isValid||!e.isValid||0===e.as("milliseconds"))return[];let n,{s:r}=this,i=1;const s=[];for(;r<this.e;){const t=this.start.plus(e.mapUnits(t=>t*i));n=+t>+this.e?this.e:t,s.push(My.fromDateTimes(r,n)),r=n,i+=1}return s}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return!!this.isValid&&+this.e==+t.s}abutsEnd(t){return!!this.isValid&&+t.e==+this.s}engulfs(t){return!!this.isValid&&this.s<=t.s&&this.e>=t.e}equals(t){return!(!this.isValid||!t.isValid)&&this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const e=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return e>=n?null:My.fromDateTimes(e,n)}union(t){return this.isValid?My.fromDateTimes(this.s<t.s?this.s:t.s,this.e>t.e?this.e:t.e):this}static merge(t){const[e,n]=t.sort((t,e)=>t.s-e.s).reduce(([t,e],n)=>e?e.overlaps(n)||e.abutsStart(n)?[t,e.union(n)]:[t.concat([e]),n]:[t,n],[[],null]);return n&&e.push(n),e}static xor(t){let e=null,n=0;const r=[],i=t.map(t=>[{time:t.s,type:"s"},{time:t.e,type:"e"}]),s=Array.prototype.concat(...i).sort((t,e)=>t.time-e.time);for(const o of s)n+="s"===o.type?1:-1,1===n?e=o.time:(e&&+e!=+o.time&&r.push(My.fromDateTimes(e,o.time)),e=null);return My.merge(r)}difference(...t){return My.xor([this].concat(t)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Ry}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ry}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ry}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ry}toFormat(t,{separator:e=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:Ry}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):Dy.invalid(this.invalidReason)}mapEndpoints(t){return My.fromDateTimes(t(this.s),t(this.e))}}class Ny{static hasDST(t=Km.defaultZone){const e=Nv.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return Em.isValidZone(t)}static normalizeZone(t){return qm(t,Km.defaultZone)}static months(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||Lm.create(e,n,i)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||Lm.create(e,n,i)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Lm.create(e,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Lm.create(e,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Lm.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return Lm.create(e,null,"gregory").eras(t)}static features(){return{relative:Xm()}}}function jy(t,e){const n=t=>t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Dy.fromMillis(r).as("days"))}const Py={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Ly={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Fy=Py.hanidec.replace(/[\[|\]]/g,"").split("");function Vy({numberingSystem:t},e=""){return new RegExp(`${Py[t||"latn"]}${e}`)}function $y(t,e=(t=>t)){return{regex:t,deser:([t])=>e(function(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(-1!==t[n].search(Py.hanidec))e+=Fy.indexOf(t[n]);else for(const t in Ly){const[n,i]=Ly[t];r>=n&&r<=i&&(e+=r-n)}}return parseInt(e,10)}return e}(t))}}const qy=`[ ${String.fromCharCode(160)}]`,Hy=new RegExp(qy,"g");function By(t){return t.replace(/\./g,"\\.?").replace(Hy,qy)}function zy(t){return t.replace(/\./g,"").replace(Hy," ").toLowerCase()}function Zy(t,e){return null===t?null:{regex:RegExp(t.map(By).join("|")),deser:([n])=>t.findIndex(t=>zy(n)===zy(t))+e}}function Uy(t,e){return{regex:t,deser:([,t,e])=>mg(t,e),groups:e}}function Wy(t){return{regex:t,deser:([t])=>t}}const Gy={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Ky=null;function Jy(t,e){return Array.prototype.concat(...t.map(t=>function(t,e){if(t.literal)return t;const n=Qy(jg.macroTokenToFormatOpts(t.val),e);return null==n||n.includes(void 0)?t:n}(t,e)))}function Yy(t,e,n){const r=Jy(jg.parseFormat(n),t),i=r.map(e=>function(t,e){const n=Vy(e),r=Vy(e,"{2}"),i=Vy(e,"{3}"),s=Vy(e,"{4}"),o=Vy(e,"{6}"),a=Vy(e,"{1,2}"),c=Vy(e,"{1,3}"),u=Vy(e,"{1,6}"),l=Vy(e,"{1,9}"),h=Vy(e,"{2,4}"),d=Vy(e,"{4,6}"),f=t=>{return{regex:RegExp((e=t.val,e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([t])=>t,literal:!0};var e},p=(p=>{if(t.literal)return f(p);switch(p.val){case"G":return Zy(e.eras("short",!1),0);case"GG":return Zy(e.eras("long",!1),0);case"y":return $y(u);case"yy":return $y(h,fg);case"yyyy":return $y(s);case"yyyyy":return $y(d);case"yyyyyy":return $y(o);case"M":return $y(a);case"MM":return $y(r);case"MMM":return Zy(e.months("short",!0,!1),1);case"MMMM":return Zy(e.months("long",!0,!1),1);case"L":return $y(a);case"LL":return $y(r);case"LLL":return Zy(e.months("short",!1,!1),1);case"LLLL":return Zy(e.months("long",!1,!1),1);case"d":return $y(a);case"dd":return $y(r);case"o":return $y(c);case"ooo":return $y(i);case"HH":return $y(r);case"H":return $y(a);case"hh":return $y(r);case"h":return $y(a);case"mm":return $y(r);case"m":case"q":return $y(a);case"qq":return $y(r);case"s":return $y(a);case"ss":return $y(r);case"S":return $y(c);case"SSS":return $y(i);case"u":return Wy(l);case"uu":return Wy(a);case"uuu":return $y(n);case"a":return Zy(e.meridiems(),0);case"kkkk":return $y(s);case"kk":return $y(h,fg);case"W":return $y(a);case"WW":return $y(r);case"E":case"c":return $y(n);case"EEE":return Zy(e.weekdays("short",!1,!1),1);case"EEEE":return Zy(e.weekdays("long",!1,!1),1);case"ccc":return Zy(e.weekdays("short",!0,!1),1);case"cccc":return Zy(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Uy(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Uy(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Wy(/[a-z_+-/]{1,256}?/i);default:return f(p)}})(t)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return p.token=t,p}(e,t)),s=i.find(t=>t.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{const[t,n]=function(t){return[`^${t.map(t=>t.regex).reduce((t,e)=>`${t}(${e.source})`,"")}$`,t]}(i),s=RegExp(t,"i"),[o,a]=function(t,e,n){const r=t.match(e);if(r){const t={};let e=1;for(const i in n)if(eg(n,i)){const s=n[i],o=s.groups?s.groups+1:1;!s.literal&&s.token&&(t[s.token.val[0]]=s.deser(r.slice(e,e+o))),e+=o}return[r,t]}return[r,{}]}(e,s,n),[c,u,l]=a?function(t){let e,n=null;return Jm(t.z)||(n=Em.create(t.z)),Jm(t.Z)||(n||(n=new Vm(t.Z)),e=t.Z),Jm(t.q)||(t.M=3*(t.q-1)+1),Jm(t.h)||(t.h<12&&1===t.a?t.h+=12:12===t.h&&0===t.a&&(t.h=0)),0===t.G&&t.y&&(t.y=-t.y),Jm(t.u)||(t.S=og(t.u)),[Object.keys(t).reduce((e,n)=>{const r=(t=>{switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(e[r]=t[n]),e},{}),n,e]}(a):[null,null,void 0];if(eg(a,"a")&&eg(a,"H"))throw new Zp("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:s,rawMatches:o,matches:a,result:c,zone:u,specificOffset:l}}}function Qy(t,e){return t?jg.create(e,t).formatDateTimeParts((Ky||(Ky=Nv.fromMillis(1555555555555)),Ky)).map(e=>function(t,e,n){const{type:r,value:i}=t;if("literal"===r)return{literal:!0,val:i};let s=Gy[r];return"object"==typeof s&&(s=s[n[r]]),s?{literal:!1,val:s}:void 0}(e,0,t)):null}const Xy=[0,31,59,90,120,151,181,212,243,273,304,334],tv=[0,31,60,91,121,152,182,213,244,274,305,335];function ev(t,e){return new Pg("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function nv(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return 0===i?7:i}function rv(t,e,n){return n+(cg(t)?tv:Xy)[e-1]}function iv(t,e){const n=cg(t)?tv:Xy,r=n.findIndex(t=>t<e);return{month:r+1,day:e-n[r]}}function sv(t){const{year:e,month:n,day:r}=t,i=rv(e,n,r),s=nv(e,n,r);let o,a=Math.floor((i-s+10)/7);return a<1?(o=e-1,a=dg(o)):a>dg(e)?(o=e+1,a=1):o=e,{weekYear:o,weekNumber:a,weekday:s,..._g(t)}}function ov(t){const{weekYear:e,weekNumber:n,weekday:r}=t,i=nv(e,1,4),s=ug(e);let o,a=7*n+r-i-3;a<1?(o=e-1,a+=ug(o)):a>s?(o=e+1,a-=ug(e)):o=e;const{month:c,day:u}=iv(o,a);return{year:o,month:c,day:u,..._g(t)}}function av(t){const{year:e,month:n,day:r}=t;return{year:e,ordinal:rv(e,n,r),..._g(t)}}function cv(t){const{year:e,ordinal:n}=t,{month:r,day:i}=iv(e,n);return{year:e,month:r,day:i,..._g(t)}}function uv(t){const e=Qm(t.year),n=ng(t.month,1,12),r=ng(t.day,1,lg(t.year,t.month));return e?n?!r&&ev("day",t.day):ev("month",t.month):ev("year",t.year)}function lv(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=ng(e,0,23)||24===e&&0===n&&0===r&&0===i,o=ng(n,0,59),a=ng(r,0,59),c=ng(i,0,999);return s?o?a?!c&&ev("millisecond",i):ev("second",r):ev("minute",n):ev("hour",e)}const hv="Invalid DateTime",dv=864e13;function fv(t){return new Pg("unsupported zone",`the zone "${t.name}" is not supported`)}function pv(t){return null===t.weekData&&(t.weekData=sv(t.c)),t.weekData}function mv(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Nv({...n,...e,old:n})}function gv(t,e,n){let r=t-60*e*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=60*(i-e)*1e3;const s=n.offset(r);return i===s?[r,i]:[t-60*Math.min(i,s)*1e3,Math.max(i,s)]}function yv(t,e){const n=new Date(t+=60*e*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function vv(t,e,n){return gv(hg(t),e,n)}function _v(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+3*Math.trunc(e.quarters),s={...t.c,year:r,month:i,day:Math.min(t.c.day,lg(r,i))+Math.trunc(e.days)+7*Math.trunc(e.weeks)},o=Dy.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=hg(s);let[c,u]=gv(a,n,t.zone);return 0!==o&&(c+=o,u=t.zone.offset(c)),{ts:c,o:u}}function wv(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&0!==Object.keys(t).length){const r=e||a,i=Nv.fromObject(t,{...n,zone:r,specificOffset:s});return o?i:i.setZone(a)}return Nv.invalid(new Pg("unparsable",`the input "${i}" can't be parsed as ${r}`))}function bv(t,e,n=!0){return t.isValid?jg.create(Lm.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function kv(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=rg(t.c.year,n?6:4),e?(r+="-",r+=rg(t.c.month),r+="-",r+=rg(t.c.day)):(r+=rg(t.c.month),r+=rg(t.c.day)),r}function Cv(t,e,n,r,i,s){let o=rg(t.c.hour);return e?(o+=":",o+=rg(t.c.minute),0===t.c.second&&n||(o+=":")):o+=rg(t.c.minute),0===t.c.second&&n||(o+=rg(t.c.second),0===t.c.millisecond&&r||(o+=".",o+=rg(t.c.millisecond,3))),i&&(t.isOffsetFixed&&0===t.offset&&!s?o+="Z":t.o<0?(o+="-",o+=rg(Math.trunc(-t.o/60)),o+=":",o+=rg(Math.trunc(-t.o%60))):(o+="+",o+=rg(Math.trunc(t.o/60)),o+=":",o+=rg(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const xv={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ov={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ev={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Tv=["year","month","day","hour","minute","second","millisecond"],Sv=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Av=["year","ordinal","hour","minute","second","millisecond"];function Iv(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Up(t);return e}function Dv(t,e){const n=qm(e.zone,Km.defaultZone),r=Lm.fromObject(e),i=Km.now();let s,o;if(Jm(t.year))s=i;else{for(const n of Tv)Jm(t[n])&&(t[n]=xv[n]);const e=uv(t)||lv(t);if(e)return Nv.invalid(e);const r=n.offset(i);[s,o]=vv(t,r,n)}return new Nv({ts:s,zone:n,loc:r,o:o})}function Rv(t,e,n){const r=!!Jm(n.round)||n.round,i=(t,i)=>(t=ag(t,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(t,i)),s=r=>n.calendary?e.hasSame(t,r)?0:e.startOf(r).diff(t.startOf(r),r).get(r):e.diff(t,r).get(r);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const t=s(o);if(Math.abs(t)>=1)return i(t,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function Mv(t){let e,n={};return t.length>0&&"object"==typeof t[t.length-1]?(n=t[t.length-1],e=Array.from(t).slice(0,t.length-1)):e=Array.from(t),[n,e]}class Nv{constructor(t){const e=t.zone||Km.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new Pg("invalid input"):null)||(e.isValid?null:fv(e));this.ts=Jm(t.ts)?Km.now():t.ts;let r=null,i=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[r,i]=[t.old.c,t.old.o];else{const t=e.offset(this.ts);r=yv(this.ts,t),n=Number.isNaN(r.year)?new Pg("invalid input"):null,r=n?null:r,i=n?null:t}this._zone=e,this.loc=t.loc||Lm.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}static now(){return new Nv({})}static local(){const[t,e]=Mv(arguments),[n,r,i,s,o,a,c]=e;return Dv({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c},t)}static utc(){const[t,e]=Mv(arguments),[n,r,i,s,o,a,c]=e;return t.zone=Vm.utcInstance,Dv({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c},t)}static fromJSDate(t,e={}){const n="[object Date]"===Object.prototype.toString.call(t)?t.valueOf():NaN;if(Number.isNaN(n))return Nv.invalid("invalid input");const r=qm(e.zone,Km.defaultZone);return r.isValid?new Nv({ts:n,zone:r,loc:Lm.fromObject(e)}):Nv.invalid(fv(r))}static fromMillis(t,e={}){if(Ym(t))return t<-dv||t>dv?Nv.invalid("Timestamp out of range"):new Nv({ts:t,zone:qm(e.zone,Km.defaultZone),loc:Lm.fromObject(e)});throw new Wp(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(Ym(t))return new Nv({ts:1e3*t,zone:qm(e.zone,Km.defaultZone),loc:Lm.fromObject(e)});throw new Wp("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};const n=qm(e.zone,Km.defaultZone);if(!n.isValid)return Nv.invalid(fv(n));const r=Km.now(),i=Jm(e.specificOffset)?n.offset(r):e.specificOffset,s=yg(t,Iv),o=!Jm(s.ordinal),a=!Jm(s.year),c=!Jm(s.month)||!Jm(s.day),u=a||c,l=s.weekYear||s.weekNumber,h=Lm.fromObject(e);if((u||o)&&l)throw new Zp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Zp("Can't mix ordinal dates with month/day");const d=l||s.weekday&&!u;let f,p,m=yv(r,i);d?(f=Sv,p=Ov,m=sv(m)):o?(f=Av,p=Ev,m=av(m)):(f=Tv,p=xv);let g=!1;for(const k of f)Jm(s[k])?s[k]=g?p[k]:m[k]:g=!0;const y=(d?function(t){const e=Qm(t.weekYear),n=ng(t.weekNumber,1,dg(t.weekYear)),r=ng(t.weekday,1,7);return e?n?!r&&ev("weekday",t.weekday):ev("week",t.week):ev("weekYear",t.weekYear)}(s):o?function(t){const e=Qm(t.year),n=ng(t.ordinal,1,ug(t.year));return e?!n&&ev("ordinal",t.ordinal):ev("year",t.year)}(s):uv(s))||lv(s);if(y)return Nv.invalid(y);const v=d?ov(s):o?cv(s):s,[_,w]=vv(v,i,n),b=new Nv({ts:_,zone:n,o:w,loc:h});return s.weekday&&u&&t.weekday!==b.weekday?Nv.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${b.toISO()}`):b}static fromISO(t,e={}){const[n,r]=function(t){return $g(t,[dy,gy],[fy,yy],[py,vy],[my,_y])}(t);return wv(n,r,e,"ISO 8601",t)}static fromRFC2822(t,e={}){const[n,r]=function(t){return $g(function(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(t),[sy,oy])}(t);return wv(n,r,e,"RFC 2822",t)}static fromHTTP(t,e={}){const[n,r]=function(t){return $g(t,[ay,ly],[cy,ly],[uy,hy])}(t);return wv(n,r,e,"HTTP",e)}static fromFormat(t,e,n={}){if(Jm(t)||Jm(e))throw new Wp("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:i=null}=n,s=Lm.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),[o,a,c,u]=function(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=Yy(t,e,n);return[r,i,s,o]}(s,t,e);return u?Nv.invalid(u):wv(o,a,n,`format ${e}`,t,c)}static fromString(t,e,n={}){return Nv.fromFormat(t,e,n)}static fromSQL(t,e={}){const[n,r]=function(t){return $g(t,[by,gy],[ky,Cy])}(t);return wv(n,r,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new Wp("need to specify a reason the DateTime is invalid");const n=t instanceof Pg?t:new Pg(t,e);if(Km.throwOnInvalid)throw new Hp(n);return new Nv({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){const n=Qy(t,Lm.fromObject(e));return n?n.map(t=>t?t.val:null).join(""):null}static expandFormat(t,e={}){return Jy(jg.parseFormat(t),Lm.fromObject(e)).map(t=>t.val).join("")}get(t){return this[t]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?pv(this).weekYear:NaN}get weekNumber(){return this.isValid?pv(this).weekNumber:NaN}get weekday(){return this.isValid?pv(this).weekday:NaN}get ordinal(){return this.isValid?av(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ny.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ny.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ny.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ny.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return cg(this.year)}get daysInMonth(){return lg(this.year,this.month)}get daysInYear(){return this.isValid?ug(this.year):NaN}get weeksInWeekYear(){return this.isValid?dg(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:e,numberingSystem:n,calendar:r}=jg.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:n,outputCalendar:r}}toUTC(t=0,e={}){return this.setZone(Vm.instance(t),e)}toLocal(){return this.setZone(Km.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:n=!1}={}){if((t=qm(t,Km.defaultZone)).equals(this.zone))return this;if(t.isValid){let r=this.ts;if(e||n){const e=t.offset(this.ts),n=this.toObject();[r]=vv(n,e,t)}return mv(this,{ts:r,zone:t})}return Nv.invalid(fv(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:n}={}){return mv(this,{loc:this.loc.clone({locale:t,numberingSystem:e,outputCalendar:n})})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const e=yg(t,Iv),n=!Jm(e.weekYear)||!Jm(e.weekNumber)||!Jm(e.weekday),r=!Jm(e.ordinal),i=!Jm(e.year),s=!Jm(e.month)||!Jm(e.day);if((i||s||r)&&(e.weekYear||e.weekNumber))throw new Zp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&r)throw new Zp("Can't mix ordinal dates with month/day");let o;n?o=ov({...sv(this.c),...e}):Jm(e.ordinal)?(o={...this.toObject(),...e},Jm(e.day)&&(o.day=Math.min(lg(o.year,o.month),o.day))):o=cv({...av(this.c),...e});const[a,c]=vv(o,this.o,this.zone);return mv(this,{ts:a,o:c})}plus(t){return this.isValid?mv(this,_v(this,Dy.fromDurationLike(t))):this}minus(t){return this.isValid?mv(this,_v(this,Dy.fromDurationLike(t).negate())):this}startOf(t){if(!this.isValid)return this;const e={},n=Dy.normalizeUnit(t);switch(n){case"years":e.month=1;case"quarters":case"months":e.day=1;case"weeks":case"days":e.hour=0;case"hours":e.minute=0;case"minutes":e.second=0;case"seconds":e.millisecond=0}if("weeks"===n&&(e.weekday=1),"quarters"===n){const t=Math.ceil(this.month/3);e.month=3*(t-1)+1}return this.set(e)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,e={}){return this.isValid?jg.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):hv}toLocaleString(t=Qp,e={}){return this.isValid?jg.create(this.loc.clone(e),t).formatDateTime(this):hv}toLocaleParts(t={}){return this.isValid?jg.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:i=!1}={}){if(!this.isValid)return null;const s="extended"===t;let o=kv(this,s);return o+="T",o+=Cv(this,s,e,n,r,i),o}toISODate({format:t="extended"}={}){return this.isValid?kv(this,"extended"===t):null}toISOWeekDate(){return bv(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:i=!1,format:s="extended"}={}){return this.isValid?(r?"T":"")+Cv(this,"extended"===s,e,t,n,i):null}toRFC2822(){return bv(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return bv(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?kv(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(e||t)&&(n&&(r+=" "),e?r+="z":t&&(r+="ZZ")),bv(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():hv}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",n={}){if(!this.isValid||!t.isValid)return Dy.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=(a=e,Array.isArray(a)?a:[a]).map(Dy.normalizeUnit),s=t.valueOf()>this.valueOf(),o=function(t,e,n,r){let[i,s,o,a]=function(t,e,n){const r=[["years",(t,e)=>e.year-t.year],["quarters",(t,e)=>e.quarter-t.quarter+4*(e.year-t.year)],["months",(t,e)=>e.month-t.month+12*(e.year-t.year)],["weeks",(t,e)=>{const n=jy(t,e);return(n-n%7)/7}],["days",jy]],i={};let s,o;for(const[a,c]of r)if(n.indexOf(a)>=0){s=a;let n=c(t,e);o=t.plus({[a]:n}),o>e?(t=t.plus({[a]:n-1}),n-=1):t=o,i[a]=n}return[t,i,o,s]}(t,e,n);const c=e-i,u=n.filter(t=>["hours","minutes","seconds","milliseconds"].indexOf(t)>=0);0===u.length&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+c/(o-i)));const l=Dy.fromObject(s,r);return u.length>0?Dy.fromMillis(c,r).shiftTo(...u).plus(l):l}(s?this:t,s?t:this,i,r);var a;return s?o.negate():o}diffNow(t="milliseconds",e={}){return this.diff(Nv.now(),t,e)}until(t){return this.isValid?My.fromDateTimes(this,t):this}hasSame(t,e){if(!this.isValid)return!1;const n=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(e)<=n&&n<=r.endOf(e)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const e=t.base||Nv.fromObject({},{zone:this.zone}),n=t.padding?this<e?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],i=t.unit;return Array.isArray(t.unit)&&(r=t.unit,i=void 0),Rv(e,this.plus(n),{...t,numeric:"always",units:r,unit:i})}toRelativeCalendar(t={}){return this.isValid?Rv(t.base||Nv.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Nv.isDateTime))throw new Wp("min requires all arguments be DateTimes");return tg(t,t=>t.valueOf(),Math.min)}static max(...t){if(!t.every(Nv.isDateTime))throw new Wp("max requires all arguments be DateTimes");return tg(t,t=>t.valueOf(),Math.max)}static fromFormatExplain(t,e,n={}){const{locale:r=null,numberingSystem:i=null}=n;return Yy(Lm.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),t,e)}static fromStringExplain(t,e,n={}){return Nv.fromFormatExplain(t,e,n)}static get DATE_SHORT(){return Qp}static get DATE_MED(){return Xp}static get DATE_MED_WITH_WEEKDAY(){return tm}static get DATE_FULL(){return em}static get DATE_HUGE(){return nm}static get TIME_SIMPLE(){return rm}static get TIME_WITH_SECONDS(){return im}static get TIME_WITH_SHORT_OFFSET(){return sm}static get TIME_WITH_LONG_OFFSET(){return om}static get TIME_24_SIMPLE(){return am}static get TIME_24_WITH_SECONDS(){return cm}static get TIME_24_WITH_SHORT_OFFSET(){return um}static get TIME_24_WITH_LONG_OFFSET(){return lm}static get DATETIME_SHORT(){return hm}static get DATETIME_SHORT_WITH_SECONDS(){return dm}static get DATETIME_MED(){return fm}static get DATETIME_MED_WITH_SECONDS(){return pm}static get DATETIME_MED_WITH_WEEKDAY(){return mm}static get DATETIME_FULL(){return gm}static get DATETIME_FULL_WITH_SECONDS(){return ym}static get DATETIME_HUGE(){return vm}static get DATETIME_HUGE_WITH_SECONDS(){return _m}}function jv(t){if(Nv.isDateTime(t))return t;if(t&&t.valueOf&&Ym(t.valueOf()))return Nv.fromJSDate(t);if(t&&"object"==typeof t)return Nv.fromObject(t);throw new Wp(`Unknown datetime argument: ${t}, of type ${typeof t}`)}let Pv=(()=>{class t{constructor(t){this._gameLogicService=t,this.dateTimeline=[];const e=Math.floor(100*Math.random()+1700),n=Math.floor(11*Math.random())+1,r=Math.floor(30*Math.random())+1,i=Nv.fromObject({year:e,month:n,day:r});this.currentDate=i,this.dateTimeline.push(this.currentDate),this._gameLogicService.$onNextRound.subscribe(()=>{const t=Math.floor(90*Math.random());this.currentDate=this.currentDate.plus({days:t}),this.dateTimeline.push(this.currentDate)})}}return t.\u0275fac=function(e){return new(e||t)(sr(Fp))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Lv(t,e){if(1&t&&(Ps(0),Ms(1,"span"),fo(2),Ns(),Ls()),2&t){const t=zs();ai(2),go("(Cherishes: ",t.getAdvisorCherishedValues(),", Despises ",t.getAdvisorDespisedValues(),")")}}function Fv(t,e){if(1&t&&(Ps(0),fo(1),Ls()),2&t){const t=zs();ai(1),mo(" (",t.getRawAffinityTowards(t.playerKey),") ")}}function Vv(t,e){if(1&t&&(Ps(0),fo(1),Ls()),2&t){const t=zs().$implicit,e=zs();ai(1),mo(" (",e.getRawAffinityTowards(t),") ")}}function $v(t,e){if(1&t&&(Ps(0),fo(1),Ls()),2&t){const t=zs().$implicit,e=zs();ai(1),mo(" (",e.getRawEffectOnOpinion(t),") ")}}function qv(t,e){if(1&t&&(Ps(0),js(1,"br"),fo(2," \xa0\xa0 Their "),Ms(3,"span"),fo(4),Ss(5,Vv,2,1,"ng-container",2),Ns(),Ms(6,"span",1),fo(7),Ns(),Ms(8,"span"),fo(9),Ss(10,$v,2,1,"ng-container",2),Ns(),Ls()),2&t){const t=e.$implicit,n=zs();ai(3),vo("affinity-string ",n.getAffinityPolarityTowards(t),""),ai(1),mo(" ",n.getAffinityTowards(t)," "),ai(1),Ds("ngIf",n.showRawNumbers),ai(2),mo(" ",t," "),ai(1),vo("affinity-string ",n.getEffectOnOpinionPolarity(t),""),ai(1),mo(" ",n.getEffectOnOpinion(t)," "),ai(1),Ds("ngIf",n.showRawNumbers)}}function Hv(t,e){1&t&&(Ps(0),Ms(1,"span",4),fo(2,"dethronement."),Ns(),Ls())}function Bv(t,e){1&t&&(Ps(0),Ms(1,"span",5),fo(2,"retaining the Emperor."),Ns(),Ls())}function zv(t,e){if(1&t&&(Ps(0),fo(1),Ls()),2&t){const t=zs();ai(1),mo(" (",t.getRebellionUtility(),") ")}}let Zv=(()=>{class t{constructor(t,e){this._gameLogicService=t,this._affinityTablesService=e,this.otherAdvisorNames=[]}static genRelationshipKey(t,e){return`${t.name}.${e.name}`}get playerKey(){return Ju}get showRawNumbers(){return!1}get showAdvisorValues(){return!1}ngOnInit(){var t=this;return Gu(function*(){t.loadTableData(),t.otherAdvisorNames=(yield t._gameLogicService.advisors).filter(e=>e.name!==t.playerKey&&e.name!==t.inAdvisor.name).map(t=>t.name)})()}ngOnChanges(){this.loadTableData()}getAffinityTowards(t){return this._affinityTablesService.getAffinityData(this.inAdvisor.name,t,this.inRoundNo)}getAffinityPolarityTowards(t){const e=this.getRawAffinityTowards(t)||0;return e<0?"negative":e>0?"positive":""}getRawAffinityTowards(t){return this._affinityTablesService.getRawAffinity(this.inAdvisor.name,t,this.inRoundNo)}getEffectOnOpinion(t){return this._affinityTablesService.getRelEffectData(this.inAdvisor.name,t,this.inRoundNo)}getEffectOnOpinionPolarity(t){const e=this.getRawEffectOnOpinion(t)||0;return e<0?"negative":e>0?"positive":""}getRawEffectOnOpinion(t){return this._affinityTablesService.getRawRelEffectData(this.inAdvisor.name,t,this.inRoundNo)}getIfRebellious(){return this._affinityTablesService.getIfRebellious(this.inAdvisor.name,this.inRoundNo)}getRebellionUtility(){return this._affinityTablesService.getRawRebelliousness(this.inAdvisor.name,this.inRoundNo)}getAdvisorCherishedValues(){return this.inAdvisor.cherishes.map(t=>Nu[t])}getAdvisorDespisedValues(){return this.inAdvisor.despises.map(t=>Nu[t])}loadTableData(){this._affinityTablesService.generateAffinityDisplayData(this.inAdvisor,this.inRoundNo)}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp),Is(zu))},t.\u0275cmp=qt({type:t,selectors:[["app-affinity-description-generator"]],inputs:{inAdvisor:["advisor","inAdvisor"],inRoundNo:["roundNo","inRoundNo"]},features:[ae],decls:20,vars:12,consts:[[1,"affinity-description"],[1,"character-name"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"affinity-string","negative"],[1,"affinity-string","positive"]],template:function(t,e){1&t&&(Ms(0,"p",0),Ms(1,"span",1),fo(2),Ns(),Ss(3,Lv,3,2,"ng-container",2),Ms(4,"span"),fo(5),Ss(6,Fv,2,1,"ng-container",2),Ns(),Ms(7,"span",1),fo(8," the Emperor. "),Ns(),Ss(9,qv,11,11,"ng-container",3),js(10,"br"),fo(11," \xa0\xa0 \xa0\xa0 "),Ms(12,"span"),fo(13," Overall, "),Ms(14,"span",1),fo(15),Ns(),fo(16," leaned toward "),Ss(17,Hv,3,0,"ng-container",2),Ss(18,Bv,3,0,"ng-container",2),Ss(19,zv,2,1,"ng-container",2),Ns(),Ns()),2&t&&(ai(2),mo(" ",e.inAdvisor.name," "),ai(1),Ds("ngIf",e.showAdvisorValues),ai(1),vo("affinity-string ",e.getAffinityPolarityTowards(e.playerKey),""),ai(1),mo(" ",e.getAffinityTowards(e.playerKey)," "),ai(1),Ds("ngIf",e.showRawNumbers),ai(3),Ds("ngForOf",e.otherAdvisorNames),ai(6),po(e.inAdvisor.name),ai(2),Ds("ngIf",e.getIfRebellious()),ai(1),Ds("ngIf",!e.getIfRebellious()),ai(1),Ds("ngIf",e.showRawNumbers))},directives:[Jc,Gc],styles:[".affinity-description[_ngcontent-%COMP%]{line-height:1.5rem}.affinity-description[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-weight:700}.affinity-description[_ngcontent-%COMP%]   .affinity-string.negative[_ngcontent-%COMP%]{color:#ff5628;font-weight:700}.affinity-description[_ngcontent-%COMP%]   .affinity-string.positive[_ngcontent-%COMP%]{color:#5c4aee;font-weight:700}"]}),t})();function Uv(t,e){if(1&t&&(Ps(0),Ms(1,"th"),fo(2),Ns(),Ls()),2&t){const t=e.$implicit;ai(2),po(t.name)}}function Wv(t,e){if(1&t&&(Ms(0,"td"),fo(1),Ns()),2&t){const t=zs().$implicit,e=zs().$implicit,n=zs(2);ai(1),mo(" ",n.getAffinityBetween(e.name,t.name)," ")}}function Gv(t,e){1&t&&(Ms(0,"td"),fo(1," \u2212 "),Ns())}function Kv(t,e){if(1&t&&(Ps(0),Ss(1,Wv,2,1,"td",0),Ss(2,Gv,2,0,"td",0),Ls()),2&t){const t=e.$implicit,n=zs().$implicit;ai(1),Ds("ngIf",t.name!==n.name),ai(1),Ds("ngIf",t.name===n.name)}}function Jv(t,e){if(1&t&&(Ps(0),Ms(1,"tr"),Ms(2,"td"),fo(3),Ns(),Ss(4,Kv,3,2,"ng-container",1),Ms(5,"td"),fo(6),Ns(),Ms(7,"td"),fo(8),Ns(),Ms(9,"td"),fo(10),Ns(),Ns(),Ls()),2&t){const t=e.$implicit,n=zs(2);ai(3),po(t.name),ai(1),Ds("ngForOf",n.advisors),ai(2),mo(" ",n.getAffinityWithPlayer(t.name)," "),ai(2),po(t.rebellious),ai(2),po(n.getRebellionUtility(t))}}function Yv(t,e){if(1&t&&(Ms(0,"table"),Ms(1,"thead"),Ms(2,"tr"),Ms(3,"th"),fo(4,"\xa0"),Ns(),Ss(5,Uv,3,1,"ng-container",1),Ms(6,"th"),fo(7,"You"),Ns(),Ms(8,"th"),fo(9,"Rebellious?"),Ns(),Ms(10,"th"),fo(11,"Rebellion Utility"),Ns(),Ns(),Ns(),Ms(12,"tbody"),Ss(13,Jv,11,5,"ng-container",1),Ns(),Ns()),2&t){const t=zs();ai(5),Ds("ngForOf",t.advisors),ai(8),Ds("ngForOf",t.advisors)}}function Qv(t,e){if(1&t&&(Ps(0),js(1,"app-affinity-description-generator",2),Ls()),2&t){const t=e.$implicit,n=zs();ai(1),Ds("advisor",t)("roundNo",n.inRoundNo)}}let Xv=(()=>{class t{constructor(t){this._gameLogic=t,this.advisorAffinityMap=new Map}get advisors(){return this._gameLogic.advisors}get showTable(){return!1}static buildAdvisorMapKey(t,e){return`${t}::${e}`}ngOnInit(){var t=this;return Gu(function*(){t._gameLogic.$onNextRound.subscribe(Gu(function*(){yield t.setupAffinityMap()}))})()}setupAffinityMap(){var e=this;return Gu(function*(){(yield e.advisors).map(n=>{n.affinities.map(({name:r,affinity:i})=>{const s=t.buildAdvisorMapKey(n.name,r);e.advisorAffinityMap.set(s,i)})})})()}getAffinityBetween(e,n){const r=t.buildAdvisorMapKey(e,n);return this.advisorAffinityMap.get(r)}getAffinityWithPlayer(e){const n=t.buildAdvisorMapKey(e,Ju);return this.advisorAffinityMap.get(n)}getRebellionUtility(t){return-Bu(t)}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp))},t.\u0275cmp=qt({type:t,selectors:[["app-affinity-tables"]],inputs:{inRoundNo:["roundNo","inRoundNo"]},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"advisor","roundNo"]],template:function(t,e){1&t&&(Ss(0,Yv,14,2,"table",0),Ss(1,Qv,2,2,"ng-container",1)),2&t&&(Ds("ngIf",e.showTable),ai(1),Ds("ngForOf",e.advisors))},directives:[Jc,Gc,Zv],styles:["table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:5rem;text-align:center}"]}),t})(),t_=(()=>{class t{constructor(t){this._gameLogicService=t}get chosenActionText(){var t;return null===(t=this.decisionEvent.chosenAction)||void 0===t?void 0:t.name}get alternativeActionText(){const t=this.decisionEvent.chosenAction,e=this.decisionEvent.alternatives.find(e=>e.name!==t.name);return null==e?void 0:e.name}ngOnInit(){this.decisionEvent=this._gameLogicService.getDecisionEventAtRound(this.inRoundNo)}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp))},t.\u0275cmp=qt({type:t,selectors:[["app-selected-action"]],inputs:{inRoundNo:["roundNo","inRoundNo"]},decls:10,vars:2,consts:[[1,"selected-action-description"],[1,"character-name"],[1,"action-description"]],template:function(t,e){1&t&&(Ms(0,"p",0),fo(1," On this day, "),Ms(2,"span",1),fo(3,"The Emperor"),Ns(),fo(4," chose to "),Ms(5,"span",2),fo(6),Ns(),fo(7," instead of "),Ms(8,"span",2),fo(9),Ns(),Ns()),2&t&&(ai(6),mo(" ",e.chosenActionText," "),ai(3),mo(" ",e.alternativeActionText," "))},styles:[""]}),t})();function e_(t,e){if(1&t&&(Ps(0),fo(1),Ls()),2&t){const t=zs();ai(1),mo(" (",t.rawDecisionReaction,") ")}}let n_=(()=>{class t{constructor(){}get reactionPolarity(){return 0===this._rawDecisionReaction?"":this._rawDecisionReaction<0?"negative":"positive"}get showRawNumbers(){return!1}get rawDecisionReaction(){return this._rawDecisionReaction}ngOnInit(){this._rawDecisionReaction=Qu(this.inAction,this.inAdvisor),this.decisionReaction=this.generateReaction()}generateReaction(){switch(this._rawDecisionReaction){case-2:return"abhored";case-1:return"disliked";case 0:return"was unaffected by";case 1:return"liked";case 2:return"applauded";default:return""}}getActionPromotes(){return Nu[this.inAction.promotes[0]]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-action-reaction-generator"]],inputs:{inRoundNo:["roundNo","inRoundNo"],inAdvisor:["advisor","inAdvisor"],inAction:["action","inAction"]},decls:10,vars:7,consts:[[1,"character-name"],[4,"ngIf"]],template:function(t,e){1&t&&(Ms(0,"p"),Ms(1,"span",0),fo(2),Ns(),Ms(3,"span"),fo(4),Ss(5,e_,2,1,"ng-container",1),Ns(),fo(6," this decision because it promoted a sense of "),Ms(7,"i"),fo(8),Ns(),fo(9,".\n"),Ns()),2&t&&(ai(2),mo(" ",e.inAdvisor.name," "),ai(1),vo("affinity-string ",e.reactionPolarity,""),ai(1),mo(" ",e.decisionReaction," "),ai(1),Ds("ngIf",e.showRawNumbers),ai(3),po(e.getActionPromotes()))},directives:[Jc],styles:[".affinity-string.negative[_ngcontent-%COMP%], .affinity-string.positive[_ngcontent-%COMP%]{font-weight:700}"]}),t})();function r_(t,e){if(1&t&&(Ps(0),js(1,"app-action-reaction-generator",1),Ls()),2&t){const t=e.$implicit,n=zs();ai(1),Ds("advisor",t)("action",n.chosenAction)}}let i_=(()=>{class t{constructor(t){this._gameLogicService=t,this.advisors=[]}ngOnInit(){var t=this;return Gu(function*(){t.advisors=yield t._gameLogicService.advisors,t.chosenAction=t._gameLogicService.getDecisionEventAtRound(t.inRoundNo).chosenAction})()}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp))},t.\u0275cmp=qt({type:t,selectors:[["app-action-reaction"]],inputs:{inRoundNo:["roundNo","inRoundNo"]},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"advisor","action"]],template:function(t,e){1&t&&Ss(0,r_,2,2,"ng-container",0),2&t&&Ds("ngForOf",e.advisors)},directives:[Gc,n_],styles:[""]}),t})(),s_=(()=>{class t{constructor(t,e){this._gameLogicService=t,this._dateCounterService=e,this.$addReactions=new ja,this._events=[],this._events.push({date:this._dateCounterService.currentDate,reactions:[],chosenAction:null,alternateAction:null}),this._gameLogicService.$onNextRound.subscribe(()=>{this._events.push({date:this._dateCounterService.currentDate,reactions:[],chosenAction:null,alternateAction:null})}),this._gameLogicService.$beforeNextRound.subscribe(t=>{const e=this._events[this._events.length-1];e.reactions=t.reactions,e.chosenAction=t.chosenAction,e.alternateAction=t.alternateAction,this.$addReactions.emit(e)})}get events(){return[...this._events]}}return t.\u0275fac=function(e){return new(e||t)(sr(Fp),sr(Pv))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),o_=(()=>{class t{constructor(t){this._timelineService=t,this._actionsToReactions=new Map,this._timelineService.$addReactions.subscribe(t=>{const e=t.reactions.map(e=>({advisor:e.advisor,reaction:e.reaction,action:t.chosenAction}));this._actionsToReactions.set(t.chosenAction.name,e)})}hasReactionsToAction(t){return this._actionsToReactions.has(t.name)}getReactionsToAction(t){return this._actionsToReactions.get(t.name)||null}}return t.\u0275fac=function(e){return new(e||t)(sr(s_))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),a_=(()=>{class t{constructor(){this.$trackOnHoverAction=new ja}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const c_=new v(t=>t.complete());function u_(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):c_}function l_(...t){let e=t[t.length-1];return O(e)?(t.pop(),j(t,e)):z(t)}function h_(t,e,n,i){return r(n)&&(i=n,n=void 0),i?h_(t,e,n).pipe(E(t=>c(t)?i(...t):i(t))):new v(r=>{d_(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function d_(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)d_(t[s],e,n,r,i)}r.add(s)}class f_ extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class p_ extends f_{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(ck){r=!0,n=!!ck&&ck||new Error(ck)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let m_=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class g_ extends m_{constructor(t,e=m_.now){super(t,()=>g_.delegate&&g_.delegate!==this?g_.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return g_.delegate&&g_.delegate!==this?g_.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const y_=new g_(p_);function v_(t){return!c(t)&&t-parseFloat(t)+1>=0}function __(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class w_ extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class b_ extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function k_(t,e,n,r,i=new b_(t,n,r)){if(!i.closed)return e instanceof v?e.subscribe(i):N(e)(i)}function C_(...t){if(1===t.length){if(!c(t[0]))return t[0];t=t[0]}return z(t,void 0).lift(new x_)}class x_{call(t,e){return e.subscribe(new O_(t))}}class O_ extends w_{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=k_(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function E_(){}function T_(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),z(t,void 0).lift(new S_(e))}class S_{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new A_(t,this.resultSelector))}}class A_ extends p{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;c(t)?e.push(new D_(t)):e.push("function"==typeof t[D]?new I_(t[D]()):new R_(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let s=0;s<e;s++){let e=t[s];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let s=0;s<e;s++){let e=t[s],o=e.next();if(e.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class I_{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class D_{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[D](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class R_ extends F{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[D](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return V(this.observable,new L(this))}}function M_(t){return e=>e.lift(new N_(t))}class N_{constructor(t){this.notifier=t}call(t,e){const n=new j_(t),r=V(this.notifier,new L(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class j_ extends F{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function P_(t,e){return function(n){return n.lift(new L_(t,e))}}class L_{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new F_(t,this.predicate,this.thisArg))}}class F_ extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const V_=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function $_(t){return e=>0===t?u_():e.lift(new q_(t))}class q_{constructor(t){if(this.total=t,this.total<0)throw new V_}call(t,e){return e.subscribe(new H_(t,this.total))}}class H_ extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function B_(t,e){return"function"==typeof e?n=>n.pipe(B_((n,r)=>P(t(n,r)).pipe(E((t,i)=>e(n,t,r,i))))):e=>e.lift(new z_(t))}class z_{constructor(t){this.project=t}call(t,e){return e.subscribe(new Z_(t,this.project))}}class Z_ extends F{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new L(this),r=this.destination;r.add(n),this.innerSubscription=V(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function U_(t,e,n){return function(r){return r.lift(new W_(t,e,n))}}class W_{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new G_(t,this.nextOrObserver,this.error,this.complete))}}class G_ extends p{constructor(t,e,n,i){super(t),this._tapNext=E_,this._tapError=E_,this._tapComplete=E_,this._tapError=n||E_,this._tapComplete=i||E_,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||E_,this._tapError=e.error||E_,this._tapComplete=e.complete||E_)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function K_(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new J_(t,n))}}class J_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Y_(t,this.observables,this.project))}}class Y_ extends w_{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(k_(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}let Q_=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return l_(this.value);case"E":return t=this.error,new v(e=>e.error(t));case"C":return u_()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function X_(t,e=y_){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new tw(r,e))}class tw{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new ew(t,this.delay,this.scheduler))}}class ew extends p{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(ew.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new nw(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Q_.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Q_.createComplete()),this.unsubscribe()}}class nw{constructor(t,e){this.time=t,this.notification=e}}let rw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({}),t})(),iw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[rw]]}),t})(),sw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[iw]}),t})();const ow=["*"],aw=["dialog"];function cw(t){return null!=t}function uw(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const lw={animation:!0,transitionTimerDelayMs:5};let hw=(()=>{class t{constructor(){this.animation=lw.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return new t},token:t,providedIn:"root"}),t})();const dw=()=>{},{transitionTimerDelayMs:fw}=lw,pw=new Map,mw=(t,e,n,r)=>{let i=r.context||{};const s=pw.get(e);if(s)switch(r.runningTransition){case"continue":return c_;case"stop":t.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),pw.delete(e)}const o=n(e,r.animation,i)||dw;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>o()),l_(void 0).pipe(function(t){return e=>new v(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new C,c=new C,u=a.pipe(function(...t){return e=>function(...t){return B(1)(l_(...t))}(e,l_(...t))}(!0));pw.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=h_(e,"transitionend").pipe(M_(u),P_(({target:t})=>t===e));C_(function(t=0,e,n){let r=-1;return v_(e)?r=Number(e)<1?1:Number(e):O(e)&&(n=e),O(n)||(n=y_),new v(e=>{const i=v_(t)?t:+t-n.now();return n.schedule(__,i,{index:0,period:r,subscriber:e})})}(l+fw).pipe(M_(u)),n,c).pipe(M_(u)).subscribe(()=>{pw.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let gw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),yw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),vw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({}),t})(),_w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),ww=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({}),t})();var bw=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const kw=(t,e)=>!!e&&e.some(e=>e.contains(t)),Cw=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),xw="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Ow=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Ew(t){const e=Array.from(t.querySelectorAll(Ow)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const Tw=/\s+/,Sw=new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(t,e,n,r){const[i="top",s="center"]=n.split("-"),o=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),c=parseFloat(a.marginTop),u=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=o.top-(e.offsetHeight+c+u);break;case"bottom":d=o.top+o.height;break;case"left":f=o.left-(e.offsetWidth+l+h);break;case"right":f=o.left+o.width}switch(s){case"top":d=o.top;break;case"bottom":d=o.top+o.height-e.offsetHeight;break;case"left":f=o.left;break;case"right":f=o.left+o.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=o.left+o.width/2-e.offsetWidth/2:d=o.top+o.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,y=window.innerWidth||m.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=g}};new Date(1882,10,12),new Date(2174,10,25);let Aw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu,sw]]}),t})(),Iw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({}),t})(),Dw=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(sr(hw))},t.\u0275prov=lt({factory:function(){return new t(sr(hw))},token:t,providedIn:"root"}),t})();class Rw{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}class Mw{constructor(t,e,n,r,i,s,o){this._type=t,this._injector=e,this._viewContainerRef=n,this._renderer=r,this._ngZone=i,this._componentFactoryResolver=s,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(t,e,n=!1){this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),this._viewContainerRef.length,this._injector,this._contentRef.nodes));const{nativeElement:r}=this._windowRef.location,i=this._ngZone.onStable.pipe($_(1),$(()=>mw(this._ngZone,r,({classList:t})=>t.add("show"),{animation:n,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:i}}close(t=!1){return this._windowRef?mw(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:t,runningTransition:"stop"}).pipe(U_(()=>{var t;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(t=this._contentRef)||void 0===t?void 0:t.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):l_(void 0)}_getContentRef(t,e){if(t){if(t instanceof ha){const n=t.createEmbeddedView(e);return this._applicationRef.attachView(n),new Rw([n.rootNodes],n)}return new Rw([[this._renderer.createText(`${t}`)]])}return new Rw([])}}const Nw=()=>{};let jw=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Nw}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(sr(Bc))},t.\u0275prov=lt({factory:function(){return new t(sr(Bc))},token:t,providedIn:"root"}),t})(),Pw=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe($_(1)).subscribe(()=>{mw(this._zone,this._el.nativeElement,(t,e)=>{e&&uw(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return mw(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(Is(No),Is(yc))},t.\u0275cmp=qt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(eo("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),to("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class Lw{close(t){}dismiss(t){}}class Fw{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new C,this._dismissed=new C,this._hidden=new C,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(M_(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(M_(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():l_(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),T_(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Vw=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let $w=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new C,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ja,this.shown=new C,this.hidden=new C}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe($_(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=T_(mw(this._zone,t,()=>t.classList.remove("show"),e),mw(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};T_(mw(this._zone,this._elRef.nativeElement,(t,e)=>{e&&uw(t),t.classList.add("show")},t),mw(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{h_(t,"keydown").pipe(M_(this._closed$),P_(t=>t.which===bw.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(Vw.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;h_(this._dialogEl.nativeElement,"mousedown").pipe(M_(this._closed$),U_(()=>e=!1),B_(()=>h_(t,"mouseup").pipe(M_(this._closed$),$_(1))),P_(({target:e})=>t===e)).subscribe(()=>{e=!0}),h_(t,"click").pipe(M_(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(Vw.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=Ew(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&mw(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(Is(Bc),Is(No),Is(yc))},t.\u0275cmp=qt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&function(t,e,n){const r=Ie();r.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new qa),t.queries.track(new Ha(e,-1))}(r,new $a(t,e,n)),2==(2&e)&&(r.staticViewQueries=!0)),function(t,e,n){const r=new La(4==(4&n));Si(t,e,r,r.destroy),null===e[19]&&(e[19]=new Va),e[19].queries.push(new Fa(r))}(r,Ae(),e)}(aw,7),2&t){let t;Wa((n=Ae(),r=Ze(),t=n[19].queries[r].queryList))&&(e._dialogEl=t.first)}var n,r},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(Es("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),eo("modal d-block"+(e.windowClass?" "+e.windowClass:"")),to("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:ow,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(Us(),Ms(0,"div",0,1),Ms(2,"div",2),Ws(3),Ns(),Ns()),2&t&&eo("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),qw=(()=>{class t{constructor(t,e,n,r,i,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=r,this._rendererFactory=i,this._ngZone=s,this._activeWindowCmptHasChanged=new C,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ja,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=h_(e,"focusin").pipe(M_(n),E(t=>t.target));h_(e,"keydown").pipe(M_(n),P_(t=>t.which===bw.Tab),K_(t)).subscribe(([t,n])=>{const[r,i]=Ew(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&h_(e,"click").pipe(M_(n),K_(t),E(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:cw(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const c=new Lw,u=this._getContentRef(t,r.injector||e,n,c,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,u),d=new Fw(h,u,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(o,o),d.result.then(a,a),c.close=t=>{d.close(t)},c.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),l&&l.instance&&(this._applyBackdropOptions(l.instance,r),l.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(Pw).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory($w).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{cw(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{cw(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,r,i){return n?n instanceof ha?this._createFromTemplateRef(n,r):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,r,i):new Rw([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Rw([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Rw([[e]])}_createFromComponent(t,e,n,r,i){const s=t.resolveComponentFactory(n),o=ys.create({providers:[{provide:Lw,useValue:r}],parent:e}),a=s.create(o),c=a.location.nativeElement;return i.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Rw([[c]],a.hostView,a)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(sr(Pc),sr(ys),sr(Bc),sr(jw),sr(Po),sr(yc))},t.\u0275prov=lt({factory:function(){return new t(sr(Pc),sr(rs),sr(Bc),sr(jw),sr(Po),sr(yc))},token:t,providedIn:"root"}),t})(),Hw=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(sr(Io),sr(ys),sr(qw),sr(Dw))},t.\u0275prov=lt({factory:function(){return new t(sr(Io),sr(rs),sr(qw),sr(Dw))},token:t,providedIn:"root"}),t})(),Bw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({providers:[Hw]}),t})(),zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),Zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})();class Uw{constructor(t,e){this.open=t,this.close=e,e||(this.close=t)}isManual(){return"manual"===this.open||"manual"===this.close}}const Ww={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},Gw=t=>t>0?X_(t):t=>t;let Kw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),Jw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),Yw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),Qw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),Xw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})(),tb=(()=>{class t{constructor(t){this._ngbConfig=t,this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(sr(hw))},t.\u0275prov=lt({factory:function(){return new t(sr(hw))},token:t,providedIn:"root"}),t})(),eb=0,nb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(t,e){2&t&&(_o("id",e.id),eo("tooltip"+(e.tooltipClass?" "+e.tooltipClass:"")),to("fade",e.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:ow,decls:3,vars:0,consts:[[1,"arrow"],[1,"tooltip-inner"]],template:function(t,e){1&t&&(Us(),js(0,"div",0),Ms(1,"div",1),Ws(2),Ns())},styles:["ngb-tooltip-window{pointer-events:none}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],encapsulation:2,changeDetection:0}),t})(),rb=(()=>{class t{constructor(t,e,n,r,i,s,o,a,c,u){this._elementRef=t,this._renderer=e,this._ngZone=o,this._document=a,this._changeDetector=c,this.shown=new ja,this.hidden=new ja,this._ngbTooltipWindowId="ngb-tooltip-"+eb++,this._windowRef=null,this.animation=s.animation,this.autoClose=s.autoClose,this.placement=s.placement,this.triggers=s.triggers,this.container=s.container,this.disableTooltip=s.disableTooltip,this.tooltipClass=s.tooltipClass,this.openDelay=s.openDelay,this.closeDelay=s.closeDelay,this._popupService=new Mw(nb,n,i,e,this._ngZone,r,u),this._zoneSubscription=o.onStable.subscribe(()=>{this._windowRef&&function(t,e,n,r,i){let s=Array.isArray(n)?n:n.split(Tw);const o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=e.classList,c=t=>{const[e,n]=t.split("-"),r=[];return r.push(`bs-tooltip-${e}`),n&&r.push(`bs-tooltip-${e}-${n}`),r.forEach(t=>{a.add(t)}),r};o.forEach(t=>{a.remove(`bs-tooltip-${t}`)});let u=s.findIndex(t=>"auto"===t);u>=0&&o.forEach(function(t){null==s.find(e=>-1!==e.search("^"+t))&&s.splice(u++,1,t)});const l=e.style;l.position="absolute",l.top="0",l.left="0",l["will-change"]="transform";let h=null,d=!1;for(h of s){let n=c(h);if(Sw.positionElements(t,e,h,r)){d=!0;break}n.forEach(t=>{a.remove(t)})}d||(h=s[0],c(h),Sw.positionElements(t,e,h,r))}(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container)})}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:e,transition$:n}=this._popupService.open(this._ngbTooltip,t,this.animation);this._windowRef=e,this._windowRef.instance.animation=this.animation,this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),function(t,e,n,r,i,s,o,a){var c;n&&t.runOutsideAngular((c=()=>{const c=h_(e,"keydown").pipe(M_(i),P_(t=>t.which===bw.Escape),U_(t=>t.preventDefault())),u=h_(e,"mousedown").pipe(E(t=>{const e=t.target;return 2!==t.button&&!kw(e,o)&&("inside"===n?kw(e,s)&&Cw(e,a):"outside"===n?!kw(e,s):Cw(e,a)||!kw(e,s))}),M_(i)),l=h_(e,"mouseup").pipe(K_(u),P_(([t,e])=>e),X_(0),M_(i));C_([c.pipe(E(t=>0)),l.pipe(E(t=>1))]).subscribe(e=>t.run(()=>r(e)))},xw?()=>setTimeout(()=>c(),100):c))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),n.subscribe(()=>this.shown.emit())}}close(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function(t,e,n,r,i,s,o=0,a=0){const c=function(t,e=Ww){const n=(t||"").trim();if(0===n.length)return[];const r=n.split(/\s+/).map(t=>t.split(":")).map(t=>{let n=e[t[0]]||t;return new Uw(n[0],n[1])}),i=r.filter(t=>t.isManual());if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===i.length&&r.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r}(n);if(1===c.length&&c[0].isManual())return()=>{};const u=function(t,e,n,r){return new v(i=>{const s=[],o=()=>i.next(!0),a=()=>i.next(!1),c=()=>i.next(!r());return n.forEach(n=>{n.open===n.close?s.push(t.listen(e,n.open,c)):s.push(t.listen(e,n.open,o),t.listen(e,n.close,a))}),()=>{s.forEach(t=>t())}})}(t,e,c,r).pipe(function(t,e,n){return r=>{let i=null;const s=r.pipe(E(t=>({open:t})),P_(t=>{const e=n();return e===t.open||i&&i.open!==e?(i&&i.open!==t.open&&(i=null),!1):(i=t,!0)}),X());return Z(s.pipe(P_(t=>t.open),Gw(t)),s.pipe(P_(t=>!t.open),Gw(e))).pipe(P_(t=>t===i&&(i=null,t.open!==n())),E(t=>t.open))}}(o,a,r)).subscribe(t=>t?i():s());return()=>u.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&(this._windowRef.instance.tooltipClass=t.currentValue)}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Is(No),Is(Lo),Is(ys),Is(Io),Is(ya),Is(tb),Is(yc),Is(Bc),Is(oa),Is(Pc))},t.\u0275dir=Wt({type:t,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[ae]}),t})(),ib=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({}),t})();new Bn("live announcer delay",{providedIn:"root",factory:function(){return 100}});let sb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[[eu]]}),t})();const ob=[gw,yw,vw,_w,ww,Aw,Iw,Bw,zw,Zw,Kw,Jw,Yw,Qw,Xw,ib,sb];let ab=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=ht({imports:[ob,gw,yw,vw,_w,ww,Aw,Iw,Bw,zw,Zw,Kw,Jw,Yw,Qw,Xw,ib,sb]}),t})();function cb(t,e){1&t&&Fs(0)}function ub(t,e){1&t&&Fs(0)}const lb=function(t){return{action:t}};function hb(t,e){if(1&t&&(Ms(0,"div",4),Ms(1,"p"),fo(2,"On this day, "),Ms(3,"span",5),fo(4,"the Emperor"),Ns(),fo(5," made the following mandate:"),Ns(),Ms(6,"div",6),Ss(7,cb,1,0,"ng-container",7),Ms(8,"div",8),Ms(9,"span"),fo(10,"or"),Ns(),Ns(),Ss(11,ub,1,0,"ng-container",7),Ns(),Ns()),2&t){const t=zs(),e=As(2);ai(7),Ds("ngTemplateOutlet",e)("ngTemplateOutletContext",Ra(4,lb,t.currentDecisionEvent.alternatives[0])),ai(4),Ds("ngTemplateOutlet",e)("ngTemplateOutletContext",Ra(6,lb,t.currentDecisionEvent.alternatives[1]))}}function db(t,e){if(1&t&&(Ms(0,"div",15),fo(1),Ns()),2&t){const t=zs().action;ai(1),mo(" ",t.description," ")}}function fb(t,e){if(1&t&&(Ps(0),Ms(1,"p",21),Ms(2,"i"),fo(3),Ns(),Ns(),Ls()),2&t){const t=e.$implicit,n=zs(4);ai(3),po(n.getValueText(t))}}function pb(t,e){if(1&t&&(Ms(0,"div",18),Ms(1,"p",19),Ms(2,"b"),fo(3,"Promotes"),Ns(),Ns(),Ms(4,"div"),Ss(5,fb,4,1,"ng-container",20),Ns(),Ns()),2&t){const t=zs(2).action;ai(5),Ds("ngForOf",t.promotes)}}function mb(t,e){if(1&t&&(Ps(0),Ms(1,"p",21),Ms(2,"i"),fo(3),Ns(),Ns(),Ls()),2&t){const t=e.$implicit,n=zs(4);ai(3),po(n.getValueText(t))}}function gb(t,e){if(1&t&&(Ms(0,"div",18),Ms(1,"p",19),Ms(2,"b"),fo(3,"Harms"),Ns(),Ns(),Ms(4,"div"),Ss(5,mb,4,1,"ng-container",20),Ns(),Ns()),2&t){const t=zs(2).action;ai(5),Ds("ngForOf",t.harms)}}function yb(t,e){if(1&t&&(Ms(0,"div",16),Ss(1,pb,6,1,"div",17),Ss(2,gb,6,1,"div",17),Ns()),2&t){const t=zs(2);ai(1),Ds("ngIf",t.showActionPromotes),ai(1),Ds("ngIf",t.showActionHarms)}}function vb(t,e){if(1&t){const t=Vs();Ms(0,"button",9),qs("click",function(){const e=De(t).action;return zs().onChooseAction(e)}),Ms(1,"div",10,11),qs("mouseover",function(){const e=De(t).action,n=As(2);return zs().onMouseOver(n,e)})("mouseleave",function(){const e=De(t).action,n=As(2);return zs().onMouseLeave(n,e)}),Ms(3,"div",12),fo(4),Ns(),js(5,"hr"),Ss(6,db,2,1,"div",13),Ss(7,yb,3,2,"div",14),Ns(),Ns()}if(2&t){const t=e.action,n=zs(),r=As(4);ai(1),Ds("ngbTooltip",r),ai(3),mo(" ",t.name," "),ai(2),Ds("ngIf",n.showActionDescriptions),ai(1),Ds("ngIf",n.showActionValues)}}function _b(t,e){if(1&t&&(Ps(0),js(1,"app-action-reaction-generator",23),Ls()),2&t){const t=e.$implicit;ai(1),Ds("advisor",t.advisor)("action",t.action)}}function wb(t,e){if(1&t&&(Ps(0),Ss(1,_b,2,2,"ng-container",20),Ls()),2&t){const t=zs().action,e=zs();ai(1),Ds("ngForOf",e.getReactionsToAction(t))}}function bb(t,e){if(1&t&&Ss(0,wb,2,1,"ng-container",22),2&t){const t=e.action,n=zs(),r=As(6);Ds("ngIf",n.hasReactionsToAction(t))("ngIfElse",r)}}function kb(t,e){1&t&&(Ms(0,"p"),fo(1,"You have never selected this action."),Ns())}let Cb=(()=>{class t{constructor(t,e,n){this._gameLogic=t,this._reactionMemoryService=e,this._interactionTrackingService=n}get currentDecisionEvent(){return this._gameLogic.currentDecisionEvent}get showActionDescriptions(){return!1}get showActionValues(){return!0}get showActionPromotes(){return!0}get showActionHarms(){return!1}onChooseAction(t){this._gameLogic.onChooseAction(t)}getValueText(t){return Nu[t]}onMouseOver(t,e){this._interactionTrackingService.$trackOnHoverAction.emit({action:e,event:"enter"})}onMouseLeave(t,e){this._interactionTrackingService.$trackOnHoverAction.emit({action:e,event:"leave"}),t.close()}hasReactionsToAction(t){return this._reactionMemoryService.hasReactionsToAction(t)}getReactionsToAction(t){return this._reactionMemoryService.getReactionsToAction(t)}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp),Is(o_),Is(a_))},t.\u0275cmp=qt({type:t,selectors:[["app-action-selection"]],decls:7,vars:1,consts:[["id","container",4,"ngIf"],["actionCard",""],["actionCardTooltip",""],["noReactionTooltip",""],["id","container"],[1,"character-name"],["id","alternative-wrapper"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","separator"],[1,"action-card-btn",3,"click"],["triggers","manual","tooltipClass","reaction-memory-tooltip",1,"action-card",3,"ngbTooltip","mouseover","mouseleave"],["tooltip","ngbTooltip"],[1,"action-name"],["class","action-card-description",4,"ngIf"],["class","action-values",4,"ngIf"],[1,"action-card-description"],[1,"action-values"],["class","value-description",4,"ngIf"],[1,"value-description"],[1,"value-effect-title"],[4,"ngFor","ngForOf"],[1,"value-text"],[4,"ngIf","ngIfElse"],[3,"advisor","action"]],template:function(t,e){1&t&&(Ss(0,hb,12,8,"div",0),Ss(1,vb,8,4,"ng-template",null,1,Ka),Ss(3,bb,1,2,"ng-template",null,2,Ka),Ss(5,kb,2,0,"ng-template",null,3,Ka)),2&t&&Ds("ngIf",e.currentDecisionEvent)},directives:[Jc,Xc,rb,Gc,n_],styles:['#container[_ngcontent-%COMP%]   #alternative-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}#container[_ngcontent-%COMP%]   #alternative-wrapper[_ngcontent-%COMP%]   #separator[_ngcontent-%COMP%]{padding:1rem}.action-card-btn[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{width:11.25rem;height:15rem;background-color:#fff;border-radius:2.5%;padding:5px;cursor:pointer}.action-card-btn[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-name[_ngcontent-%COMP%]{height:2rem;display:flex;justify-content:center;align-items:center}.action-card-btn[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-values[_ngcontent-%COMP%]   .value-description[_ngcontent-%COMP%]{padding:5px}.action-card-btn[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-values[_ngcontent-%COMP%]   .value-description[_ngcontent-%COMP%]   .value-effect-title[_ngcontent-%COMP%]{margin-bottom:5px}.action-card-btn[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-values[_ngcontent-%COMP%]   .effect-list[_ngcontent-%COMP%] + .effect-list[_ngcontent-%COMP%]{border-left:1px dashed #000}.reaction-memory-tooltip[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%]{background:#fff;border:#000;font-family:"Noto-Serif",serif}']}),t})();function xb(t,e){if(1&t&&(Ps(0),Ms(1,"h1",10),fo(2),Ns(),Ls()),2&t){const t=zs().index,e=zs();ai(2),po(e.beautifyDate(e.dateTimeline[t]))}}function Ob(t,e){if(1&t&&(Ps(0),Ms(1,"h1"),fo(2),Ns(),Ls()),2&t){const t=zs().index,e=zs();ai(2),go("Round ",t+1,"/",e.maximumRounds,"")}}function Eb(t,e){if(1&t&&(Ps(0),js(1,"div"),Ss(2,xb,3,1,"ng-container",8),Ss(3,Ob,3,2,"ng-container",8),js(4,"app-affinity-tables",9),js(5,"app-selected-action",9),js(6,"app-action-reaction",9),Ms(7,"div",3),js(8,"div",4),js(9,"div",5),js(10,"div",5),js(11,"div",4),Ns(),js(12,"div"),Ls()),2&t){const t=e.index,n=zs();ai(1),Es("id","view-top-marker_"+t),ai(1),Ds("ngIf",n.showHistoryDate),ai(1),Ds("ngIf",n.showRoundCounter),ai(1),Ds("roundNo",t),ai(1),Ds("roundNo",t),ai(1),Ds("roundNo",t),ai(6),Es("id","view-bottom-marker_"+t)}}function Tb(t,e){if(1&t&&(Ps(0),Ms(1,"h1",10),fo(2),Ns(),Ls()),2&t){const t=zs();ai(2),po(t.beautifyDate(t.currentDate))}}function Sb(t,e){if(1&t&&(Ps(0),Ms(1,"h1"),fo(2),Ns(),Ls()),2&t){const t=zs(2);ai(2),yo("Round ",t.currentRound+1,"/",t.maximumRounds," - Your Score: ",t.playerScore,"")}}function Ab(t,e){if(1&t&&(Ps(0),Ms(1,"h1"),fo(2),Ns(),Ls()),2&t){const t=zs(2);ai(2),mo("Your Final Score: ",t.playerScore,"")}}function Ib(t,e){if(1&t&&(Ps(0),Ss(1,Sb,3,3,"ng-container",8),Ss(2,Ab,3,1,"ng-container",8),Ls()),2&t){const t=zs();ai(1),Ds("ngIf",!t.isGameOver),ai(1),Ds("ngIf",t.isGameOver)}}function Db(t,e){if(1&t&&(Ps(0),js(1,"app-affinity-tables",9),Ls()),2&t){const t=zs();ai(1),Ds("roundNo",t.currentRound)}}function Rb(t,e){1&t&&(Ms(0,"div"),js(1,"app-action-selection"),Ns())}let Mb=(()=>{class t{constructor(t,e){this._gameLogicService=t,this._dateCounterService=e,this.rounds=[],this.isScrolling=!1}get showRoundCounter(){return!0}get showHistoryDate(){return!1}get currentRound(){return this._gameLogicService.round}get maximumRounds(){return this._gameLogicService.maxRounds}get playerScore(){return-this._gameLogicService.advisors.reduce((t,e)=>e.rebellionUtility+t,0)}get isGameOver(){return this._gameLogicService.isGameOver}get dateTimeline(){return this._dateCounterService.dateTimeline}get currentDate(){return this._dateCounterService.currentDate}ngOnInit(){this._gameLogicService.$onNextRound.subscribe(()=>{this.rounds.push({}),this.isScrolling=!0})}ngAfterViewChecked(){var t;this.isScrolling&&(null===(t=document.getElementById("view-top-marker_"+this.rounds.length))||void 0===t||t.scrollIntoView(),this.isScrolling=!1)}beautifyDate(t){return t.toLocaleString(Nv.DATE_MED)}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp),Is(Pv))},t.\u0275cmp=qt({type:t,selectors:[["app-chronicle"]],decls:17,vars:7,consts:[["id","container"],["id","game-intro"],["id","message-body"],[1,"round-divider"],[1,"line"],[1,"dot"],["id","game-history-wrapper"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"roundNo"],[1,"history-date"]],template:function(t,e){1&t&&(Ms(0,"div",0),Ms(1,"h1",1),fo(2," A "),Ms(3,"span",2),fo(4,"record of Executive Decisions"),Ns(),Ns(),Ms(5,"div",3),js(6,"div",4),js(7,"div",5),js(8,"div",4),Ns(),Ms(9,"div",6),Ss(10,Eb,13,7,"ng-container",7),js(11,"div"),Ss(12,Tb,3,1,"ng-container",8),Ss(13,Ib,3,2,"ng-container",8),Ss(14,Db,2,1,"ng-container",8),Ss(15,Rb,2,0,"div",8),Ns(),js(16,"div"),Ns()),2&t&&(ai(10),Ds("ngForOf",e.rounds),ai(1),Es("id","view-top-marker_"+e.rounds.length),ai(1),Ds("ngIf",e.showHistoryDate),ai(1),Ds("ngIf",e.showRoundCounter),ai(1),Ds("ngIf",!e.isGameOver),ai(1),Ds("ngIf",!e.isGameOver),ai(1),Es("id","view-bottom-marker_"+e.rounds.length))},directives:[Gc,Jc,Xv,t_,i_,Cb],styles:["#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50vw;margin:auto}#container[_ngcontent-%COMP%]   h1#game-intro[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center}#container[_ngcontent-%COMP%]   h1#game-intro[_ngcontent-%COMP%]   #message-body[_ngcontent-%COMP%]{font-size:2rem}#container[_ngcontent-%COMP%]   #game-history-wrapper[_ngcontent-%COMP%]{padding:0 5rem}#container[_ngcontent-%COMP%]   #game-history-wrapper[_ngcontent-%COMP%]   .history-date[_ngcontent-%COMP%]{line-height:5rem}#container[_ngcontent-%COMP%]   #action-selection-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}#container[_ngcontent-%COMP%]   .round-divider[_ngcontent-%COMP%]{display:flex;align-items:center;height:5px}#container[_ngcontent-%COMP%]   .round-divider[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{background-color:#37352f;flex-grow:1;height:1.25px}#container[_ngcontent-%COMP%]   .round-divider[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#37352f;border-radius:50%;width:5px;height:5px;margin-left:1%;margin-right:1%}"]}),t})();function Nb(t,e){1&t&&(sn(),Ps(0),js(1,"circle",20),Ls())}function jb(t,e){1&t&&(sn(),Ps(0),js(1,"polygon",23),Ls())}function Pb(t,e){if(1&t&&(sn(),Ps(0),Ms(1,"g",21),js(2,"polygon",22),Ss(3,jb,2,0,"ng-container",19),Ns(),Ls()),2&t){const t=zs().$implicit;ai(3),Ds("ngIf",t.reaction>1)}}function Lb(t,e){1&t&&(sn(),Ps(0),js(1,"polygon",25),Ls())}function Fb(t,e){if(1&t&&(sn(),Ps(0),Ms(1,"g",21),js(2,"polygon",24),Ss(3,Lb,2,0,"ng-container",19),Ns(),Ls()),2&t){const t=zs().$implicit;ai(3),Ds("ngIf",t.reaction<-1)}}function Vb(t,e){if(1&t&&(sn(),Ps(0),Ms(1,"g"),Ss(2,Nb,2,0,"ng-container",19),Ss(3,Pb,4,1,"ng-container",19),Ss(4,Fb,4,1,"ng-container",19),Ns(),Ls()),2&t){const t=e.$implicit,n=e.index;ai(1),Es("transform","translate("+15*n+", 0)"),ai(1),Ds("ngIf",0===t.reaction),ai(1),Ds("ngIf",t.reaction>0),ai(1),Ds("ngIf",t.reaction<0)}}function $b(t,e){if(1&t){const t=Vs();sn(),Ps(0),Ms(1,"g",11),js(2,"line",12),Ms(3,"g",13),Ms(4,"text",14),fo(5),Ns(),Ms(6,"g",15),Ss(7,Vb,5,4,"ng-container",5),Ns(),Ms(8,"foreignObject",16),on(),Ms(9,"div",17,18),qs("click",function(){const e=De(t),n=e.$implicit,r=e.index;return zs().onClickTick(n,r)})("mouseover",function(){const e=De(t),n=e.$implicit,r=e.index,i=As(10);return zs().onMouseOverTick(i,n,r)})("mouseout",function(){const e=De(t),n=e.$implicit,r=e.index,i=As(10);return zs().onMouseOutTick(i,n,r)}),Ns(),Ns(),Ns(),Ns(),Ls()}if(2&t){const t=e.$implicit,n=e.index,r=zs(),i=As(12);ai(1),Es("transform","translate(0,"+r.eventIndexToHeight(n)+")"),ai(1),Es("stroke-width",r.svgTimelineStrokeWidth),ai(1),Es("mask",r.getTickWrapperMask(n)),ai(2),po(r.beautifyDate(t.date)),ai(2),Ds("ngForOf",t.reactions),ai(1),Es("y",.33*-r.svgTimelineBandHeight)("width",250)("height",.66*r.svgTimelineBandHeight),ai(1),Ds("ngbTooltip",i)}}function qb(t,e){if(1&t&&(sn(),on(),Ms(0,"p"),Ms(1,"b"),fo(2,"The Emperor"),Ns(),fo(3," chose to "),Ms(4,"i"),fo(5),Ns(),fo(6," instead of "),Ms(7,"i"),fo(8),Ns(),fo(9,"."),Ns()),2&t){const t=e.event;ai(5),po(t.chosenAction.name),ai(3),po(t.alternateAction.name)}}let Hb=(()=>{class t{constructor(t,e,n){this._gameLogicService=t,this._timelineService=e,this._interactionTrackerService=n,this.svgTimelineStrokeWidth=5,this.highlightTicks=[]}get timelineProgress(){return this._gameLogicService.round/(this._gameLogicService.maxRounds-1)}get timelineProgressAsHeight(){return this.timelineProgress*this.timelineContainerHeight}get events(){return this._timelineService.events}ngOnInit(){this.timelineContainerHeight=.8*window.innerHeight,this.timelineContainerWidth=.25*window.innerWidth,this.svgTimelineBandHeight=1/(this._gameLogicService.maxRounds-1)*this.timelineContainerHeight,this._interactionTrackerService.$trackOnHoverAction.subscribe(t=>{if("leave"===t.event)this.highlightTicks=[];else if("enter"===t.event){const e=this.events.map((e,n)=>{var r;return{display:(null===(r=e.chosenAction)||void 0===r?void 0:r.name)===t.action.name,index:n}});this.highlightTicks=e.filter(t=>t.display).map(t=>t.index)}})}onClickTick(t,e){var n;null===(n=document.getElementById(`view-top-marker_${e}`))||void 0===n||n.scrollIntoView()}onMouseOverTick(t,e,n){this.highlightTicks=[n],e.reactions.length>0&&t.open({event:e})}onMouseOutTick(t,e,n){this.highlightTicks=[],t.close()}beautifyDate(t){return t.toLocaleString(Nv.DATE_MED)}getReactionColor(t){return t<0?"#ff5628":t>0?"#5c4aee":"#37352f"}getTickWrapperMask(t){return this.highlightTicks.includes(t)?"url(#opaque-mask)":"url(#translucent-mask)"}eventIndexToHeight(t){return t/(this._gameLogicService.maxRounds-1)*this.timelineContainerHeight}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp),Is(s_),Is(a_))},t.\u0275cmp=qt({type:t,selectors:[["app-timeline"]],decls:13,vars:17,consts:[["id","container"],["id","timeline-wrapper"],["x1","0","x2","0","y1","0","stroke","rgba(55, 53, 47, 1)"],["x1","0","x2","0","stroke","rgba(55, 53, 47, 0.3)"],["id","timeline-ticks-wrapper"],[4,"ngFor","ngForOf"],["id","translucent-mask"],["fill","rgba(255, 255, 255, 0.4)"],["id","opaque-mask"],["fill","white"],["decisionReminder",""],[1,"tick-wrapper"],["x1","-10","x2","10","y1","0","y2","0","stroke","rgba(55, 53, 47, 1)"],[1,"tick-label-wrapper"],["x","-12","alignment-baseline","middle","text-anchor","end","font-size","14"],["transform","translate(16,0)",1,"reaction-marker-wrapper"],["x","-150"],["triggers","manual","placement","right","container","body","tooltipClass","timeline-tooltip",1,"tooltip-trigger",3,"ngbTooltip","click","mouseover","mouseout"],["tooltip","ngbTooltip"],[4,"ngIf"],["r","5","fill","black"],["transform","translate(-5,-5)"],["points","5 0,10 10,0 10","fill","#5c4aee"],["points","5 10,10 20,0 20","fill","#5c4aee"],["points","5 10,0 0,10 0","fill","#ff5628"],["points","5 20,0 10,10 10","fill","#ff5628"]],template:function(t,e){1&t&&(Ms(0,"div",0),sn(),Ms(1,"svg"),Ms(2,"g",1),js(3,"line",2),js(4,"line",3),Ms(5,"g",4),Ss(6,$b,11,9,"ng-container",5),Ns(),Ns(),Ms(7,"mask",6),js(8,"rect",7),Ns(),Ms(9,"mask",8),js(10,"rect",9),Ns(),Ns(),Ns(),Ss(11,qb,10,2,"ng-template",null,10,Ka)),2&t&&(ai(1),Es("height",e.timelineContainerHeight)("width",e.timelineContainerWidth),ai(1),Es("transform","translate("+e.timelineContainerWidth/2+", 7.5)"),ai(1),Es("y2",e.timelineProgressAsHeight)("stroke-width",e.svgTimelineStrokeWidth),ai(1),Es("y1",e.timelineProgressAsHeight)("y2",e.timelineContainerHeight-7.5)("stroke-width",e.svgTimelineStrokeWidth),ai(2),Ds("ngForOf",e.events),ai(2),Es("x",-e.timelineContainerWidth)("y",-e.timelineContainerHeight)("width",2*e.timelineContainerWidth)("height",2*e.timelineContainerHeight),ai(2),Es("x",-e.timelineContainerWidth)("y",-e.timelineContainerHeight)("width",2*e.timelineContainerWidth)("height",2*e.timelineContainerHeight))},directives:[Gc,rb,Jc],styles:["svg[_ngcontent-%COMP%]   foreignObject[_ngcontent-%COMP%]   .tooltip-trigger[_ngcontent-%COMP%]{width:100%;height:100%}svg[_ngcontent-%COMP%]   foreignObject[_ngcontent-%COMP%]   .tooltip-trigger[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),t})();function Bb(t,e){1&t&&(Ms(0,"div",5),js(1,"app-timeline"),Ns())}let zb=(()=>{class t{get showTimelineElement(){return!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-main-screen"]],decls:7,vars:1,consts:[["id","container"],["id","ui-wrapper"],[1,"grid-spacer"],["id","timeline-wrapper",4,"ngIf"],["id","chronicle-wrapper",1,"grid-spacer"],["id","timeline-wrapper"]],template:function(t,e){1&t&&(Ms(0,"div",0),Ms(1,"div",1),Ms(2,"div",2),Ss(3,Bb,2,0,"div",3),Ns(),Ms(4,"div",4),js(5,"app-chronicle"),Ns(),js(6,"div",2),Ns(),Ns()),2&t&&(ai(3),Ds("ngIf",e.showTimelineElement))},directives:[Jc,Mb,Hb],styles:["#ui-wrapper[_ngcontent-%COMP%]{display:flex}#ui-wrapper[_ngcontent-%COMP%]   .grid-spacer[_ngcontent-%COMP%]{flex-grow:1}#ui-wrapper[_ngcontent-%COMP%]   #timeline-wrapper[_ngcontent-%COMP%]{position:fixed;top:5%;bottom:15%}"]}),t})();function Zb(t,e){1&t&&(Ms(0,"span"),fo(1,"...and the Emperor was dethroned"),Ns())}function Ub(t,e){1&t&&(Ms(0,"span"),fo(1,"...and the Emperor's rule continued on"),Ns())}function Wb(t,e){1&t&&(Ms(0,"span"),fo(1," Behind closed doors, the Emperor's advisors voted to dethrone them, ending a tumultuous rule. "),Ns())}function Gb(t,e){1&t&&(Ms(0,"span"),fo(1," Behind closed doors, the Emperor's advisors voted to retain them. The Emperor's rule continued on. "),Ns())}let Kb=(()=>{class t{constructor(t){this._gameLogic=t,this.outRestart=new ja}get isOverThrown(){return this._gameLogic.isPlayerOverThrown}get resultPolarity(){return this.isOverThrown?"negative":"positive"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp))},t.\u0275cmp=qt({type:t,selectors:[["app-end-screen"]],outputs:{outRestart:"restart"},decls:8,vars:7,consts:[["id","container"],["id","result-header"],[4,"ngIf"],["id","result-blurb"]],template:function(t,e){1&t&&(Ms(0,"div",0),Ms(1,"h1",1),Ss(2,Zb,2,0,"span",2),Ss(3,Ub,2,0,"span",2),Ns(),Ms(4,"p",3),Ss(5,Wb,2,0,"span",2),Ss(6,Gb,2,0,"span",2),Ns(),js(7,"br"),Ns()),2&t&&(ai(1),vo("affinity-string ",e.resultPolarity,""),ai(1),Ds("ngIf",e.isOverThrown),ai(1),Ds("ngIf",!e.isOverThrown),ai(2),Ds("ngIf",e.isOverThrown),ai(1),Ds("ngIf",!e.isOverThrown))},directives:[Jc],styles:["#container[_ngcontent-%COMP%]   #result-header[_ngcontent-%COMP%]{text-align:center}#container[_ngcontent-%COMP%]   #result-blurb[_ngcontent-%COMP%]{width:25rem;margin:auto}#container[_ngcontent-%COMP%]   #restart-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center}#container[_ngcontent-%COMP%]   #restart-btn-container[_ngcontent-%COMP%]   #restart-btn[_ngcontent-%COMP%]{padding:1.25rem 2rem}"]}),t})();function Jb(t,e){1&t&&Fs(0)}const Yb=function(t){return{datum:t}};function Qb(t,e){if(1&t&&(Ps(0),Ss(1,Jb,1,0,"ng-container",3),Ls()),2&t){const t=zs().$implicit;zs();const e=As(8);ai(1),Ds("ngTemplateOutlet",e)("ngTemplateOutletContext",Ra(2,Yb,t))}}function Xb(t,e){if(1&t&&(Ps(0),fo(1),function(t,e){const n=Ie();let r;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new ot("302","The pipe 'json' could not be found!")}("json",n.pipeRegistry),n.data[22]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(22,r.onDestroy)):r=n.data[22];const i=r.factory||(r.factory=se(r.type)),s=bt(Is);try{const t=Cn(!1),e=i();Cn(t),function(t,e,n,r){22>=t.data.length&&(t.data[22]=null,t.blueprint[22]=null),e[22]=r}(n,Ae(),0,e)}finally{bt(s)}}(),Ls()),2&t){const t=zs().$implicit;ai(1),mo(" ",function(t,e,n){const r=t+Yt,i=Ae(),s=we(i,r);return function(t,e){return bs.isWrapped(e)&&(e=bs.unwrap(e),t[$e()]=oi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?Ma(i,Ve(),e,s.transform,n,s):s.transform(n))}(2,1,t)," ")}}function tk(t,e){if(1&t&&(Ps(0),Ms(1,"tr"),Ms(2,"td"),Ss(3,Qb,2,4,"ng-container",2),Ns(),Ms(4,"td"),Ss(5,Xb,3,3,"ng-container",2),Ns(),Ns(),Ls()),2&t){const t=e.$implicit,n=zs();ai(3),Ds("ngIf",t.type===n.logDataTypes.POST_DECISION),ai(2),Ds("ngIf",t.type===n.logDataTypes.ADVISOR_STATE)}}function ek(t,e){if(1&t&&(Ms(0,"p"),fo(1),Ns()),2&t){const t=e.datum;ai(1),go(" On round ",t.round,", the Emperor decided to ",t.decisionEvent.chosenAction.name," ")}}let nk=(()=>{class t{constructor(t){this._logger=t,this.loggedData=[],this.loggedDataByType=new Map}get logDataTypes(){return Zu}ngOnInit(){this._logger.$gameLog.subscribe(t=>{var e;this.loggedDataByType.has(t.type)||this.loggedDataByType.set(t.type,[]),null===(e=this.loggedDataByType.get(t.type))||void 0===e||e.push(Object.assign({},t)),this.loggedData.push(Object.assign({},t))})}}return t.\u0275fac=function(e){return new(e||t)(Is(Uu))},t.\u0275cmp=qt({type:t,selectors:[["app-log"]],decls:9,vars:1,consts:[[4,"ngFor","ngForOf"],["postDecisionData",""],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(Ms(0,"table"),Ms(1,"thead"),js(2,"th"),js(3,"th"),js(4,"th"),Ns(),Ms(5,"tbody"),Ss(6,tk,6,2,"ng-container",0),Ns(),Ns(),Ss(7,ek,2,2,"ng-template",null,1,Ka)),2&t&&(ai(6),Ds("ngForOf",e.loggedData))},directives:[Gc,Jc,Xc],pipes:[tu],styles:[""]}),t})();function rk(t,e){1&t&&(Ps(0),js(1,"app-main-screen"),Ls())}function ik(t,e){if(1&t){const t=Vs();Ps(0),Ms(1,"app-end-screen",1),qs("restart",function(){return De(t),zs().onRestart()}),Ns(),Ls()}}function sk(t,e){1&t&&(Ps(0),js(1,"app-log"),Ls())}let ok=(()=>{class t{constructor(t,e){this._gameLogic=t,this._autoPlayer=e,this.gameInitialized=!1}get doShowLog(){return!1}get isTestMode(){return!1}get isGameOver(){return this._gameLogic.isGameOver}get showEndScreen(){return!1}ngOnInit(){var t=this;return Gu(function*(){yield t.initGame(),t.gameInitialized=!0})()}initGame(){var t=this;return Gu(function*(){yield t._gameLogic.onStart()})()}onRestart(){var t=this;return Gu(function*(){yield t.initGame()})()}}return t.\u0275fac=function(e){return new(e||t)(Is(Fp),Is($p))},t.\u0275cmp=qt({type:t,selectors:[["app-root"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"restart"]],template:function(t,e){1&t&&(Ss(0,rk,2,0,"ng-container",0),Ss(1,ik,2,0,"ng-container",0),Ss(2,sk,2,0,"ng-container",0)),2&t&&(Ds("ngIf",e.gameInitialized),ai(1),Ds("ngIf",e.isGameOver&&e.showEndScreen),ai(1),Ds("ngIf",e.doShowLog))},directives:[Jc,zb,Kb,nk],styles:[""]}),t})(),ak=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t,bootstrap:[ok]}),t.\u0275inj=ht({providers:[Fp,Uu,zu,o_,Cp],imports:[[Du,ab,ib]]}),t})();(function(){if(Ic)throw new Error("Cannot enable prod mode after platform setup.");Ac=!1})(),Au().bootstrapModule(ak).catch(t=>console.error(t))},525:()=>{}},t=>{"use strict";t(t.s=272)}]);