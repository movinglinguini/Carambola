<div id="container">
  <svg [attr.height]="timelineContainerHeight" [attr.width]="timelineContainerWidth">
    <svg:g id="timeline-wrapper" [attr.transform]="'translate('+ (timelineContainerWidth / 2) + ', 7.5)'">
      <!--Line covering what's already transpired.-->
      <line x1="0" x2="0" y1="0" [attr.y2]="timelineProgressAsHeight" stroke="rgba(55, 53, 47, 1)" [attr.stroke-width]="svgTimelineStrokeWidth"></line>
      <!--Line covering what hasn't transpired.-->
      <line x1="0" x2="0" [attr.y1]="timelineProgressAsHeight" [attr.y2]="timelineContainerHeight - 7.5" stroke="rgba(55, 53, 47, 0.3)" [attr.stroke-width]="svgTimelineStrokeWidth"></line>

      <svg:g id="timeline-ticks-wrapper">
        <ng-container *ngFor="let event of events; let idx = index">
          <g class="tick-wrapper" [attr.transform]="'translate(0,' + event.progressAsHeight + ')'">
            <line x1="-10" x2="10" y1="0" y2="0" stroke="rgba(55, 53, 47, 1)" [attr.stroke-width]="svgTimelineStrokeWidth"></line>

            <g class="tick-label-wrapper" [attr.mask]="getTickWrapperMask(idx)">
              <!--draw the date-->
              <text
                x="-12"
                alignment-baseline="middle"
                text-anchor="end"
                font-size="14"
              >{{beautifyDate(event.date)}}</text>
              <!--draw reaction markers-->
              <g class="reaction-marker-wrapper" transform="translate(16,0)">
                <ng-container *ngFor="let reaction of event.reactions; let idx = index">
                </ng-container>
              </g>
              <rect
                class="tick-trigger"
                x="-150"
                [attr.y]="-svgTimelineBandHeight * 0.33"
                [attr.width]="300"
                [attr.height]="svgTimelineBandHeight * 0.66"
                (click)="onClickTick(event, idx)"
                (mouseover)="onMouseOverTick(event, idx)"
                (mouseout)="onMouseOutTick(event, idx)"
                fill="transparent"
              >
              </rect>
            </g>
          </g>
        </ng-container>
      </svg:g>
    </svg:g>

    <mask id="translucent-mask">
      <rect [attr.x]="-timelineContainerWidth" [attr.y]="-timelineContainerHeight" [attr.width]="timelineContainerWidth * 2" [attr.height]="2 * timelineContainerHeight" fill="rgba(255, 255, 255, 0.3)"></rect>
    </mask>
    <mask id="opaque-mask">
      <rect [attr.x]="-timelineContainerWidth" [attr.y]="-timelineContainerHeight" [attr.width]="timelineContainerWidth * 2" [attr.height]="2 * timelineContainerHeight"  fill="white"></rect>
    </mask>
  </svg>
</div>
